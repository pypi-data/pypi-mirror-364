const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/admin-settings-button-progress-BPQGNinn.js","assets/main-Cnq2ldv_.js","assets/main-B8_0rUnw.css","assets/admin-Bt81XU3H.js","assets/forwardRefs-fUake9mW.js","assets/forwardRefs-B_sUWZn6.css","assets/admin-settings-button-progress-Cks9_KN-.css","assets/admin-menu-Db5b3nba.js","assets/change-password-dialog-DPAIPGJa.js","assets/VDialog-Cy6wFjb9.js","assets/VDialog-CpWjrJ0R.css","assets/VForm-CmVlbmJK.js","assets/VSelectionControl-Dk52iIPb.js","assets/VSelectionControl-RqBzwjYi.css","assets/VForm-DxBt30-N.css","assets/change-password-dialog-DL8UMjmX.css","assets/VDivider-BEpvozL4.js","assets/VDivider-DU47sRrT.css","assets/index-j9jeRHe0.js","assets/index-Czf-fUM7.css","assets/admin-menu-hpyUS8ku.css"])))=>i.map(i=>d[i]);
import{_ as x,x as T,V as ze,z as Fe,v as S,w,a5 as re,m as G,B as Z,D as F,an as ie,C as M,E as ee,b9 as He,ap as ue,aa as Ne,s as O,aq as ce,a as f,G as E,y as R,A as P,H as de,ba as Ye,bb as We,bc as ve,q as U,b,S as qe,aQ as Xe,bd as je,$ as me,g as he,p as fe,r as ge,az as pe,aT as I,be as Ge,c as C,bf as X,u as ye,n as Ze,d as Je,h as _e,aA as be,bg as we,J as Se,bh as ke,t as z,bi as Ce,bj as Qe,bk as De,aU as q,bl as Pe,bm as Ke,b7 as et,bn as tt,aC as at,bo as ot,e as nt,bp as st,f as lt,bq as rt,F as it,br as ut,aW as ct}from"./main-Cnq2ldv_.js";import{V as Ve,k as H,c as K,r as Be,t as Te,i as Re,d as Ee,j as $e,v as Oe,w as Ie,C as dt,D as vt,l as mt}from"./forwardRefs-fUake9mW.js";import{P as ht,d as ft}from"./unauthorized-IXAh-oLS.js";import{c as gt}from"./copy-to-clipboard-DoUvDJVx.js";import{j as pt}from"./VSelectionControl-Dk52iIPb.js";import{V as yt,u as _t,e as bt,f as wt,d as St}from"./VDialog-Cy6wFjb9.js";import{u as kt}from"./ssrBoot-CoIsTnhp.js";import{a as Q}from"./VDivider-BEpvozL4.js";const Ct={name:"ScaleButton",props:{scale:{type:Boolean,default:!1}},computed:{breakPoint(){return this.$vuetify.display.xs},density(){return this.breakPoint?"compact":"default"}}};function Dt(e,o,s,c,t,a){return S(),T(Ve,{density:a.density},ze({_:2},[Fe(e.$slots,(n,u)=>({name:u,fn:w(g=>[re(e.$slots,u,G({props:n},g))])}))]),1032,["density"])}const Pt=x(Ct,[["render",Dt]]),ne=ie(ue(()=>ce(()=>import("./admin-settings-button-progress-BPQGNinn.js"),__vite__mapDeps([0,1,2,3,4,5,6])))),Vt={name:"SettingsDrawerButton",components:{AdminSettingsButtonProgress:ne,ScaleButton:Pt},data(){return{mdiMenu:He,AdminSettingsButtonProgress:ne}},computed:{...F(ee,["isUserAdmin"])},methods:{...Z(M,["setSettingsDrawerOpen"]),onClick(){this.setSettingsDrawerOpen(!0)}}};function Bt(e,o,s,c,t,a){const n=O("ScaleButton");return S(),T(n,{id:"settingsDrawerButton",variant:"plain",icon:"",title:"Settings",onClick:Ne(a.onClick,["prevent"])},{default:w(()=>[f(H,null,{default:w(()=>[R(P(t.mdiMenu),1)]),_:1}),e.isUserAdmin?(S(),T(de(t.AdminSettingsButtonProgress),{key:0})):E("",!0)]),_:1},8,["onClick"])}const wa=x(Vt,[["render",Bt],["__scopeId","data-v-cdf6ad8a"]]),Tt={name:"OPDSUrl",props:{title:{type:String,required:!0},subtitle:{type:String,default:void 0},urlPath:{type:String,required:!0}},data(){return{mdiRss:ve,showTooltip:{show:!1}}},computed:{clipBoardEnabled(){return location.protocol=="https:"},clipBoardIcon(){return this.showTooltip.show?Ye:We},tooltip(){return this.clipBoardEnabled},url(){return globalThis.origin+this.urlPath}},methods:{onClickURL(){this.clipBoardEnabled&&gt(this.url,this.showTooltip)}}},Rt=["title"],Et={key:0},$t={class:"copied"},Ot={key:1,class:"subtitle"},It={class:"opdsUrl"};function Mt(e,o,s,c,t,a){return S(),U("div",{class:"opdsVersion",title:a.tooltip,onClick:o[0]||(o[0]=(...n)=>a.onClickURL&&a.onClickURL(...n))},[b("h3",null,[R(P(s.title)+" ",1),a.clipBoardEnabled?(S(),U("span",Et,[f(H,{class:"clipBoardIcon",size:"small"},{default:w(()=>[R(P(a.clipBoardIcon),1)]),_:1}),f(pt,null,{default:w(()=>[qe(b("span",$t,"Copied",512),[[Xe,t.showTooltip.show]])]),_:1})])):E("",!0),s.subtitle?(S(),U("span",Ot,P(s.subtitle),1)):E("",!0)]),b("div",It,P(a.url),1)],8,Rt)}const xt=x(Tt,[["render",Mt],["__scopeId","data-v-feac632b"]]),At={name:"OPDSDialog",components:{OPDSUrl:xt,PlaceholderLoading:ht},data(){return{mdiRss:ve}},computed:{...F(M,{opdsURLs:e=>e.opdsURLs})},methods:{...Z(M,["loadOPDSURLs"])}},Lt={key:0,id:"opds"};function Ut(e,o,s,c,t,a){const n=O("OPDSUrl"),u=O("PlaceholderLoading");return S(),T(yt,{"max-width":"30em"},{activator:w(({props:g})=>[f(Ve,G({id:"opdsButton",icon:"",size:"small",variant:"plain"},g,{onClick:e.loadOPDSURLs}),{default:w(()=>[f(H,null,{default:w(()=>[R(P(t.mdiRss),1)]),_:1}),o[0]||(o[0]=R(" OPDS ",-1))]),_:2,__:[0]},1040,["onClick"])]),default:w(()=>[e.opdsURLs?(S(),U("div",Lt,[b("h2",null,[f(H,{size:"x=small",class:"inline"},{default:w(()=>[R(P(t.mdiRss),1)]),_:1}),o[1]||(o[1]=R(" OPDS ",-1))]),f(n,{title:"v1.2","url-path":e.opdsURLs.v1},null,8,["url-path"]),f(n,{title:"v2.0","url-path":e.opdsURLs.v2,subtitle:"Experimental and not widely or well supported by clients"},null,8,["url-path"])])):(S(),T(u,{key:1}))]),_:1})}const zt=x(At,[["render",Ut],["__scopeId","data-v-5646b9a1"]]),Ft={name:"RepoFooter",data(){return{mdiOpenInNew:me,mdiSourceRepository:je}}},Ht={id:"repo",href:"https://github.com/ajslater/codex",title:"Codex Source Repository",target:"_blank"};function Nt(e,o,s,c,t,a){return S(),U("a",Ht,[f(H,{id:"repoIcon",size:"x-small"},{default:w(()=>[R(P(t.mdiSourceRepository),1)]),_:1}),o[0]||(o[0]=R(" repository",-1)),f(H,{color:e.$vuetify.theme.current.colors.iconsInactive,size:"x-small"},{default:w(()=>[R(P(t.mdiOpenInNew),1)]),_:1},8,["color"])])}const Yt=x(Ft,[["render",Nt],["__scopeId","data-v-fae4fb39"]]),Wt=fe({app:Boolean,color:String,height:{type:[Number,String],default:"auto"},...Ie(),...Se(),...Oe(),...we(),...$e(),...Ee({tag:"footer"}),...be()},"VFooter"),Me=he()({name:"VFooter",props:Wt(),setup(e,o){let{slots:s}=o;const c=ge(),{themeClasses:t}=pe(e),{backgroundColorClasses:a,backgroundColorStyles:n}=K(()=>e.color),{borderClasses:u}=Be(e),{elevationClasses:g}=Te(e),{roundedClasses:i}=Re(e),p=I(32),{resizeRef:m}=Ge(y=>{y.length&&(p.value=y[0].target.clientHeight)}),d=C(()=>e.height==="auto"?p.value:parseInt(e.height,10));return X(()=>e.app,()=>{const y=ke({id:e.name,order:C(()=>parseInt(e.order,10)),position:z(()=>"bottom"),layoutSize:d,elementSize:C(()=>e.height==="auto"?void 0:d.value),active:z(()=>e.app),absolute:z(()=>e.absolute)});Ce(()=>{c.value=y.layoutItemStyles.value})}),ye(()=>f(e.tag,{ref:m,class:Je(["v-footer",t.value,a.value,u.value,g.value,i.value,e.class]),style:Ze([n.value,e.app?c.value:{height:_e(e.height)},e.style])},s)),{}}}),qt={name:"VersionFooter",data(){return{mdiOpenInNew:me,mdiContentCopy:Qe}},computed:{...F(M,{versions:e=>e.versions}),...F(ee,["isUserAdmin"]),outdated:function(){return this.isUserAdmin&&this.semverGreaterThan(this.versions.latest>this.versions.installed)},versionTitle:function(){return this.outdated?`v${this.versions.latest} is available`:"up to date"}},created(){this.loadVersions()},methods:{...Z(M,["loadVersions"]),semverGreaterThan(e,o){try{if(!e||!o)return!1;const s=e.split("."),c=o.split(".");for(const[t,a]of s.entries())if(+a>+c[t])return!0}catch(s){console.debug("compare codex versions",e,">",o,s)}return!1}}},Xt={id:"version"},jt={key:0,id:"latest"};function Gt(e,o,s,c,t,a){return S(),T(Me,{id:"version-footer",title:a.versionTitle},{default:w(()=>[b("div",Xt,"codex v"+P(e.versions.installed),1),a.outdated?(S(),U("div",jt," codex v"+P(e.versions.latest)+" is available ",1)):E("",!0)]),_:1},8,["title"])}const Zt=x(qt,[["render",Gt],["__scopeId","data-v-b77f3bde"]]);function Jt(e){let{rootEl:o,isSticky:s,layoutItemStyles:c}=e;const t=I(!1),a=I(0),n=C(()=>{const i=typeof t.value=="boolean"?"top":t.value;return[s.value?{top:"auto",bottom:"auto",height:void 0}:void 0,t.value?{[i]:_e(a.value)}:{top:c.value.top}]});De(()=>{q(s,i=>{i?window.addEventListener("scroll",g,{passive:!0}):window.removeEventListener("scroll",g)},{immediate:!0})}),Pe(()=>{window.removeEventListener("scroll",g)});let u=0;function g(){const i=u>window.scrollY?"up":"down",p=o.value.getBoundingClientRect(),m=parseFloat(c.value.top??0),d=window.scrollY-Math.max(0,a.value-m),y=p.height+Math.max(a.value,m)-window.scrollY-window.innerHeight,_=parseFloat(getComputedStyle(o.value).getPropertyValue("--v-body-scroll-y"))||0;p.height<window.innerHeight-m?(t.value="top",a.value=m):i==="up"&&t.value==="bottom"||i==="down"&&t.value==="top"?(a.value=window.scrollY+p.top-_,t.value=!0):i==="down"&&y<=0?(a.value=0,t.value="bottom"):i==="up"&&d<=0&&(_?t.value!=="top"&&(a.value=-d+_+m,t.value="top"):(a.value=p.top+d,t.value="top")),u=window.scrollY}return{isStuck:t,stickyStyles:n}}const Qt=100,Kt=20;function se(e){return(e<0?-1:1)*Math.sqrt(Math.abs(e))*1.41421356237}function le(e){if(e.length<2)return 0;if(e.length===2)return e[1].t===e[0].t?0:(e[1].d-e[0].d)/(e[1].t-e[0].t);let o=0;for(let s=e.length-1;s>0;s--){if(e[s].t===e[s-1].t)continue;const c=se(o),t=(e[s].d-e[s-1].d)/(e[s].t-e[s-1].t);o+=(t-c)*Math.abs(t),s===e.length-1&&(o*=.5)}return se(o)*1e3}function ea(){const e={};function o(t){Array.from(t.changedTouches).forEach(a=>{(e[a.identifier]??(e[a.identifier]=new Ke(Kt))).push([t.timeStamp,a])})}function s(t){Array.from(t.changedTouches).forEach(a=>{delete e[a.identifier]})}function c(t){const a=e[t]?.values().reverse();if(!a)throw new Error(`No samples for touch id ${t}`);const n=a[0],u=[],g=[];for(const i of a){if(n[0]-i[0]>Qt)break;u.push({t:i[0],d:i[1].clientX}),g.push({t:i[0],d:i[1].clientY})}return{x:le(u),y:le(g),get direction(){const{x:i,y:p}=this,[m,d]=[Math.abs(i),Math.abs(p)];return m>d&&i>=0?"right":m>d&&i<=0?"left":d>m&&p>=0?"down":d>m&&p<=0?"up":ta()}}}return{addMovement:o,endTouch:s,getVelocity:c}}function ta(){throw new Error}function aa(e){let{el:o,isActive:s,isTemporary:c,width:t,touchless:a,position:n}=e;De(()=>{window.addEventListener("touchstart",A,{passive:!0}),window.addEventListener("touchmove",$,{passive:!1}),window.addEventListener("touchend",j,{passive:!0})}),Pe(()=>{window.removeEventListener("touchstart",A),window.removeEventListener("touchmove",$),window.removeEventListener("touchend",j)});const u=C(()=>["left","right"].includes(n.value)),{addMovement:g,endTouch:i,getVelocity:p}=ea();let m=!1;const d=I(!1),y=I(0),_=I(0);let D;function N(l,r){return(n.value==="left"?l:n.value==="right"?document.documentElement.clientWidth-l:n.value==="top"?l:n.value==="bottom"?document.documentElement.clientHeight-l:L())-(r?t.value:0)}function Y(l){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;const v=n.value==="left"?(l-_.value)/t.value:n.value==="right"?(document.documentElement.clientWidth-l-_.value)/t.value:n.value==="top"?(l-_.value)/t.value:n.value==="bottom"?(document.documentElement.clientHeight-l-_.value)/t.value:L();return r?et(v):v}function A(l){if(a.value)return;const r=l.changedTouches[0].clientX,v=l.changedTouches[0].clientY,h=25,V=n.value==="left"?r<h:n.value==="right"?r>document.documentElement.clientWidth-h:n.value==="top"?v<h:n.value==="bottom"?v>document.documentElement.clientHeight-h:L(),B=s.value&&(n.value==="left"?r<t.value:n.value==="right"?r>document.documentElement.clientWidth-t.value:n.value==="top"?v<t.value:n.value==="bottom"?v>document.documentElement.clientHeight-t.value:L());(V||B||s.value&&c.value)&&(D=[r,v],_.value=N(u.value?r:v,s.value),y.value=Y(u.value?r:v),m=_.value>-20&&_.value<80,i(l),g(l))}function $(l){const r=l.changedTouches[0].clientX,v=l.changedTouches[0].clientY;if(m){if(!l.cancelable){m=!1;return}const V=Math.abs(r-D[0]),B=Math.abs(v-D[1]);(u.value?V>B&&V>3:B>V&&B>3)?(d.value=!0,m=!1):(u.value?B:V)>3&&(m=!1)}if(!d.value)return;l.preventDefault(),g(l);const h=Y(u.value?r:v,!1);y.value=Math.max(0,Math.min(1,h)),h>1?_.value=N(u.value?r:v,!0):h<0&&(_.value=N(u.value?r:v,!1))}function j(l){if(m=!1,!d.value)return;g(l),d.value=!1;const r=p(l.changedTouches[0].identifier),v=Math.abs(r.x),h=Math.abs(r.y);(u.value?v>h&&v>400:h>v&&h>3)?s.value=r.direction===({left:"right",right:"left",top:"down",bottom:"up"}[n.value]||L()):s.value=y.value>.5}const W=C(()=>d.value?{transform:n.value==="left"?`translateX(calc(-100% + ${y.value*t.value}px))`:n.value==="right"?`translateX(calc(100% - ${y.value*t.value}px))`:n.value==="top"?`translateY(calc(-100% + ${y.value*t.value}px))`:n.value==="bottom"?`translateY(calc(100% - ${y.value*t.value}px))`:L(),transition:"none"}:void 0);return X(d,()=>{const l=o.value?.style.transform??null,r=o.value?.style.transition??null;Ce(()=>{o.value?.style.setProperty("transform",W.value?.transform||"none"),o.value?.style.setProperty("transition",W.value?.transition||null)}),tt(()=>{o.value?.style.setProperty("transform",l),o.value?.style.setProperty("transition",r)})}),{isDragging:d,dragProgress:y,dragStyles:W}}function L(){throw new Error}const oa=["start","end","left","right","top","bottom"],na=fe({color:String,disableResizeWatcher:Boolean,disableRouteWatcher:Boolean,expandOnHover:Boolean,floating:Boolean,modelValue:{type:Boolean,default:null},permanent:Boolean,rail:{type:Boolean,default:null},railWidth:{type:[Number,String],default:56},scrim:{type:[Boolean,String],default:!0},image:String,temporary:Boolean,persistent:Boolean,touchless:Boolean,width:{type:[Number,String],default:256},location:{type:String,default:"start",validator:e=>oa.includes(e)},sticky:Boolean,...Ie(),...Se(),...wt(),...ut({mobile:null}),...Oe(),...we(),...$e(),...Ee({tag:"nav"}),...be()},"VNavigationDrawer"),sa=he()({name:"VNavigationDrawer",props:na(),emits:{"update:modelValue":e=>!0,"update:rail":e=>!0},setup(e,o){let{attrs:s,emit:c,slots:t}=o;const{isRtl:a}=at(),{themeClasses:n}=pe(e),{borderClasses:u}=Be(e),{backgroundColorClasses:g,backgroundColorStyles:i}=K(()=>e.color),{elevationClasses:p}=Te(e),{displayClasses:m,mobile:d}=ot(e),{roundedClasses:y}=Re(e),_=dt(),D=nt(e,"modelValue",null,k=>!!k),{ssrBootStyles:N}=kt(),{scopeId:Y}=_t(),A=ge(),$=I(!1),{runOpenDelay:j,runCloseDelay:W}=bt(e,k=>{$.value=k}),l=C(()=>e.rail&&e.expandOnHover&&$.value?Number(e.width):Number(e.rail?e.railWidth:e.width)),r=C(()=>vt(e.location,a.value)),v=z(()=>e.persistent),h=C(()=>!e.permanent&&(d.value||e.temporary)),V=C(()=>e.sticky&&!h.value&&r.value!=="bottom");X(()=>e.expandOnHover&&e.rail!=null,()=>{q($,k=>c("update:rail",!k))}),X(()=>!e.disableResizeWatcher,()=>{q(h,k=>!e.permanent&&ct(()=>D.value=!k))}),X(()=>!e.disableRouteWatcher&&!!_,()=>{q(_.currentRoute,()=>h.value&&(D.value=!1))}),q(()=>e.permanent,k=>{k&&(D.value=!0)}),e.modelValue==null&&!h.value&&(D.value=e.permanent||!d.value);const{isDragging:B,dragProgress:J}=aa({el:A,isActive:D,isTemporary:h,width:l,touchless:z(()=>e.touchless),position:r}),xe=C(()=>{const k=h.value?0:e.rail&&e.expandOnHover?Number(e.railWidth):l.value;return B.value?k*J.value:k}),{layoutItemStyles:te,layoutItemScrimStyles:Ae}=ke({id:e.name,order:C(()=>parseInt(e.order,10)),position:r,layoutSize:xe,elementSize:l,active:st(D),disableTransitions:z(()=>B.value),absolute:C(()=>e.absolute||V.value&&typeof ae.value!="string")}),{isStuck:ae,stickyStyles:Le}=Jt({rootEl:A,isSticky:V,layoutItemStyles:te}),oe=K(()=>typeof e.scrim=="string"?e.scrim:null),Ue=C(()=>({...B.value?{opacity:J.value*.2,transition:"none"}:void 0,...Ae.value}));return lt({VList:{bgColor:"transparent"}}),ye(()=>{const k=t.image||e.image;return b(it,null,[f(e.tag,G({ref:A,onMouseenter:j,onMouseleave:W,class:["v-navigation-drawer",`v-navigation-drawer--${r.value}`,{"v-navigation-drawer--expand-on-hover":e.expandOnHover,"v-navigation-drawer--floating":e.floating,"v-navigation-drawer--is-hovering":$.value,"v-navigation-drawer--rail":e.rail,"v-navigation-drawer--temporary":h.value,"v-navigation-drawer--persistent":v.value,"v-navigation-drawer--active":D.value,"v-navigation-drawer--sticky":V.value},n.value,g.value,u.value,m.value,p.value,y.value,e.class],style:[i.value,te.value,N.value,Le.value,e.style]},Y,s),{default:()=>[k&&b("div",{key:"image",class:"v-navigation-drawer__img"},[t.image?f(mt,{key:"image-defaults",disabled:!e.image,defaults:{VImg:{alt:"",cover:!0,height:"inherit",src:e.image}}},t.image):f(St,{key:"image-img",alt:"",cover:!0,height:"inherit",src:e.image},null)]),t.prepend&&b("div",{class:"v-navigation-drawer__prepend"},[t.prepend?.()]),b("div",{class:"v-navigation-drawer__content"},[t.default?.()]),t.append&&b("div",{class:"v-navigation-drawer__append"},[t.append?.()])]}),f(rt,{name:"fade-transition"},{default:()=>[h.value&&(B.value||D.value)&&!!e.scrim&&b("div",G({class:["v-navigation-drawer__scrim",oe.backgroundColorClasses.value],style:[Ue.value,oe.backgroundColorStyles.value],onClick:()=>{v.value||(D.value=!1)}},Y),null)]})])}),{isStuck:ae}}}),la=ie(ue(()=>ce(()=>import("./admin-menu-Db5b3nba.js"),__vite__mapDeps([7,1,2,8,4,5,9,10,11,12,13,14,3,15,16,17,18,19,20])))),ra={name:"SettingsDrawer",components:{AuthMenu:ft,OPDSDialog:zt,RepoFooter:Yt,VersionFooter:Zt},props:{title:{type:String,required:!0}},data(){return{AdminMenu:la}},computed:{...F(ee,["isUserAdmin","isAuthorized"]),...F(M,{isSettingsDrawerOpen:e=>e.isSettingsDrawerOpen}),open:{get(){return this.isSettingsDrawerOpen||!this.isAuthorized},set(e){this.setSettingsDrawerOpen(e)}}},methods:{...Z(M,["setSettingsDrawerOpen"])}},ia={class:"settingsDrawerContainer"},ua={id:"topBlock"},ca={class:"settingsHeader"},da={id:"scrollFooter",class:"footer"};function va(e,o,s,c,t,a){const n=O("AuthMenu"),u=O("OPDSDialog"),g=O("RepoFooter"),i=O("VersionFooter");return S(),T(sa,{modelValue:a.open,"onUpdate:modelValue":o[0]||(o[0]=p=>a.open=p),"disable-route-watcher":"",location:"right",touchless:""},{append:w(()=>[f(Me,{id:"bottomFooter",class:"footer"},{default:w(()=>[f(i)]),_:1})]),default:w(()=>[b("div",ia,[b("div",ua,[b("header",ca,[b("h3",null,P(s.title),1)]),f(Q),e.isAuthorized?re(e.$slots,"panel",{key:0},void 0,!0):E("",!0),e.isAuthorized?(S(),T(Q,{key:1})):E("",!0),f(n),e.isUserAdmin?(S(),T(de(t.AdminMenu),{key:2})):E("",!0),f(Q)]),b("div",da,[e.isAuthorized?(S(),T(u,{key:0})):E("",!0),f(g)])])]),_:3},8,["modelValue"])}const Sa=x(ra,[["render",va],["__scopeId","data-v-cf28931a"]]);export{wa as S,sa as V,Sa as a,Pt as b};
