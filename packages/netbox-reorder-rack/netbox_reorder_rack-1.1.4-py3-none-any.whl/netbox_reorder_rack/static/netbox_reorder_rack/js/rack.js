(()=>{var Os=Object.defineProperty,ln=Object.defineProperties;var hn=Object.getOwnPropertyDescriptors;var Ss=Object.getOwnPropertySymbols;var cn=Object.prototype.hasOwnProperty,dn=Object.prototype.propertyIsEnumerable;var Ns=(r,t,e)=>t in r?Os(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,y=(r,t)=>{for(var e in t||(t={}))cn.call(t,e)&&Ns(r,e,t[e]);if(Ss)for(var e of Ss(t))dn.call(t,e)&&Ns(r,e,t[e]);return r},M=(r,t)=>ln(r,hn(t));var un=(r,t)=>{for(var e in t)Os(r,e,{get:t[e],enumerable:!0})};function Ds(r,t,e,i,s){let n=(...o)=>(console.warn("gridstack.js: Function `"+e+"` is deprecated in "+s+" and has been replaced with `"+i+"`. It will be **removed** in a future release"),t.apply(r,o));return n.prototype=t.prototype,n}var u=class r{static getElements(t,e=document){if(typeof t=="string"){let i="getElementById"in e?e:void 0;if(i&&!isNaN(+t[0])){let n=i.getElementById(t);return n?[n]:[]}let s=e.querySelectorAll(t);return!s.length&&t[0]!=="."&&t[0]!=="#"&&(s=e.querySelectorAll("."+t),s.length||(s=e.querySelectorAll("#"+t))),Array.from(s)}return[t]}static getElement(t,e=document){if(typeof t=="string"){let i="getElementById"in e?e:void 0;if(!t.length)return null;if(i&&t[0]==="#")return i.getElementById(t.substring(1));if(t[0]==="#"||t[0]==="."||t[0]==="[")return e.querySelector(t);if(i&&!isNaN(+t[0]))return i.getElementById(t);let s=e.querySelector(t);return i&&!s&&(s=i.getElementById(t)),s||(s=e.querySelector("."+t)),s}return t}static shouldSizeToContent(t,e=!1){return(t==null?void 0:t.grid)&&(e?t.sizeToContent===!0||t.grid.opts.sizeToContent===!0&&t.sizeToContent===void 0:!!t.sizeToContent||t.grid.opts.sizeToContent&&t.sizeToContent!==!1)}static isIntercepted(t,e){return!(t.y>=e.y+e.h||t.y+t.h<=e.y||t.x+t.w<=e.x||t.x>=e.x+e.w)}static isTouching(t,e){return r.isIntercepted(t,{x:e.x-.5,y:e.y-.5,w:e.w+1,h:e.h+1})}static areaIntercept(t,e){let i=t.x>e.x?t.x:e.x,s=t.x+t.w<e.x+e.w?t.x+t.w:e.x+e.w;if(s<=i)return 0;let n=t.y>e.y?t.y:e.y,o=t.y+t.h<e.y+e.h?t.y+t.h:e.y+e.h;return o<=n?0:(s-i)*(o-n)}static area(t){return t.w*t.h}static sort(t,e=1){return t.sort((s,n)=>{var a,l,d,h;let o=e*(((a=s.y)!=null?a:1e4)-((l=n.y)!=null?l:1e4));return o===0?e*(((d=s.x)!=null?d:1e4)-((h=n.x)!=null?h:1e4)):o})}static find(t,e){return e?t.find(i=>i.id===e):void 0}static createStylesheet(t,e,i){let s=document.createElement("style"),n=i==null?void 0:i.nonce;return n&&(s.nonce=n),s.setAttribute("type","text/css"),s.setAttribute("gs-style-id",t),s.styleSheet?s.styleSheet.cssText="":s.appendChild(document.createTextNode("")),e?e.insertBefore(s,e.firstChild):(e=document.getElementsByTagName("head")[0],e.appendChild(s)),s.sheet}static removeStylesheet(t,e){let s=(e||document).querySelector("STYLE[gs-style-id="+t+"]");s&&s.parentNode&&s.remove()}static addCSSRule(t,e,i){typeof t.addRule=="function"?t.addRule(e,i):typeof t.insertRule=="function"&&t.insertRule(`${e}{${i}}`)}static toBool(t){return typeof t=="boolean"?t:typeof t=="string"?(t=t.toLowerCase(),!(t===""||t==="no"||t==="false"||t==="0")):!!t}static toNumber(t){return t===null||t.length===0?void 0:Number(t)}static parseHeight(t){let e,i="px";if(typeof t=="string")if(t==="auto"||t==="")e=0;else{let s=t.match(/^(-[0-9]+\.[0-9]+|[0-9]*\.[0-9]+|-[0-9]+|[0-9]+)(px|em|rem|vh|vw|%|cm|mm)?$/);if(!s)throw new Error(`Invalid height val = ${t}`);i=s[2]||"px",e=parseFloat(s[1])}else e=t;return{h:e,unit:i}}static defaults(t,...e){return e.forEach(i=>{for(let s in i){if(!i.hasOwnProperty(s))return;t[s]===null||t[s]===void 0?t[s]=i[s]:typeof i[s]=="object"&&typeof t[s]=="object"&&this.defaults(t[s],i[s])}}),t}static same(t,e){if(typeof t!="object")return t==e;if(typeof t!=typeof e||Object.keys(t).length!==Object.keys(e).length)return!1;for(let i in t)if(t[i]!==e[i])return!1;return!0}static copyPos(t,e,i=!1){return e.x!==void 0&&(t.x=e.x),e.y!==void 0&&(t.y=e.y),e.w!==void 0&&(t.w=e.w),e.h!==void 0&&(t.h=e.h),i&&(e.minW&&(t.minW=e.minW),e.minH&&(t.minH=e.minH),e.maxW&&(t.maxW=e.maxW),e.maxH&&(t.maxH=e.maxH)),t}static samePos(t,e){return t&&e&&t.x===e.x&&t.y===e.y&&(t.w||1)===(e.w||1)&&(t.h||1)===(e.h||1)}static sanitizeMinMax(t){t.minW||delete t.minW,t.minH||delete t.minH,t.maxW||delete t.maxW,t.maxH||delete t.maxH}static removeInternalAndSame(t,e){if(!(typeof t!="object"||typeof e!="object"))for(let i in t){let s=t[i];if(i[0]==="_"||s===e[i])delete t[i];else if(s&&typeof s=="object"&&e[i]!==void 0){for(let n in s)(s[n]===e[i][n]||n[0]==="_")&&delete s[n];Object.keys(s).length||delete t[i]}}}static removeInternalForSave(t,e=!0){for(let i in t)(i[0]==="_"||t[i]===null||t[i]===void 0)&&delete t[i];delete t.grid,e&&delete t.el,t.autoPosition||delete t.autoPosition,t.noResize||delete t.noResize,t.noMove||delete t.noMove,t.locked||delete t.locked,(t.w===1||t.w===t.minW)&&delete t.w,(t.h===1||t.h===t.minH)&&delete t.h}static throttle(t,e){let i=!1;return(...s)=>{i||(i=!0,setTimeout(()=>{t(...s),i=!1},e))}}static removePositioningStyles(t){let e=t.style;e.position&&e.removeProperty("position"),e.left&&e.removeProperty("left"),e.top&&e.removeProperty("top"),e.width&&e.removeProperty("width"),e.height&&e.removeProperty("height")}static getScrollElement(t){if(!t)return document.scrollingElement||document.documentElement;let e=getComputedStyle(t);return/(auto|scroll)/.test(e.overflow+e.overflowY)?t:this.getScrollElement(t.parentElement)}static updateScrollPosition(t,e,i){let s=t.getBoundingClientRect(),n=window.innerHeight||document.documentElement.clientHeight;if(s.top<0||s.bottom>n){let o=s.bottom-n,a=s.top,l=this.getScrollElement(t);if(l!==null){let d=l.scrollTop;s.top<0&&i<0?t.offsetHeight>n?l.scrollTop+=i:l.scrollTop+=Math.abs(a)>Math.abs(i)?i:a:i>0&&(t.offsetHeight>n?l.scrollTop+=i:l.scrollTop+=o>i?i:o),e.top+=l.scrollTop-d}}}static updateScrollResize(t,e,i){let s=this.getScrollElement(e),n=s.clientHeight,o=s===this.getScrollElement()?0:s.getBoundingClientRect().top,a=t.clientY-o,l=a<i,d=a>n-i;l?s.scrollBy({behavior:"smooth",top:a-i}):d&&s.scrollBy({behavior:"smooth",top:i-(n-a)})}static clone(t){return t==null||typeof t!="object"?t:t instanceof Array?[...t]:y({},t)}static cloneDeep(t){let e=["parentGrid","el","grid","subGrid","engine"],i=r.clone(t);for(let s in i)i.hasOwnProperty(s)&&typeof i[s]=="object"&&s.substring(0,2)!=="__"&&!e.find(n=>n===s)&&(i[s]=r.cloneDeep(t[s]));return i}static cloneNode(t){let e=t.cloneNode(!0);return e.removeAttribute("id"),e}static appendTo(t,e){let i;typeof e=="string"?i=r.getElement(e):i=e,i&&i.appendChild(t)}static addElStyles(t,e){if(e instanceof Object)for(let i in e)e.hasOwnProperty(i)&&(Array.isArray(e[i])?e[i].forEach(s=>{t.style[i]=s}):t.style[i]=e[i])}static initEvent(t,e){let i={type:e.type},s={button:0,which:0,buttons:1,bubbles:!0,cancelable:!0,target:e.target?e.target:t.target};return t.dataTransfer&&(i.dataTransfer=t.dataTransfer),["altKey","ctrlKey","metaKey","shiftKey"].forEach(n=>i[n]=t[n]),["pageX","pageY","clientX","clientY","screenX","screenY"].forEach(n=>i[n]=t[n]),y(y({},i),s)}static simulateMouseEvent(t,e,i){let s=document.createEvent("MouseEvents");s.initMouseEvent(e,!0,!0,window,1,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,0,t.target),(i||t.target).dispatchEvent(s)}static getValuesFromTransformedElement(t){let e=document.createElement("div");r.addElStyles(e,{opacity:"0",position:"fixed",top:"0px",left:"0px",width:"1px",height:"1px",zIndex:"-999999"}),t.appendChild(e);let i=e.getBoundingClientRect();return t.removeChild(e),e.remove(),{xScale:1/i.width,yScale:1/i.height,xOffset:i.left,yOffset:i.top}}};var kt=class r{constructor(t={}){this.addedNodes=[],this.removedNodes=[],this.column=t.column||12,this.maxRow=t.maxRow,this._float=t.float,this.nodes=t.nodes||[],this.onChange=t.onChange}batchUpdate(t=!0,e=!0){return!!this.batchMode===t?this:(this.batchMode=t,t?(this._prevFloat=this._float,this._float=!0,this.cleanNodes(),this.saveInitial()):(this._float=this._prevFloat,delete this._prevFloat,e&&this._packNodes(),this._notify()),this)}_useEntireRowArea(t,e){return(!this.float||this.batchMode&&!this._prevFloat)&&!this._hasLocked&&(!t._moving||t._skipDown||e.y<=t.y)}_fixCollisions(t,e=t,i,s={}){if(this.sortNodes(-1),i=i||this.collide(t,e),!i)return!1;if(t._moving&&!s.nested&&!this.float&&this.swap(t,i))return!0;let n=e;this._useEntireRowArea(t,e)&&(n={x:0,w:this.column,y:e.y,h:e.h},i=this.collide(t,n,s.skip));let o=!1,a={nested:!0,pack:!1};for(;i=i||this.collide(t,n,s.skip);){let l;if(i.locked||t._moving&&!t._skipDown&&e.y>t.y&&!this.float&&(!this.collide(i,M(y({},i),{y:t.y}),t)||!this.collide(i,M(y({},i),{y:e.y-i.h}),t))?(t._skipDown=t._skipDown||e.y>t.y,l=this.moveNode(t,y(M(y({},e),{y:i.y+i.h}),a)),i.locked&&l?u.copyPos(e,t):!i.locked&&l&&s.pack&&(this._packNodes(),e.y=i.y+i.h,u.copyPos(t,e)),o=o||l):l=this.moveNode(i,y(M(y({},i),{y:e.y+e.h,skip:t}),a)),!l)return o;i=void 0}return o}collide(t,e=t,i){let s=t._id,n=i==null?void 0:i._id;return this.nodes.find(o=>o._id!==s&&o._id!==n&&u.isIntercepted(o,e))}collideAll(t,e=t,i){let s=t._id,n=i==null?void 0:i._id;return this.nodes.filter(o=>o._id!==s&&o._id!==n&&u.isIntercepted(o,e))}directionCollideCoverage(t,e,i){if(!e.rect||!t._rect)return;let s=t._rect,n=y({},e.rect);n.y>s.y?(n.h+=n.y-s.y,n.y=s.y):n.h+=s.y-n.y,n.x>s.x?(n.w+=n.x-s.x,n.x=s.x):n.w+=s.x-n.x;let o,a=.5;for(let l of i){if(l.locked||!l._rect)break;let d=l._rect,h=Number.MAX_VALUE,c=Number.MAX_VALUE;s.y<d.y?h=(n.y+n.h-d.y)/d.h:s.y+s.h>d.y+d.h&&(h=(d.y+d.h-n.y)/d.h),s.x<d.x?c=(n.x+n.w-d.x)/d.w:s.x+s.w>d.x+d.w&&(c=(d.x+d.w-n.x)/d.w);let f=Math.min(c,h);f>a&&(a=f,o=l)}return e.collide=o,o}cacheRects(t,e,i,s,n,o){return this.nodes.forEach(a=>a._rect={y:a.y*e+i,x:a.x*t+o,w:a.w*t-o-s,h:a.h*e-i-n}),this}swap(t,e){if(!e||e.locked||!t||t.locked)return!1;function i(){let n=e.x,o=e.y;return e.x=t.x,e.y=t.y,t.h!=e.h?(t.x=n,t.y=e.y+e.h):t.w!=e.w?(t.x=e.x+e.w,t.y=o):(t.x=n,t.y=o),t._dirty=e._dirty=!0,!0}let s;if(t.w===e.w&&t.h===e.h&&(t.x===e.x||t.y===e.y)&&(s=u.isTouching(t,e)))return i();if(s!==!1){if(t.w===e.w&&t.x===e.x&&(s||(s=u.isTouching(t,e)))){if(e.y<t.y){let n=t;t=e,e=n}return i()}if(s!==!1){if(t.h===e.h&&t.y===e.y&&(s||(s=u.isTouching(t,e)))){if(e.x<t.x){let n=t;t=e,e=n}return i()}return!1}}}isAreaEmpty(t,e,i,s){let n={x:t||0,y:e||0,w:i||1,h:s||1};return!this.collide(n)}compact(t="compact",e=!0){if(this.nodes.length===0)return this;e&&this.sortNodes();let i=this.batchMode;i||this.batchUpdate();let s=this._inColumnResize;s||(this._inColumnResize=!0);let n=this.nodes;return this.nodes=[],n.forEach((o,a,l)=>{let d;o.locked||(o.autoPosition=!0,t==="list"&&a&&(d=l[a-1])),this.addNode(o,!1,d)}),s||delete this._inColumnResize,i||this.batchUpdate(!1),this}set float(t){this._float!==t&&(this._float=t||!1,t||this._packNodes()._notify())}get float(){return this._float||!1}sortNodes(t=1){return this.nodes=u.sort(this.nodes,t),this}_packNodes(){return this.batchMode?this:(this.sortNodes(),this.float?this.nodes.forEach(t=>{if(t._updating||t._orig===void 0||t.y===t._orig.y)return;let e=t.y;for(;e>t._orig.y;)--e,this.collide(t,{x:t.x,y:e,w:t.w,h:t.h})||(t._dirty=!0,t.y=e)}):this.nodes.forEach((t,e)=>{if(!t.locked)for(;t.y>0;){let i=e===0?0:t.y-1;if(!(e===0||!this.collide(t,{x:t.x,y:i,w:t.w,h:t.h})))break;t._dirty=t.y!==i,t.y=i}}),this)}prepareNode(t,e){var s;t._id=(s=t._id)!=null?s:r._idSeq++,(t.x===void 0||t.y===void 0||t.x===null||t.y===null)&&(t.autoPosition=!0);let i={x:0,y:0,w:1,h:1};return u.defaults(t,i),t.autoPosition||delete t.autoPosition,t.noResize||delete t.noResize,t.noMove||delete t.noMove,u.sanitizeMinMax(t),typeof t.x=="string"&&(t.x=Number(t.x)),typeof t.y=="string"&&(t.y=Number(t.y)),typeof t.w=="string"&&(t.w=Number(t.w)),typeof t.h=="string"&&(t.h=Number(t.h)),isNaN(t.x)&&(t.x=i.x,t.autoPosition=!0),isNaN(t.y)&&(t.y=i.y,t.autoPosition=!0),isNaN(t.w)&&(t.w=i.w),isNaN(t.h)&&(t.h=i.h),this.nodeBoundFix(t,e),t}nodeBoundFix(t,e){let i=t._orig||u.copyPos({},t);if(t.maxW&&(t.w=Math.min(t.w,t.maxW)),t.maxH&&(t.h=Math.min(t.h,t.maxH)),t.minW&&t.minW<=this.column&&(t.w=Math.max(t.w,t.minW)),t.minH&&(t.h=Math.max(t.h,t.minH)),(t.x||0)+(t.w||1)>this.column&&this.column<12&&!this._inColumnResize&&t._id&&this.findCacheLayout(t,12)===-1){let n=y({},t);n.autoPosition||n.x===void 0?(delete n.x,delete n.y):n.x=Math.min(11,n.x),n.w=Math.min(12,n.w||1),this.cacheOneLayout(n,12)}return t.w>this.column?t.w=this.column:t.w<1&&(t.w=1),this.maxRow&&t.h>this.maxRow?t.h=this.maxRow:t.h<1&&(t.h=1),t.x<0&&(t.x=0),t.y<0&&(t.y=0),t.x+t.w>this.column&&(e?t.w=this.column-t.x:t.x=this.column-t.w),this.maxRow&&t.y+t.h>this.maxRow&&(e?t.h=this.maxRow-t.y:t.y=this.maxRow-t.h),u.samePos(t,i)||(t._dirty=!0),this}getDirtyNodes(t){return t?this.nodes.filter(e=>e._dirty&&!u.samePos(e,e._orig)):this.nodes.filter(e=>e._dirty)}_notify(t){if(this.batchMode||!this.onChange)return this;let e=(t||[]).concat(this.getDirtyNodes());return this.onChange(e),this}cleanNodes(){return this.batchMode?this:(this.nodes.forEach(t=>{delete t._dirty,delete t._lastTried}),this)}saveInitial(){return this.nodes.forEach(t=>{t._orig=u.copyPos({},t),delete t._dirty}),this._hasLocked=this.nodes.some(t=>t.locked),this}restoreInitial(){return this.nodes.forEach(t=>{u.samePos(t,t._orig)||(u.copyPos(t,t._orig),t._dirty=!0)}),this._notify(),this}findEmptyPosition(t,e=this.nodes,i=this.column,s){let n=s?s.y*i+(s.x+s.w):0,o=!1;for(let a=n;!o;++a){let l=a%i,d=Math.floor(a/i);if(l+t.w>i)continue;let h={x:l,y:d,w:t.w,h:t.h};e.find(c=>u.isIntercepted(h,c))||((t.x!==l||t.y!==d)&&(t._dirty=!0),t.x=l,t.y=d,delete t.autoPosition,o=!0)}return o}addNode(t,e=!1,i){let s=this.nodes.find(o=>o._id===t._id);if(s)return s;this._inColumnResize?this.nodeBoundFix(t):this.prepareNode(t),delete t._temporaryRemoved,delete t._removeDOM;let n;return t.autoPosition&&this.findEmptyPosition(t,this.nodes,this.column,i)&&(delete t.autoPosition,n=!0),this.nodes.push(t),e&&this.addedNodes.push(t),n||this._fixCollisions(t),this.batchMode||this._packNodes()._notify(),t}removeNode(t,e=!0,i=!1){return this.nodes.find(s=>s._id===t._id)?(i&&this.removedNodes.push(t),e&&(t._removeDOM=!0),this.nodes=this.nodes.filter(s=>s._id!==t._id),t._isAboutToRemove||this._packNodes(),this._notify([t]),this):this}removeAll(t=!0,e=!0){if(delete this._layouts,!this.nodes.length)return this;t&&this.nodes.forEach(s=>s._removeDOM=!0);let i=this.nodes;return this.removedNodes=e?i:[],this.nodes=[],this._notify(i)}moveNodeCheck(t,e){if(!this.changedPosConstrain(t,e))return!1;if(e.pack=!0,!this.maxRow)return this.moveNode(t,e);let i,s=new r({column:this.column,float:this.float,nodes:this.nodes.map(o=>o._id===t._id?(i=y({},o),i):y({},o))});if(!i)return!1;let n=s.moveNode(i,e)&&s.getRow()<=Math.max(this.getRow(),this.maxRow);if(!n&&!e.resizing&&e.collide){let o=e.collide.el.gridstackNode;if(this.swap(t,o))return this._notify(),!0}return n?(s.nodes.filter(o=>o._dirty).forEach(o=>{let a=this.nodes.find(l=>l._id===o._id);a&&(u.copyPos(a,o),a._dirty=!0)}),this._notify(),!0):!1}willItFit(t){if(delete t._willFitPos,!this.maxRow)return!0;let e=new r({column:this.column,float:this.float,nodes:this.nodes.map(s=>y({},s))}),i=y({},t);return this.cleanupNode(i),delete i.el,delete i._id,delete i.content,delete i.grid,e.addNode(i),e.getRow()<=this.maxRow?(t._willFitPos=u.copyPos({},i),!0):!1}changedPosConstrain(t,e){return e.w=e.w||t.w,e.h=e.h||t.h,t.x!==e.x||t.y!==e.y?!0:(t.maxW&&(e.w=Math.min(e.w,t.maxW)),t.maxH&&(e.h=Math.min(e.h,t.maxH)),t.minW&&(e.w=Math.max(e.w,t.minW)),t.minH&&(e.h=Math.max(e.h,t.minH)),t.w!==e.w||t.h!==e.h)}moveNode(t,e){var d,h;if(!t||!e)return!1;let i;e.pack===void 0&&!this.batchMode&&(i=e.pack=!0),typeof e.x!="number"&&(e.x=t.x),typeof e.y!="number"&&(e.y=t.y),typeof e.w!="number"&&(e.w=t.w),typeof e.h!="number"&&(e.h=t.h);let s=t.w!==e.w||t.h!==e.h,n=u.copyPos({},t,!0);if(u.copyPos(n,e),this.nodeBoundFix(n,s),u.copyPos(e,n),!e.forceCollide&&u.samePos(t,e))return!1;let o=u.copyPos({},t),a=this.collideAll(t,n,e.skip),l=!0;if(a.length){let c=t._moving&&!e.nested,f=c?this.directionCollideCoverage(t,e,a):a[0];if(c&&f&&((h=(d=t.grid)==null?void 0:d.opts)!=null&&h.subGridDynamic)&&!t.grid._isTemp){let m=u.areaIntercept(e.rect,f._rect),v=u.area(e.rect),g=u.area(f._rect);m/(v<g?v:g)>.8&&(f.grid.makeSubGrid(f.el,void 0,t),f=void 0)}f?l=!this._fixCollisions(t,n,f,e):(l=!1,i&&delete e.pack)}return l&&(t._dirty=!0,u.copyPos(t,n)),e.pack&&this._packNodes()._notify(),!u.samePos(t,o)}getRow(){return this.nodes.reduce((t,e)=>Math.max(t,e.y+e.h),0)}beginUpdate(t){return t._updating||(t._updating=!0,delete t._skipDown,this.batchMode||this.saveInitial()),this}endUpdate(){let t=this.nodes.find(e=>e._updating);return t&&(delete t._updating,delete t._skipDown),this}save(t=!0,e){var o;let i=(o=this._layouts)==null?void 0:o.length,s=i&&this.column!==i-1?this._layouts[i-1]:null,n=[];return this.sortNodes(),this.nodes.forEach(a=>{let l=s==null?void 0:s.find(h=>h._id===a._id),d=y(y({},a),l||{});u.removeInternalForSave(d,!t),e&&e(a,d),n.push(d)}),n}layoutsNodesChange(t){return!this._layouts||this._inColumnResize?this:(this._layouts.forEach((e,i)=>{if(!e||i===this.column)return this;if(i<this.column)this._layouts[i]=void 0;else{let s=i/this.column;t.forEach(n=>{if(!n._orig)return;let o=e.find(a=>a._id===n._id);o&&(o.y>=0&&n.y!==n._orig.y&&(o.y+=n.y-n._orig.y),n.x!==n._orig.x&&(o.x=Math.round(n.x*s)),n.w!==n._orig.w&&(o.w=Math.round(n.w*s)))})}}),this)}columnChanged(t,e,i="moveScale"){var a;if(!this.nodes.length||!e||t===e)return this;if(i==="none")return this;let s=i==="compact"||i==="list";s&&this.sortNodes(1),e<t&&this.cacheLayout(this.nodes,t),this.batchUpdate();let n=[],o=s?this.nodes:u.sort(this.nodes,-1);if(e>t&&this._layouts){let l=this._layouts[e]||[],d=this._layouts.length-1;!l.length&&t!==d&&((a=this._layouts[d])!=null&&a.length)&&(t=d,this._layouts[d].forEach(h=>{var f,m,v;let c=o.find(g=>g._id===h._id);c&&(!s&&!h.autoPosition&&(c.x=(f=h.x)!=null?f:c.x,c.y=(m=h.y)!=null?m:c.y),c.w=(v=h.w)!=null?v:c.w,(h.x==null||h.y===void 0)&&(c.autoPosition=!0))})),l.forEach(h=>{var f,m,v;let c=o.findIndex(g=>g._id===h._id);if(c!==-1){let g=o[c];if(s){g.w=h.w;return}(h.autoPosition||isNaN(h.x)||isNaN(h.y))&&this.findEmptyPosition(h,n),h.autoPosition||(g.x=(f=h.x)!=null?f:g.x,g.y=(m=h.y)!=null?m:g.y,g.w=(v=h.w)!=null?v:g.w,n.push(g)),o.splice(c,1)}})}if(s)this.compact(i,!1);else{if(o.length)if(typeof i=="function")i(e,t,n,o);else{let l=s?1:e/t,d=i==="move"||i==="moveScale",h=i==="scale"||i==="moveScale";o.forEach(c=>{c.x=e===1?0:d?Math.round(c.x*l):Math.min(c.x,e-1),c.w=e===1||t===1?1:h?Math.round(c.w*l)||1:Math.min(c.w,e),n.push(c)}),o=[]}n=u.sort(n,-1),this._inColumnResize=!0,this.nodes=[],n.forEach(l=>{this.addNode(l,!1),delete l._orig})}return this.nodes.forEach(l=>delete l._orig),this.batchUpdate(!1,!s),delete this._inColumnResize,this}cacheLayout(t,e,i=!1){let s=[];return t.forEach((n,o)=>{var a;if(n._id===void 0){let l=n.id?this.nodes.find(d=>d.id===n.id):void 0;n._id=(a=l==null?void 0:l._id)!=null?a:r._idSeq++}s[o]={x:n.x,y:n.y,w:n.w,_id:n._id}}),this._layouts=i?[]:this._layouts||[],this._layouts[e]=s,this}cacheOneLayout(t,e){var n;t._id=(n=t._id)!=null?n:r._idSeq++;let i={x:t.x,y:t.y,w:t.w,_id:t._id};(t.autoPosition||t.x===void 0)&&(delete i.x,delete i.y,t.autoPosition&&(i.autoPosition=!0)),this._layouts=this._layouts||[],this._layouts[e]=this._layouts[e]||[];let s=this.findCacheLayout(t,e);return s===-1?this._layouts[e].push(i):this._layouts[e][s]=i,this}findCacheLayout(t,e){var i,s,n;return(n=(s=(i=this._layouts)==null?void 0:i[e])==null?void 0:s.findIndex(o=>o._id===t._id))!=null?n:-1}removeNodeFromLayoutCache(t){if(this._layouts)for(let e=0;e<this._layouts.length;e++){let i=this.findCacheLayout(t,e);i!==-1&&this._layouts[e].splice(i,1)}}cleanupNode(t){for(let e in t)e[0]==="_"&&e!=="_id"&&delete t[e];return this}};kt._idSeq=0;var K={alwaysShowResizeHandle:"mobile",animate:!0,auto:!0,cellHeight:"auto",cellHeightThrottle:100,cellHeightUnit:"px",column:12,draggable:{handle:".grid-stack-item-content",appendTo:"body",scroll:!0},handle:".grid-stack-item-content",itemClass:"grid-stack-item",margin:10,marginUnit:"px",maxRow:0,minRow:0,placeholderClass:"grid-stack-placeholder",placeholderText:"",removableOptions:{accept:"grid-stack-item",decline:"grid-stack-non-removable"},resizable:{handles:"se"},rtl:"auto"},Ls={handle:".grid-stack-item-content",appendTo:"body"};var E=class{};var F=typeof window!="undefined"&&typeof document!="undefined"&&("ontouchstart"in document||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),J=class{};function je(r,t){if(r.touches.length>1)return;r.cancelable&&r.preventDefault();let e=r.changedTouches[0],i=document.createEvent("MouseEvents");i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(i)}function Rs(r,t){r.cancelable&&r.preventDefault();let e=document.createEvent("MouseEvents");e.initMouseEvent(t,!0,!0,window,1,r.screenX,r.screenY,r.clientX,r.clientY,!1,!1,!1,!1,0,null),r.target.dispatchEvent(e)}function Xt(r){J.touchHandled||(J.touchHandled=!0,je(r,"mousedown"))}function Qt(r){J.touchHandled&&je(r,"mousemove")}function Jt(r){if(!J.touchHandled)return;J.pointerLeaveTimeout&&(window.clearTimeout(J.pointerLeaveTimeout),delete J.pointerLeaveTimeout);let t=!!E.dragElement;je(r,"mouseup"),t||je(r,"click"),J.touchHandled=!1}function Zt(r){r.pointerType!=="mouse"&&r.target.releasePointerCapture(r.pointerId)}function Di(r){E.dragElement&&r.pointerType!=="mouse"&&Rs(r,"mouseenter")}function Li(r){E.dragElement&&r.pointerType!=="mouse"&&(J.pointerLeaveTimeout=window.setTimeout(()=>{delete J.pointerLeaveTimeout,Rs(r,"mouseleave")},10))}var ye=class r{constructor(t,e,i){this.host=t,this.dir=e,this.option=i,this.moving=!1,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this._init()}_init(){let t=this.el=document.createElement("div");return t.classList.add("ui-resizable-handle"),t.classList.add(`${r.prefix}${this.dir}`),t.style.zIndex="100",t.style.userSelect="none",this.host.appendChild(this.el),this.el.addEventListener("mousedown",this._mouseDown),F&&(this.el.addEventListener("touchstart",Xt),this.el.addEventListener("pointerdown",Zt)),this}destroy(){return this.moving&&this._mouseUp(this.mouseDownEvent),this.el.removeEventListener("mousedown",this._mouseDown),F&&(this.el.removeEventListener("touchstart",Xt),this.el.removeEventListener("pointerdown",Zt)),this.host.removeChild(this.el),delete this.el,delete this.host,this}_mouseDown(t){this.mouseDownEvent=t,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),F&&(this.el.addEventListener("touchmove",Qt),this.el.addEventListener("touchend",Jt)),t.stopPropagation(),t.preventDefault()}_mouseMove(t){let e=this.mouseDownEvent;this.moving?this._triggerEvent("move",t):Math.abs(t.x-e.x)+Math.abs(t.y-e.y)>2&&(this.moving=!0,this._triggerEvent("start",this.mouseDownEvent),this._triggerEvent("move",t)),t.stopPropagation()}_mouseUp(t){this.moving&&this._triggerEvent("stop",t),document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),F&&(this.el.removeEventListener("touchmove",Qt),this.el.removeEventListener("touchend",Jt)),delete this.moving,delete this.mouseDownEvent,t.stopPropagation(),t.preventDefault()}_triggerEvent(t,e){return this.option[t]&&this.option[t](e),this}};ye.prefix="ui-resizable-";var vt=class{constructor(){this._eventRegister={}}get disabled(){return this._disabled}on(t,e){this._eventRegister[t]=e}off(t){delete this._eventRegister[t]}enable(){this._disabled=!1}disable(){this._disabled=!0}destroy(){delete this._eventRegister}triggerEvent(t,e){if(!this.disabled&&this._eventRegister&&this._eventRegister[t])return this._eventRegister[t](e)}};var be=class r extends vt{constructor(t,e={}){super(),this.el=t,this.option=e,this.rectScale={x:1,y:1},this._ui=()=>{let s=this.el.parentElement.getBoundingClientRect(),n={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},o=this.temporalRect||n;return{position:{left:(o.left-s.left)*this.rectScale.x,top:(o.top-s.top)*this.rectScale.y},size:{width:o.width*this.rectScale.x,height:o.height*this.rectScale.y}}},this._mouseOver=this._mouseOver.bind(this),this._mouseOut=this._mouseOut.bind(this),this.enable(),this._setupAutoHide(this.option.autoHide),this._setupHandlers()}on(t,e){super.on(t,e)}off(t){super.off(t)}enable(){super.enable(),this.el.classList.remove("ui-resizable-disabled"),this._setupAutoHide(this.option.autoHide)}disable(){super.disable(),this.el.classList.add("ui-resizable-disabled"),this._setupAutoHide(!1)}destroy(){this._removeHandlers(),this._setupAutoHide(!1),delete this.el,super.destroy()}updateOption(t){let e=t.handles&&t.handles!==this.option.handles,i=t.autoHide&&t.autoHide!==this.option.autoHide;return Object.keys(t).forEach(s=>this.option[s]=t[s]),e&&(this._removeHandlers(),this._setupHandlers()),i&&this._setupAutoHide(this.option.autoHide),this}_setupAutoHide(t){return t?(this.el.classList.add("ui-resizable-autohide"),this.el.addEventListener("mouseover",this._mouseOver),this.el.addEventListener("mouseout",this._mouseOut)):(this.el.classList.remove("ui-resizable-autohide"),this.el.removeEventListener("mouseover",this._mouseOver),this.el.removeEventListener("mouseout",this._mouseOut),E.overResizeElement===this&&delete E.overResizeElement),this}_mouseOver(t){E.overResizeElement||E.dragElement||(E.overResizeElement=this,this.el.classList.remove("ui-resizable-autohide"))}_mouseOut(t){E.overResizeElement===this&&(delete E.overResizeElement,this.el.classList.add("ui-resizable-autohide"))}_setupHandlers(){return this.handlers=this.option.handles.split(",").map(t=>t.trim()).map(t=>new ye(this.el,t,{start:e=>{this._resizeStart(e)},stop:e=>{this._resizeStop(e)},move:e=>{this._resizing(e,t)}})),this}_resizeStart(t){this.sizeToContent=u.shouldSizeToContent(this.el.gridstackNode,!0),this.originalRect=this.el.getBoundingClientRect(),this.scrollEl=u.getScrollElement(this.el),this.scrollY=this.scrollEl.scrollTop,this.scrolled=0,this.startEvent=t,this._setupHelper(),this._applyChange();let e=u.initEvent(t,{type:"resizestart",target:this.el});return this.option.start&&this.option.start(e,this._ui()),this.el.classList.add("ui-resizable-resizing"),this.triggerEvent("resizestart",e),this}_resizing(t,e){this.scrolled=this.scrollEl.scrollTop-this.scrollY,this.temporalRect=this._getChange(t,e),this._applyChange();let i=u.initEvent(t,{type:"resize",target:this.el});return this.option.resize&&this.option.resize(i,this._ui()),this.triggerEvent("resize",i),this}_resizeStop(t){let e=u.initEvent(t,{type:"resizestop",target:this.el});return this.option.stop&&this.option.stop(e),this.el.classList.remove("ui-resizable-resizing"),this.triggerEvent("resizestop",e),this._cleanHelper(),delete this.startEvent,delete this.originalRect,delete this.temporalRect,delete this.scrollY,delete this.scrolled,this}_setupHelper(){this.elOriginStyleVal=r._originStyleProp.map(i=>this.el.style[i]),this.parentOriginStylePosition=this.el.parentElement.style.position;let t=this.el.parentElement,e=u.getValuesFromTransformedElement(t);return this.rectScale={x:e.xScale,y:e.yScale},getComputedStyle(this.el.parentElement).position.match(/static/)&&(this.el.parentElement.style.position="relative"),this.el.style.position="absolute",this.el.style.opacity="0.8",this}_cleanHelper(){return r._originStyleProp.forEach((t,e)=>{this.el.style[t]=this.elOriginStyleVal[e]||null}),this.el.parentElement.style.position=this.parentOriginStylePosition||null,this}_getChange(t,e){let i=this.startEvent,s={width:this.originalRect.width,height:this.originalRect.height+this.scrolled,left:this.originalRect.left,top:this.originalRect.top-this.scrolled},n=t.clientX-i.clientX,o=this.sizeToContent?0:t.clientY-i.clientY;e.indexOf("e")>-1?s.width+=n:e.indexOf("w")>-1&&(s.width-=n,s.left+=n),e.indexOf("s")>-1?s.height+=o:e.indexOf("n")>-1&&(s.height-=o,s.top+=o);let a=this._constrainSize(s.width,s.height);return Math.round(s.width)!==Math.round(a.width)&&(e.indexOf("w")>-1&&(s.left+=s.width-a.width),s.width=a.width),Math.round(s.height)!==Math.round(a.height)&&(e.indexOf("n")>-1&&(s.top+=s.height-a.height),s.height=a.height),s}_constrainSize(t,e){let i=this.option.maxWidth||Number.MAX_SAFE_INTEGER,s=this.option.minWidth/this.rectScale.x||t,n=this.option.maxHeight||Number.MAX_SAFE_INTEGER,o=this.option.minHeight/this.rectScale.y||e,a=Math.min(i,Math.max(s,t)),l=Math.min(n,Math.max(o,e));return{width:a,height:l}}_applyChange(){let t={left:0,top:0,width:0,height:0};if(this.el.style.position==="absolute"){let e=this.el.parentElement,{left:i,top:s}=e.getBoundingClientRect();t={left:i,top:s,width:0,height:0}}return this.temporalRect?(Object.keys(this.temporalRect).forEach(e=>{let i=this.temporalRect[e],s=e==="width"||e==="left"?this.rectScale.x:e==="height"||e==="top"?this.rectScale.y:1;this.el.style[e]=(i-t[e])*s+"px"}),this):this}_removeHandlers(){return this.handlers.forEach(t=>t.destroy()),delete this.handlers,this}};be._originStyleProp=["width","height","position","left","top","opacity","zIndex"];var fn='input,textarea,button,select,option,[contenteditable="true"],.ui-resizable-handle',we=class r extends vt{constructor(t,e={}){super(),this.el=t,this.option=e,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0};let i=e.handle.substring(1);this.dragEl=t.classList.contains(i)?t:t.querySelector(e.handle)||t,this._mouseDown=this._mouseDown.bind(this),this._mouseMove=this._mouseMove.bind(this),this._mouseUp=this._mouseUp.bind(this),this.enable()}on(t,e){super.on(t,e)}off(t){super.off(t)}enable(){this.disabled!==!1&&(super.enable(),this.dragEl.addEventListener("mousedown",this._mouseDown),F&&(this.dragEl.addEventListener("touchstart",Xt),this.dragEl.addEventListener("pointerdown",Zt)),this.el.classList.remove("ui-draggable-disabled"))}disable(t=!1){this.disabled!==!0&&(super.disable(),this.dragEl.removeEventListener("mousedown",this._mouseDown),F&&(this.dragEl.removeEventListener("touchstart",Xt),this.dragEl.removeEventListener("pointerdown",Zt)),t||this.el.classList.add("ui-draggable-disabled"))}destroy(){this.dragTimeout&&window.clearTimeout(this.dragTimeout),delete this.dragTimeout,this.mouseDownEvent&&this._mouseUp(this.mouseDownEvent),this.disable(!0),delete this.el,delete this.helper,delete this.option,super.destroy()}updateOption(t){return Object.keys(t).forEach(e=>this.option[e]=t[e]),this}_mouseDown(t){if(!E.mouseHandled)return t.button!==0||t.target.closest(fn)||this.option.cancel&&t.target.closest(this.option.cancel)||(this.mouseDownEvent=t,delete this.dragging,delete E.dragElement,delete E.dropElement,document.addEventListener("mousemove",this._mouseMove,{capture:!0,passive:!0}),document.addEventListener("mouseup",this._mouseUp,!0),F&&(this.dragEl.addEventListener("touchmove",Qt),this.dragEl.addEventListener("touchend",Jt)),t.preventDefault(),document.activeElement&&document.activeElement.blur(),E.mouseHandled=!0),!0}_callDrag(t){if(!this.dragging)return;let e=u.initEvent(t,{target:this.el,type:"drag"});this.option.drag&&this.option.drag(e,this.ui()),this.triggerEvent("drag",e)}_mouseMove(t){var i;let e=this.mouseDownEvent;if(this.dragging)if(this._dragFollow(t),E.pauseDrag){let s=Number.isInteger(E.pauseDrag)?E.pauseDrag:100;this.dragTimeout&&window.clearTimeout(this.dragTimeout),this.dragTimeout=window.setTimeout(()=>this._callDrag(t),s)}else this._callDrag(t);else if(Math.abs(t.x-e.x)+Math.abs(t.y-e.y)>3){this.dragging=!0,E.dragElement=this;let s=(i=this.el.gridstackNode)==null?void 0:i.grid;s?E.dropElement=s.el.ddElement.ddDroppable:delete E.dropElement,this.helper=this._createHelper(t),this._setupHelperContainmentStyle(),this.dragTransform=u.getValuesFromTransformedElement(this.helperContainment),this.dragOffset=this._getDragOffset(t,this.el,this.helperContainment);let n=u.initEvent(t,{target:this.el,type:"dragstart"});this._setupHelperStyle(t),this.option.start&&this.option.start(n,this.ui()),this.triggerEvent("dragstart",n)}return!0}_mouseUp(t){var e;if(document.removeEventListener("mousemove",this._mouseMove,!0),document.removeEventListener("mouseup",this._mouseUp,!0),F&&(this.dragEl.removeEventListener("touchmove",Qt,!0),this.dragEl.removeEventListener("touchend",Jt,!0)),this.dragging){delete this.dragging,((e=E.dropElement)==null?void 0:e.el)===this.el.parentElement&&delete E.dropElement,this.helperContainment.style.position=this.parentOriginStylePosition||null,this.helper===this.el?this._removeHelperStyle():this.helper.remove();let i=u.initEvent(t,{target:this.el,type:"dragstop"});this.option.stop&&this.option.stop(i),this.triggerEvent("dragstop",i),E.dropElement&&E.dropElement.drop(t)}delete this.helper,delete this.mouseDownEvent,delete E.dragElement,delete E.dropElement,delete E.mouseHandled,t.preventDefault()}_createHelper(t){let e=this.el;return typeof this.option.helper=="function"?e=this.option.helper(t):this.option.helper==="clone"&&(e=u.cloneNode(this.el)),document.body.contains(e)||u.appendTo(e,this.option.appendTo==="parent"?this.el.parentElement:this.option.appendTo),e===this.el&&(this.dragElementOriginStyle=r.originStyleProp.map(i=>this.el.style[i])),e}_setupHelperStyle(t){this.helper.classList.add("ui-draggable-dragging");let e=this.helper.style;return e.pointerEvents="none",e.width=this.dragOffset.width+"px",e.height=this.dragOffset.height+"px",e.willChange="left, top",e.position="fixed",this._dragFollow(t),e.transition="none",setTimeout(()=>{this.helper&&(e.transition=null)},0),this}_removeHelperStyle(){var e;this.helper.classList.remove("ui-draggable-dragging");let t=(e=this.helper)==null?void 0:e.gridstackNode;if(!(t!=null&&t._isAboutToRemove)&&this.dragElementOriginStyle){let i=this.helper,s=this.dragElementOriginStyle.transition||null;i.style.transition=this.dragElementOriginStyle.transition="none",r.originStyleProp.forEach(n=>i.style[n]=this.dragElementOriginStyle[n]||null),setTimeout(()=>i.style.transition=s,50)}return delete this.dragElementOriginStyle,this}_dragFollow(t){let e={left:0,top:0},i=this.helper.style,s=this.dragOffset;i.left=(t.clientX+s.offsetLeft-e.left)*this.dragTransform.xScale+"px",i.top=(t.clientY+s.offsetTop-e.top)*this.dragTransform.yScale+"px"}_setupHelperContainmentStyle(){return this.helperContainment=this.helper.parentElement,this.helper.style.position!=="fixed"&&(this.parentOriginStylePosition=this.helperContainment.style.position,getComputedStyle(this.helperContainment).position.match(/static/)&&(this.helperContainment.style.position="relative")),this}_getDragOffset(t,e,i){let s=0,n=0;i&&(s=this.dragTransform.xOffset,n=this.dragTransform.yOffset);let o=e.getBoundingClientRect();return{left:o.left,top:o.top,offsetLeft:-t.clientX+o.left-s,offsetTop:-t.clientY+o.top-n,width:o.width*this.dragTransform.xScale,height:o.height*this.dragTransform.yScale}}ui(){let e=this.el.parentElement.getBoundingClientRect(),i=this.helper.getBoundingClientRect();return{position:{top:(i.top-e.top)*this.dragTransform.yScale,left:(i.left-e.left)*this.dragTransform.xScale}}}};we.originStyleProp=["transition","pointerEvents","position","left","top","minWidth","willChange"];var Ye=class extends vt{constructor(t,e={}){super(),this.el=t,this.option=e,this._mouseEnter=this._mouseEnter.bind(this),this._mouseLeave=this._mouseLeave.bind(this),this.enable(),this._setupAccept()}on(t,e){super.on(t,e)}off(t){super.off(t)}enable(){this.disabled!==!1&&(super.enable(),this.el.classList.add("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),this.el.addEventListener("mouseenter",this._mouseEnter),this.el.addEventListener("mouseleave",this._mouseLeave),F&&(this.el.addEventListener("pointerenter",Di),this.el.addEventListener("pointerleave",Li)))}disable(t=!1){this.disabled!==!0&&(super.disable(),this.el.classList.remove("ui-droppable"),t||this.el.classList.add("ui-droppable-disabled"),this.el.removeEventListener("mouseenter",this._mouseEnter),this.el.removeEventListener("mouseleave",this._mouseLeave),F&&(this.el.removeEventListener("pointerenter",Di),this.el.removeEventListener("pointerleave",Li)))}destroy(){this.disable(!0),this.el.classList.remove("ui-droppable"),this.el.classList.remove("ui-droppable-disabled"),super.destroy()}updateOption(t){return Object.keys(t).forEach(e=>this.option[e]=t[e]),this._setupAccept(),this}_mouseEnter(t){if(!E.dragElement||!this._canDrop(E.dragElement.el))return;t.preventDefault(),t.stopPropagation(),E.dropElement&&E.dropElement!==this&&E.dropElement._mouseLeave(t,!0),E.dropElement=this;let e=u.initEvent(t,{target:this.el,type:"dropover"});this.option.over&&this.option.over(e,this._ui(E.dragElement)),this.triggerEvent("dropover",e),this.el.classList.add("ui-droppable-over")}_mouseLeave(t,e=!1){var s;if(!E.dragElement||E.dropElement!==this)return;t.preventDefault(),t.stopPropagation();let i=u.initEvent(t,{target:this.el,type:"dropout"});if(this.option.out&&this.option.out(i,this._ui(E.dragElement)),this.triggerEvent("dropout",i),E.dropElement===this&&(delete E.dropElement,!e)){let n,o=this.el.parentElement;for(;!n&&o;)n=(s=o.ddElement)==null?void 0:s.ddDroppable,o=o.parentElement;n&&n._mouseEnter(t)}}drop(t){t.preventDefault();let e=u.initEvent(t,{target:this.el,type:"drop"});this.option.drop&&this.option.drop(e,this._ui(E.dragElement)),this.triggerEvent("drop",e)}_canDrop(t){return t&&(!this.accept||this.accept(t))}_setupAccept(){return this.option.accept?(typeof this.option.accept=="string"?this.accept=t=>t.classList.contains(this.option.accept)||t.matches(this.option.accept):this.accept=this.option.accept,this):this}_ui(t){return y({draggable:t.el},t.ui())}};var Ke=class r{static init(t){return t.ddElement||(t.ddElement=new r(t)),t.ddElement}constructor(t){this.el=t}on(t,e){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(t)>-1?this.ddDraggable.on(t,e):this.ddDroppable&&["drop","dropover","dropout"].indexOf(t)>-1?this.ddDroppable.on(t,e):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(t)>-1&&this.ddResizable.on(t,e),this}off(t){return this.ddDraggable&&["drag","dragstart","dragstop"].indexOf(t)>-1?this.ddDraggable.off(t):this.ddDroppable&&["drop","dropover","dropout"].indexOf(t)>-1?this.ddDroppable.off(t):this.ddResizable&&["resizestart","resize","resizestop"].indexOf(t)>-1&&this.ddResizable.off(t),this}setupDraggable(t){return this.ddDraggable?this.ddDraggable.updateOption(t):this.ddDraggable=new we(this.el,t),this}cleanDraggable(){return this.ddDraggable&&(this.ddDraggable.destroy(),delete this.ddDraggable),this}setupResizable(t){return this.ddResizable?this.ddResizable.updateOption(t):this.ddResizable=new be(this.el,t),this}cleanResizable(){return this.ddResizable&&(this.ddResizable.destroy(),delete this.ddResizable),this}setupDroppable(t){return this.ddDroppable?this.ddDroppable.updateOption(t):this.ddDroppable=new Ye(this.el,t),this}cleanDroppable(){return this.ddDroppable&&(this.ddDroppable.destroy(),delete this.ddDroppable),this}};var qe=class{resizable(t,e,i,s){return this._getDDElements(t).forEach(n=>{if(e==="disable"||e==="enable")n.ddResizable&&n.ddResizable[e]();else if(e==="destroy")n.ddResizable&&n.cleanResizable();else if(e==="option")n.setupResizable({[i]:s});else{let a=n.el.gridstackNode.grid,l=n.el.getAttribute("gs-resize-handles")||a.opts.resizable.handles||"e,s,se";l==="all"&&(l="n,e,s,w,se,sw,ne,nw");let d=!a.opts.alwaysShowResizeHandle;n.setupResizable(M(y({},a.opts.resizable),{handles:l,autoHide:d,start:e.start,stop:e.stop,resize:e.resize}))}}),this}draggable(t,e,i,s){return this._getDDElements(t).forEach(n=>{if(e==="disable"||e==="enable")n.ddDraggable&&n.ddDraggable[e]();else if(e==="destroy")n.ddDraggable&&n.cleanDraggable();else if(e==="option")n.setupDraggable({[i]:s});else{let o=n.el.gridstackNode.grid;n.setupDraggable(M(y({},o.opts.draggable),{start:e.start,stop:e.stop,drag:e.drag}))}}),this}dragIn(t,e){return this._getDDElements(t).forEach(i=>i.setupDraggable(e)),this}droppable(t,e,i,s){return typeof e.accept=="function"&&!e._accept&&(e._accept=e.accept,e.accept=n=>e._accept(n)),this._getDDElements(t).forEach(n=>{e==="disable"||e==="enable"?n.ddDroppable&&n.ddDroppable[e]():e==="destroy"?n.ddDroppable&&n.cleanDroppable():e==="option"?n.setupDroppable({[i]:s}):n.setupDroppable(e)}),this}isDroppable(t){return!!(t&&t.ddElement&&t.ddElement.ddDroppable&&!t.ddElement.ddDroppable.disabled)}isDraggable(t){return!!(t&&t.ddElement&&t.ddElement.ddDraggable&&!t.ddElement.ddDraggable.disabled)}isResizable(t){return!!(t&&t.ddElement&&t.ddElement.ddResizable&&!t.ddElement.ddResizable.disabled)}on(t,e,i){return this._getDDElements(t).forEach(s=>s.on(e,n=>{i(n,E.dragElement?E.dragElement.el:n.target,E.dragElement?E.dragElement.helper:null)})),this}off(t,e){return this._getDDElements(t).forEach(i=>i.off(e)),this}_getDDElements(t,e=!0){let i=u.getElements(t);if(!i.length)return[];let s=i.map(n=>n.ddElement||(e?Ke.init(n):null));return e||s.filter(n=>n),s}};var W=new qe,Et=class r{static init(t={},e=".grid-stack"){if(typeof document=="undefined")return null;let i=r.getGridElement(e);return i?(i.gridstack||(i.gridstack=new r(i,u.cloneDeep(t))),i.gridstack):(console.error(typeof e=="string"?'GridStack.initAll() no grid was found with selector "'+e+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`:"GridStack.init() no grid element was passed."),null)}static initAll(t={},e=".grid-stack"){let i=[];return typeof document=="undefined"||(r.getGridElements(e).forEach(s=>{s.gridstack||(s.gridstack=new r(s,u.cloneDeep(t))),i.push(s.gridstack)}),i.length===0&&console.error('GridStack.initAll() no grid was found with selector "'+e+`" - element missing or wrong selector ?
Note: ".grid-stack" is required for proper CSS styling and drag/drop, and is the default selector.`)),i}static addGrid(t,e={}){if(!t)return null;let i=t;if(i.gridstack){let o=i.gridstack;return e&&(o.opts=y(y({},o.opts),e)),e.children!==void 0&&o.load(e.children),o}if(!t.classList.contains("grid-stack")||r.addRemoveCB)if(r.addRemoveCB)i=r.addRemoveCB(t,e,!0,!0);else{let o=document.implementation.createHTMLDocument("");o.body.innerHTML=`<div class="grid-stack ${e.class||""}"></div>`,i=o.body.children[0],t.appendChild(i)}return r.init(e,i)}static registerEngine(t){r.engineClass=t}get placeholder(){if(!this._placeholder){let t=document.createElement("div");t.className="placeholder-content",this.opts.placeholderText&&(t.innerHTML=this.opts.placeholderText),this._placeholder=document.createElement("div"),this._placeholder.classList.add(this.opts.placeholderClass,K.itemClass,this.opts.itemClass),this.placeholder.appendChild(t)}return this._placeholder}constructor(t,e={}){var c,f,m,v;this.el=t,this.opts=e,this._gsEventHandler={},this._extraDragRow=0,this.dragTransform={xScale:1,yScale:1,xOffset:0,yOffset:0},t.gridstack=this,e=e||{},t.classList.contains("grid-stack")||this.el.classList.add("grid-stack"),e.row&&(e.minRow=e.maxRow=e.row,delete e.row);let i=u.toNumber(t.getAttribute("gs-row"));e.column==="auto"&&delete e.column,e.alwaysShowResizeHandle!==void 0&&(e._alwaysShowResizeHandle=e.alwaysShowResizeHandle);let s=(c=e.columnOpts)==null?void 0:c.breakpoints,n=e;if(n.oneColumnModeDomSort&&(delete n.oneColumnModeDomSort,console.log("warning: Gridstack oneColumnModeDomSort no longer supported. Use GridStackOptions.columnOpts instead.")),n.oneColumnSize||n.disableOneColumnMode===!1){let g=n.oneColumnSize||768;delete n.oneColumnSize,delete n.disableOneColumnMode,e.columnOpts=e.columnOpts||{},s=e.columnOpts.breakpoints=e.columnOpts.breakpoints||[];let _=s.find(w=>w.c===1);_?_.w=g:(_={c:1,w:g},s.push(_,{c:12,w:g+1}))}let o=e.columnOpts;o&&(!o.columnWidth&&!((f=o.breakpoints)!=null&&f.length)?(delete e.columnOpts,s=void 0):o.columnMax=o.columnMax||12),(s==null?void 0:s.length)>1&&s.sort((g,_)=>(_.w||0)-(g.w||0));let a=M(y({},u.cloneDeep(K)),{column:u.toNumber(t.getAttribute("gs-column"))||K.column,minRow:i||u.toNumber(t.getAttribute("gs-min-row"))||K.minRow,maxRow:i||u.toNumber(t.getAttribute("gs-max-row"))||K.maxRow,staticGrid:u.toBool(t.getAttribute("gs-static"))||K.staticGrid,draggable:{handle:(e.handleClass?"."+e.handleClass:e.handle?e.handle:"")||K.draggable.handle},removableOptions:{accept:e.itemClass||K.removableOptions.accept,decline:K.removableOptions.decline}});t.getAttribute("gs-animate")&&(a.animate=u.toBool(t.getAttribute("gs-animate"))),e=u.defaults(e,a),this._initMargin(),this.checkDynamicColumn(),this.el.classList.add("gs-"+e.column),e.rtl==="auto"&&(e.rtl=t.style.direction==="rtl"),e.rtl&&this.el.classList.add("grid-stack-rtl");let l=(m=this.el.parentElement)==null?void 0:m.parentElement,d=l!=null&&l.classList.contains(K.itemClass)?l.gridstackNode:void 0;d&&(d.subGrid=this,this.parentGridItem=d,this.el.classList.add("grid-stack-nested"),d.el.classList.add("grid-stack-sub-grid")),this._isAutoCellHeight=e.cellHeight==="auto",this._isAutoCellHeight||e.cellHeight==="initial"?this.cellHeight(void 0,!1):(typeof e.cellHeight=="number"&&e.cellHeightUnit&&e.cellHeightUnit!==K.cellHeightUnit&&(e.cellHeight=e.cellHeight+e.cellHeightUnit,delete e.cellHeightUnit),this.cellHeight(e.cellHeight,!1)),e.alwaysShowResizeHandle==="mobile"&&(e.alwaysShowResizeHandle=F),this._styleSheetClass="gs-id-"+kt._idSeq++,this.el.classList.add(this._styleSheetClass),this._setStaticClass();let h=e.engineClass||r.engineClass||kt;if(this.engine=new h({column:this.getColumn(),float:e.float,maxRow:e.maxRow,onChange:g=>{let _=0;this.engine.nodes.forEach(w=>{_=Math.max(_,w.y+w.h)}),g.forEach(w=>{let C=w.el;C&&(w._removeDOM?(C&&C.remove(),delete w._removeDOM):this._writePosAttr(C,w))}),this._updateStyles(!1,_)}}),this._updateStyles(!1,0),e.auto&&(this.batchUpdate(),this.getGridItems().forEach(g=>this._prepareElement(g)),this.batchUpdate(!1)),e.children){let g=e.children;delete e.children,g.length&&this.load(g)}this.setAnimation(e.animate),e.subGridDynamic&&!E.pauseDrag&&(E.pauseDrag=!0),((v=e.draggable)==null?void 0:v.pause)!==void 0&&(E.pauseDrag=e.draggable.pause),this._setupRemoveDrop(),this._setupAcceptWidget(),this._updateResizeEvent()}addWidget(t,e){function i(a){return a.el!==void 0||a.x!==void 0||a.y!==void 0||a.w!==void 0||a.h!==void 0||a.content!==void 0}let s,n;if(typeof t=="string"){let a=document.implementation.createHTMLDocument("");a.body.innerHTML=t,s=a.body.children[0]}else if(arguments.length===0||arguments.length===1&&i(t))if(n=e=t,n!=null&&n.el)s=n.el;else if(r.addRemoveCB)s=r.addRemoveCB(this.el,e,!0,!1);else{let a=(e==null?void 0:e.content)||"",l=document.implementation.createHTMLDocument("");l.body.innerHTML=`<div class="grid-stack-item ${this.opts.itemClass||""}"><div class="grid-stack-item-content">${a}</div></div>`,s=l.body.children[0]}else s=t;if(!s)return;if(n=s.gridstackNode,n&&s.parentElement===this.el&&this.engine.nodes.find(a=>a._id===n._id))return s;let o=this._readAttr(s);return e=u.cloneDeep(e)||{},u.defaults(e,o),n=this.engine.prepareNode(e),this._writeAttr(s,e),this._insertNotAppend?this.el.prepend(s):this.el.appendChild(s),this.makeWidget(s,e),s}makeSubGrid(t,e,i,s=!0){var m,v,g;let n=t.gridstackNode;if(n||(n=this.makeWidget(t).gridstackNode),(m=n.subGrid)!=null&&m.el)return n.subGrid;let o,a=this;for(;a&&!o;)o=(v=a.opts)==null?void 0:v.subGridOpts,a=(g=a.parentGridItem)==null?void 0:g.grid;e=u.cloneDeep(y(M(y({},o||{}),{children:void 0}),e||n.subGridOpts||{})),n.subGridOpts=e;let l;e.column==="auto"&&(l=!0,e.column=Math.max(n.w||1,(i==null?void 0:i.w)||1),delete e.columnOpts);let d=n.el.querySelector(".grid-stack-item-content"),h,c;if(s){if(this._removeDD(n.el),c=M(y({},n),{x:0,y:0}),u.removeInternalForSave(c),delete c.subGridOpts,n.content&&(c.content=n.content,delete n.content),r.addRemoveCB)h=r.addRemoveCB(this.el,c,!0,!1);else{let _=document.implementation.createHTMLDocument("");_.body.innerHTML='<div class="grid-stack-item"></div>',h=_.body.children[0],h.appendChild(d),_.body.innerHTML='<div class="grid-stack-item-content"></div>',d=_.body.children[0],n.el.appendChild(d)}this._prepareDragDropByNode(n)}if(i){let _=l?e.column:n.w,w=n.h+i.h,C=n.el.style;C.transition="none",this.update(n.el,{w:_,h:w}),setTimeout(()=>C.transition=null)}let f=n.subGrid=r.addGrid(d,e);return i!=null&&i._moving&&(f._isTemp=!0),l&&(f._autoColumn=!0),s&&f.addWidget(h,c),i&&(i._moving?window.setTimeout(()=>u.simulateMouseEvent(i._event,"mouseenter",f.el),0):f.addWidget(n.el,n)),f}removeAsSubGrid(t){var i;let e=(i=this.parentGridItem)==null?void 0:i.grid;e&&(e.batchUpdate(),e.removeWidget(this.parentGridItem.el,!0,!0),this.engine.nodes.forEach(s=>{s.x+=this.parentGridItem.x,s.y+=this.parentGridItem.y,e.addWidget(s.el,s)}),e.batchUpdate(!1),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,t&&window.setTimeout(()=>u.simulateMouseEvent(t._event,"mouseenter",e.el),0))}save(t=!0,e=!1,i=r.saveCB){let s=this.engine.save(t,i);if(s.forEach(n=>{var o;if(t&&n.el&&!n.subGrid&&!i){let a=n.el.querySelector(".grid-stack-item-content");n.content=a?a.innerHTML:void 0,n.content||delete n.content}else if(!t&&!i&&delete n.content,(o=n.subGrid)!=null&&o.el){let a=n.subGrid.save(t,e,i);n.subGridOpts=e?a:{children:a},delete n.subGrid}delete n.el}),e){let n=u.cloneDeep(this.opts);n.marginBottom===n.marginTop&&n.marginRight===n.marginLeft&&n.marginTop===n.marginRight&&(n.margin=n.marginTop,delete n.marginTop,delete n.marginRight,delete n.marginBottom,delete n.marginLeft),n.rtl===(this.el.style.direction==="rtl")&&(n.rtl="auto"),this._isAutoCellHeight&&(n.cellHeight="auto"),this._autoColumn&&(n.column="auto");let o=n._alwaysShowResizeHandle;return delete n._alwaysShowResizeHandle,o!==void 0?n.alwaysShowResizeHandle=o:delete n.alwaysShowResizeHandle,u.removeInternalAndSame(n,K),n.children=s,n}return s}load(t,e=r.addRemoveCB||!0){var h;t=u.cloneDeep(t);let i=this.getColumn(),s=t.filter(c=>(c.x===void 0||c.y===void 0)&&!u.find(this.engine.nodes,c.id));s.length&&s.length!==t.length?t=t.filter(c=>!u.find(s,c.id)):s=[];let n=t.some(c=>c.x!==void 0||c.y!==void 0);n&&(t=u.sort(t,-1)),this._insertNotAppend=n,t.some(c=>(c.x||0)+(c.w||1)>i)&&(this._ignoreLayoutsNodeChange=!0,this.engine.cacheLayout(t,12,!0));let o=r.addRemoveCB;typeof e=="function"&&(r.addRemoveCB=e);let a=[];this.batchUpdate();let l=!this.engine.nodes.length;l&&this.setAnimation(!1),e&&[...this.engine.nodes].forEach(f=>{if(!f.id)return;u.find(t,f.id)||(r.addRemoveCB&&r.addRemoveCB(this.el,f,!1,!1),a.push(f),this.removeWidget(f.el,!0,!1))});let d=[];return this.engine.nodes=this.engine.nodes.filter(c=>u.find(t,c.id)?(d.push(c),!1):!0),t.forEach(c=>{var m;let f=u.find(d,c.id);if(f){if(u.shouldSizeToContent(f)&&(c.h=f.h),this.engine.nodeBoundFix(c),(c.autoPosition||c.x===void 0||c.y===void 0)&&(c.w=c.w||f.w,c.h=c.h||f.h,this.engine.findEmptyPosition(c)),this.engine.nodes.push(f),u.samePos(f,c)&&this.moveNode(f,M(y({},c),{forceCollide:!0})),this.update(f.el,c),(m=c.subGridOpts)!=null&&m.children){let v=f.el.querySelector(".grid-stack");v&&v.gridstack&&(v.gridstack.load(c.subGridOpts.children),this._insertNotAppend=!0)}}else e&&this.addWidget(c)}),e&&s.forEach(c=>this.addWidget(c)),this.engine.removedNodes=a,this.batchUpdate(!1),delete this._ignoreLayoutsNodeChange,delete this._insertNotAppend,o?r.addRemoveCB=o:delete r.addRemoveCB,l&&((h=this.opts)!=null&&h.animate)&&setTimeout(()=>{this.opts&&this.setAnimation(this.opts.animate)}),this}batchUpdate(t=!0){return this.engine.batchUpdate(t),t||(this._updateContainerHeight(),this._triggerRemoveEvent(),this._triggerAddEvent(),this._triggerChangeEvent()),this}getCellHeight(t=!1){if(this.opts.cellHeight&&this.opts.cellHeight!=="auto"&&(!t||!this.opts.cellHeightUnit||this.opts.cellHeightUnit==="px"))return this.opts.cellHeight;if(this.opts.cellHeightUnit==="rem")return this.opts.cellHeight*parseFloat(getComputedStyle(document.documentElement).fontSize);if(this.opts.cellHeightUnit==="em")return this.opts.cellHeight*parseFloat(getComputedStyle(this.el).fontSize);if(this.opts.cellHeightUnit==="cm")return this.opts.cellHeight*(96/2.54);if(this.opts.cellHeightUnit==="mm")return this.opts.cellHeight*(96/2.54)/10;let e=this.el.querySelector("."+this.opts.itemClass);if(e){let s=u.toNumber(e.getAttribute("gs-h"))||1;return Math.round(e.offsetHeight/s)}let i=parseInt(this.el.getAttribute("gs-current-row"));return i?Math.round(this.el.getBoundingClientRect().height/i):this.opts.cellHeight}cellHeight(t,e=!0){if(e&&t!==void 0&&this._isAutoCellHeight!==(t==="auto")&&(this._isAutoCellHeight=t==="auto",this._updateResizeEvent()),(t==="initial"||t==="auto")&&(t=void 0),t===void 0){let s=-this.opts.marginRight-this.opts.marginLeft+this.opts.marginTop+this.opts.marginBottom;t=this.cellWidth()+s}let i=u.parseHeight(t);return this.opts.cellHeightUnit===i.unit&&this.opts.cellHeight===i.h?this:(this.opts.cellHeightUnit=i.unit,this.opts.cellHeight=i.h,this.resizeToContentCheck(),e&&this._updateStyles(!0),this)}cellWidth(){return this._widthOrContainer()/this.getColumn()}_widthOrContainer(t=!1){var e;return t&&((e=this.opts.columnOpts)!=null&&e.breakpointForWindow)?window.innerWidth:this.el.clientWidth||this.el.parentElement.clientWidth||window.innerWidth}checkDynamicColumn(){var n,o;let t=this.opts.columnOpts;if(!t||!t.columnWidth&&!((n=t.breakpoints)!=null&&n.length))return!1;let e=this.getColumn(),i=e,s=this._widthOrContainer(!0);if(t.columnWidth)i=Math.min(Math.round(s/t.columnWidth)||1,t.columnMax);else{i=t.columnMax;let a=0;for(;a<t.breakpoints.length&&s<=t.breakpoints[a].w;)i=t.breakpoints[a++].c||e}if(i!==e){let a=(o=t.breakpoints)==null?void 0:o.find(l=>l.c===i);return this.column(i,(a==null?void 0:a.layout)||t.layout),!0}return!1}compact(t="compact",e=!0){return this.engine.compact(t,e),this._triggerChangeEvent(),this}column(t,e="moveScale"){if(!t||t<1||this.opts.column===t)return this;let i=this.getColumn();return this.opts.column=t,this.engine?(this.engine.column=t,this.el.classList.remove("gs-"+i),this.el.classList.add("gs-"+t),this.engine.columnChanged(i,t,e),this._isAutoCellHeight&&this.cellHeight(),this.resizeToContentCheck(!0),this._ignoreLayoutsNodeChange=!0,this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,this):this}getColumn(){return this.opts.column}getGridItems(){return Array.from(this.el.children).filter(t=>t.matches("."+this.opts.itemClass)&&!t.matches("."+this.opts.placeholderClass))}destroy(t=!0){if(this.el)return this.offAll(),this._updateResizeEvent(!0),this.setStatic(!0,!1),this.setAnimation(!1),t?this.el.parentNode.removeChild(this.el):(this.removeAll(t),this.el.classList.remove(this._styleSheetClass),this.el.removeAttribute("gs-current-row")),this._removeStylesheet(),this.parentGridItem&&delete this.parentGridItem.subGrid,delete this.parentGridItem,delete this.opts,delete this._placeholder,delete this.engine,delete this.el.gridstack,delete this.el,this}float(t){return this.opts.float!==t&&(this.opts.float=this.engine.float=t,this._triggerChangeEvent()),this}getFloat(){return this.engine.float}getCellFromPixel(t,e=!1){let i=this.el.getBoundingClientRect(),s;e?s={top:i.top+document.documentElement.scrollTop,left:i.left}:s={top:this.el.offsetTop,left:this.el.offsetLeft};let n=t.left-s.left,o=t.top-s.top,a=i.width/this.getColumn(),l=i.height/parseInt(this.el.getAttribute("gs-current-row"));return{x:Math.floor(n/a),y:Math.floor(o/l)}}getRow(){return Math.max(this.engine.getRow(),this.opts.minRow)}isAreaEmpty(t,e,i,s){return this.engine.isAreaEmpty(t,e,i,s)}makeWidget(t,e){let i=r.getElement(t);this._prepareElement(i,!0,e);let s=i.gridstackNode;return this._updateContainerHeight(),s.subGridOpts&&this.makeSubGrid(i,s.subGridOpts,void 0,!1),this.opts.column===1&&(this._ignoreLayoutsNodeChange=!0),this._triggerAddEvent(),this._triggerChangeEvent(),delete this._ignoreLayoutsNodeChange,i}on(t,e){return t.indexOf(" ")!==-1?(t.split(" ").forEach(s=>this.on(s,e)),this):(t==="change"||t==="added"||t==="removed"||t==="enable"||t==="disable"?(t==="enable"||t==="disable"?this._gsEventHandler[t]=s=>e(s):this._gsEventHandler[t]=s=>e(s,s.detail),this.el.addEventListener(t,this._gsEventHandler[t])):t==="drag"||t==="dragstart"||t==="dragstop"||t==="resizestart"||t==="resize"||t==="resizestop"||t==="dropped"||t==="resizecontent"?this._gsEventHandler[t]=e:console.error("GridStack.on("+t+") event not supported"),this)}off(t){return t.indexOf(" ")!==-1?(t.split(" ").forEach(i=>this.off(i)),this):((t==="change"||t==="added"||t==="removed"||t==="enable"||t==="disable")&&this._gsEventHandler[t]&&this.el.removeEventListener(t,this._gsEventHandler[t]),delete this._gsEventHandler[t],this)}offAll(){return Object.keys(this._gsEventHandler).forEach(t=>this.off(t)),this}removeWidget(t,e=!0,i=!0){return r.getElements(t).forEach(s=>{if(s.parentElement&&s.parentElement!==this.el)return;let n=s.gridstackNode;n||(n=this.engine.nodes.find(o=>s===o.el)),n&&(e&&r.addRemoveCB&&r.addRemoveCB(this.el,n,!1,!1),delete s.gridstackNode,this._removeDD(s),this.engine.removeNode(n,e,i),e&&s.parentElement&&s.remove())}),i&&(this._triggerRemoveEvent(),this._triggerChangeEvent()),this}removeAll(t=!0,e=!0){return this.engine.nodes.forEach(i=>{t&&r.addRemoveCB&&r.addRemoveCB(this.el,i,!1,!1),delete i.el.gridstackNode,this.opts.staticGrid||this._removeDD(i.el)}),this.engine.removeAll(t,e),e&&this._triggerRemoveEvent(),this}setAnimation(t){return t?this.el.classList.add("grid-stack-animate"):this.el.classList.remove("grid-stack-animate"),this}hasAnimationCSS(){return this.el.classList.contains("grid-stack-animate")}setStatic(t,e=!0,i=!0){return!!this.opts.staticGrid===t?this:(t?this.opts.staticGrid=!0:delete this.opts.staticGrid,this._setupRemoveDrop(),this._setupAcceptWidget(),this.engine.nodes.forEach(s=>{this._prepareDragDropByNode(s),s.subGrid&&i&&s.subGrid.setStatic(t,e,i)}),e&&this._setStaticClass(),this)}update(t,e){if(arguments.length>2){console.warn("gridstack.ts: `update(el, x, y, w, h)` is deprecated. Use `update(el, {x, w, content, ...})`. It will be removed soon");let i=arguments,s=1;return e={x:i[s++],y:i[s++],w:i[s++],h:i[s++]},this.update(t,e)}return r.getElements(t).forEach(i=>{var h;let s=i==null?void 0:i.gridstackNode;if(!s)return;let n=u.cloneDeep(e);this.engine.nodeBoundFix(n),delete n.autoPosition,delete n.id;let o=["x","y","w","h"],a;if(o.some(c=>n[c]!==void 0&&n[c]!==s[c])&&(a={},o.forEach(c=>{a[c]=n[c]!==void 0?n[c]:s[c],delete n[c]})),!a&&(n.minW||n.minH||n.maxW||n.maxH)&&(a={}),n.content!==void 0){let c=i.querySelector(".grid-stack-item-content");c&&c.innerHTML!==n.content&&(c.innerHTML=n.content,(h=s.subGrid)!=null&&h.el&&(c.appendChild(s.subGrid.el),s.subGrid.opts.styleInHead||s.subGrid._updateStyles(!0))),delete n.content}let l=!1,d=!1;for(let c in n)c[0]!=="_"&&s[c]!==n[c]&&(s[c]=n[c],l=!0,d=d||!this.opts.staticGrid&&(c==="noResize"||c==="noMove"||c==="locked"));if(u.sanitizeMinMax(s),a){let c=a.w!==void 0&&a.w!==s.w;this.moveNode(s,a),this.resizeToContentCheck(c,s)}(a||l)&&this._writeAttr(i,s),d&&this._prepareDragDropByNode(s)}),this}moveNode(t,e){this.engine.cleanNodes().beginUpdate(t).moveNode(t,e),this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate()}resizeToContent(t){if(!t||(t.classList.remove("size-to-content-max"),!t.clientHeight))return;let e=t.gridstackNode;if(!e)return;let i=e.grid;if(!i||t.parentElement!==i.el)return;let s=i.getCellHeight(!0);if(!s)return;let n=e.h?e.h*s:t.clientHeight,o;if(e.resizeToContentParent&&(o=t.querySelector(e.resizeToContentParent)),o||(o=t.querySelector(r.resizeToContentParent)),!o)return;let a=t.clientHeight-o.clientHeight,l=e.h?e.h*s-a:o.clientHeight,d;if(e.subGrid)d=e.subGrid.getRow()*e.subGrid.getCellHeight(!0);else{let f=o.firstElementChild;if(!f){console.error(`Error: GridStack.resizeToContent() widget id:${e.id} '${r.resizeToContentParent}'.firstElementChild is null, make sure to have a div like container. Skipping sizing.`);return}d=f.getBoundingClientRect().height||l}if(l===d)return;n+=d-l;let h=Math.ceil(n/s),c=Number.isInteger(e.sizeToContent)?e.sizeToContent:0;c&&h>c&&(h=c,t.classList.add("size-to-content-max")),e.minH&&h<e.minH?h=e.minH:e.maxH&&h>e.maxH&&(h=e.maxH),h!==e.h&&(i._ignoreLayoutsNodeChange=!0,i.moveNode(e,{h}),delete i._ignoreLayoutsNodeChange)}resizeToContentCBCheck(t){r.resizeToContentCB?r.resizeToContentCB(t):this.resizeToContent(t)}margin(t){if(!(typeof t=="string"&&t.split(" ").length>1)){let i=u.parseHeight(t);if(this.opts.marginUnit===i.unit&&this.opts.margin===i.h)return}return this.opts.margin=t,this.opts.marginTop=this.opts.marginBottom=this.opts.marginLeft=this.opts.marginRight=void 0,this._initMargin(),this._updateStyles(!0),this}getMargin(){return this.opts.margin}willItFit(t){if(arguments.length>1){console.warn("gridstack.ts: `willItFit(x,y,w,h,autoPosition)` is deprecated. Use `willItFit({x, y,...})`. It will be removed soon");let e=arguments,i=0,s={x:e[i++],y:e[i++],w:e[i++],h:e[i++],autoPosition:e[i++]};return this.willItFit(s)}return this.engine.willItFit(t)}_triggerChangeEvent(){if(this.engine.batchMode)return this;let t=this.engine.getDirtyNodes(!0);return t&&t.length&&(this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(t),this._triggerEvent("change",t)),this.engine.saveInitial(),this}_triggerAddEvent(){var t;if(this.engine.batchMode)return this;if((t=this.engine.addedNodes)!=null&&t.length){this._ignoreLayoutsNodeChange||this.engine.layoutsNodesChange(this.engine.addedNodes),this.engine.addedNodes.forEach(i=>{delete i._dirty});let e=[...this.engine.addedNodes];this.engine.addedNodes=[],this._triggerEvent("added",e)}return this}_triggerRemoveEvent(){var t;if(this.engine.batchMode)return this;if((t=this.engine.removedNodes)!=null&&t.length){let e=[...this.engine.removedNodes];this.engine.removedNodes=[],this._triggerEvent("removed",e)}return this}_triggerEvent(t,e){let i=e?new CustomEvent(t,{bubbles:!1,detail:e}):new Event(t);return this.el.dispatchEvent(i),this}_removeStylesheet(){if(this._styles){let t=this.opts.styleInHead?void 0:this.el.parentNode;u.removeStylesheet(this._styleSheetClass,t),delete this._styles}return this}_updateStyles(t=!1,e){if(t&&this._removeStylesheet(),e===void 0&&(e=this.getRow()),this._updateContainerHeight(),this.opts.cellHeight===0)return this;let i=this.opts.cellHeight,s=this.opts.cellHeightUnit,n=`.${this._styleSheetClass} > .${this.opts.itemClass}`;if(!this._styles){let o=this.opts.styleInHead?void 0:this.el.parentNode;if(this._styles=u.createStylesheet(this._styleSheetClass,o,{nonce:this.opts.nonce}),!this._styles)return this;this._styles._max=0,u.addCSSRule(this._styles,n,`height: ${i}${s}`);let a=this.opts.marginTop+this.opts.marginUnit,l=this.opts.marginBottom+this.opts.marginUnit,d=this.opts.marginRight+this.opts.marginUnit,h=this.opts.marginLeft+this.opts.marginUnit,c=`${n} > .grid-stack-item-content`,f=`.${this._styleSheetClass} > .grid-stack-placeholder > .placeholder-content`;u.addCSSRule(this._styles,c,`top: ${a}; right: ${d}; bottom: ${l}; left: ${h};`),u.addCSSRule(this._styles,f,`top: ${a}; right: ${d}; bottom: ${l}; left: ${h};`),u.addCSSRule(this._styles,`${n} > .ui-resizable-n`,`top: ${a};`),u.addCSSRule(this._styles,`${n} > .ui-resizable-s`,`bottom: ${l}`),u.addCSSRule(this._styles,`${n} > .ui-resizable-ne`,`right: ${d}`),u.addCSSRule(this._styles,`${n} > .ui-resizable-e`,`right: ${d}`),u.addCSSRule(this._styles,`${n} > .ui-resizable-se`,`right: ${d}; bottom: ${l}`),u.addCSSRule(this._styles,`${n} > .ui-resizable-nw`,`left: ${h}`),u.addCSSRule(this._styles,`${n} > .ui-resizable-w`,`left: ${h}`),u.addCSSRule(this._styles,`${n} > .ui-resizable-sw`,`left: ${h}; bottom: ${l}`)}if(e=e||this._styles._max,e>this._styles._max){let o=a=>i*a+s;for(let a=this._styles._max+1;a<=e;a++)u.addCSSRule(this._styles,`${n}[gs-y="${a}"]`,`top: ${o(a)}`),u.addCSSRule(this._styles,`${n}[gs-h="${a+1}"]`,`height: ${o(a+1)}`);this._styles._max=e}return this}_updateContainerHeight(){if(!this.engine||this.engine.batchMode)return this;let t=this.parentGridItem,e=this.getRow()+this._extraDragRow,i=this.opts.cellHeight,s=this.opts.cellHeightUnit;if(!i)return this;if(!t){let n=u.parseHeight(getComputedStyle(this.el).minHeight);if(n.h>0&&n.unit===s){let o=Math.floor(n.h/i);e<o&&(e=o)}}return this.el.setAttribute("gs-current-row",String(e)),this.el.style.removeProperty("min-height"),this.el.style.removeProperty("height"),e&&(this.el.style[t?"minHeight":"height"]=e*i+s),t&&!t.grid.engine.batchMode&&u.shouldSizeToContent(t)&&t.grid.resizeToContentCBCheck(t.el),this}_prepareElement(t,e=!1,i){i=i||this._readAttr(t),t.gridstackNode=i,i.el=t,i.grid=this,i=this.engine.addNode(i,e),this._writeAttr(t,i),t.classList.add(K.itemClass,this.opts.itemClass);let s=u.shouldSizeToContent(i);return s?t.classList.add("size-to-content"):t.classList.remove("size-to-content"),s&&this.resizeToContentCheck(!1,i),this._prepareDragDropByNode(i),this}_writePosAttr(t,e){return e.x!==void 0&&e.x!==null&&t.setAttribute("gs-x",String(e.x)),e.y!==void 0&&e.y!==null&&t.setAttribute("gs-y",String(e.y)),e.w>1?t.setAttribute("gs-w",String(e.w)):t.removeAttribute("gs-w"),e.h>1?t.setAttribute("gs-h",String(e.h)):t.removeAttribute("gs-h"),this}_writeAttr(t,e){if(!e)return this;this._writePosAttr(t,e);let i={autoPosition:"gs-auto-position",noResize:"gs-no-resize",noMove:"gs-no-move",locked:"gs-locked",id:"gs-id"};for(let s in i)e[s]?t.setAttribute(i[s],String(e[s])):t.removeAttribute(i[s]);return this}_readAttr(t,e=!0){let i={};i.x=u.toNumber(t.getAttribute("gs-x")),i.y=u.toNumber(t.getAttribute("gs-y")),i.w=u.toNumber(t.getAttribute("gs-w")),i.h=u.toNumber(t.getAttribute("gs-h")),i.autoPosition=u.toBool(t.getAttribute("gs-auto-position")),i.noResize=u.toBool(t.getAttribute("gs-no-resize")),i.noMove=u.toBool(t.getAttribute("gs-no-move")),i.locked=u.toBool(t.getAttribute("gs-locked")),i.id=t.getAttribute("gs-id"),i.maxW=u.toNumber(t.getAttribute("gs-max-w")),i.minW=u.toNumber(t.getAttribute("gs-min-w")),i.maxH=u.toNumber(t.getAttribute("gs-max-h")),i.minH=u.toNumber(t.getAttribute("gs-min-h")),e&&(i.w===1&&t.removeAttribute("gs-w"),i.h===1&&t.removeAttribute("gs-h"),i.maxW&&t.removeAttribute("gs-max-w"),i.minW&&t.removeAttribute("gs-min-w"),i.maxH&&t.removeAttribute("gs-max-h"),i.minH&&t.removeAttribute("gs-min-h"));for(let s in i){if(!i.hasOwnProperty(s))return;!i[s]&&i[s]!==0&&delete i[s]}return i}_setStaticClass(){let t=["grid-stack-static"];return this.opts.staticGrid?(this.el.classList.add(...t),this.el.setAttribute("gs-static","true")):(this.el.classList.remove(...t),this.el.removeAttribute("gs-static")),this}onResize(){var e;if(!((e=this.el)!=null&&e.clientWidth)||this.prevWidth===this.el.clientWidth)return;this.prevWidth=this.el.clientWidth,this.batchUpdate();let t=!1;return this._autoColumn&&this.parentGridItem?this.opts.column!==this.parentGridItem.w&&(this.column(this.parentGridItem.w,"none"),t=!0):t=this.checkDynamicColumn(),this._isAutoCellHeight&&this.cellHeight(),this.engine.nodes.forEach(i=>{i.subGrid&&i.subGrid.onResize()}),this._skipInitialResize||this.resizeToContentCheck(t),delete this._skipInitialResize,this.batchUpdate(!1),this}resizeToContentCheck(t=!1,e=void 0){if(this.engine){if(t&&this.hasAnimationCSS())return setTimeout(()=>this.resizeToContentCheck(!1,e),310);if(e)u.shouldSizeToContent(e)&&this.resizeToContentCBCheck(e.el);else if(this.engine.nodes.some(i=>u.shouldSizeToContent(i))){let i=[...this.engine.nodes];this.batchUpdate(),i.forEach(s=>{u.shouldSizeToContent(s)&&this.resizeToContentCBCheck(s.el)}),this.batchUpdate(!1)}this._gsEventHandler.resizecontent&&this._gsEventHandler.resizecontent(null,e?[e]:this.engine.nodes)}}_updateResizeEvent(t=!1){let e=!this.parentGridItem&&(this._isAutoCellHeight||this.opts.sizeToContent||this.opts.columnOpts||this.engine.nodes.find(i=>i.sizeToContent));return!t&&e&&!this.resizeObserver?(this._sizeThrottle=u.throttle(()=>this.onResize(),this.opts.cellHeightThrottle),this.resizeObserver=new ResizeObserver(()=>this._sizeThrottle()),this.resizeObserver.observe(this.el),this._skipInitialResize=!0):(t||!e)&&this.resizeObserver&&(this.resizeObserver.disconnect(),delete this.resizeObserver,delete this._sizeThrottle),this}static getElement(t=".grid-stack-item"){return u.getElement(t)}static getElements(t=".grid-stack-item"){return u.getElements(t)}static getGridElement(t){return r.getElement(t)}static getGridElements(t){return u.getElements(t)}_initMargin(){let t,e=0,i=[];return typeof this.opts.margin=="string"&&(i=this.opts.margin.split(" ")),i.length===2?(this.opts.marginTop=this.opts.marginBottom=i[0],this.opts.marginLeft=this.opts.marginRight=i[1]):i.length===4?(this.opts.marginTop=i[0],this.opts.marginRight=i[1],this.opts.marginBottom=i[2],this.opts.marginLeft=i[3]):(t=u.parseHeight(this.opts.margin),this.opts.marginUnit=t.unit,e=this.opts.margin=t.h),this.opts.marginTop===void 0?this.opts.marginTop=e:(t=u.parseHeight(this.opts.marginTop),this.opts.marginTop=t.h,delete this.opts.margin),this.opts.marginBottom===void 0?this.opts.marginBottom=e:(t=u.parseHeight(this.opts.marginBottom),this.opts.marginBottom=t.h,delete this.opts.margin),this.opts.marginRight===void 0?this.opts.marginRight=e:(t=u.parseHeight(this.opts.marginRight),this.opts.marginRight=t.h,delete this.opts.margin),this.opts.marginLeft===void 0?this.opts.marginLeft=e:(t=u.parseHeight(this.opts.marginLeft),this.opts.marginLeft=t.h,delete this.opts.margin),this.opts.marginUnit=t.unit,this.opts.marginTop===this.opts.marginBottom&&this.opts.marginLeft===this.opts.marginRight&&this.opts.marginTop===this.opts.marginRight&&(this.opts.margin=this.opts.marginTop),this}static getDD(){return W}static setupDragIn(t,e,i=document){(e==null?void 0:e.pause)!==void 0&&(E.pauseDrag=e.pause),e=y(y({},Ls),e||{});let s=typeof t=="string"?u.getElements(t,i):t;s.length&&(s==null||s.forEach(n=>{W.isDraggable(n)||W.dragIn(n,e)}))}movable(t,e){return this.opts.staticGrid?this:(r.getElements(t).forEach(i=>{let s=i.gridstackNode;s&&(e?delete s.noMove:s.noMove=!0,this._prepareDragDropByNode(s))}),this)}resizable(t,e){return this.opts.staticGrid?this:(r.getElements(t).forEach(i=>{let s=i.gridstackNode;s&&(e?delete s.noResize:s.noResize=!0,this._prepareDragDropByNode(s))}),this)}disable(t=!0){if(!this.opts.staticGrid)return this.enableMove(!1,t),this.enableResize(!1,t),this._triggerEvent("disable"),this}enable(t=!0){if(!this.opts.staticGrid)return this.enableMove(!0,t),this.enableResize(!0,t),this._triggerEvent("enable"),this}enableMove(t,e=!0){return this.opts.staticGrid?this:(t?delete this.opts.disableDrag:this.opts.disableDrag=!0,this.engine.nodes.forEach(i=>{this._prepareDragDropByNode(i),i.subGrid&&e&&i.subGrid.enableMove(t,e)}),this)}enableResize(t,e=!0){return this.opts.staticGrid?this:(t?delete this.opts.disableResize:this.opts.disableResize=!0,this.engine.nodes.forEach(i=>{this._prepareDragDropByNode(i),i.subGrid&&e&&i.subGrid.enableResize(t,e)}),this)}_removeDD(t){return W.draggable(t,"destroy").resizable(t,"destroy"),t.gridstackNode&&delete t.gridstackNode._initDD,delete t.ddElement,this}_setupAcceptWidget(){if(this.opts.staticGrid||!this.opts.acceptWidgets&&!this.opts.removable)return W.droppable(this.el,"destroy"),this;let t,e,i=(s,n,o)=>{var f;let a=n.gridstackNode;if(!a)return;if(o=o||n,!((f=a.grid)!=null&&f.el)){o.style.transform=`scale(${1/this.dragTransform.xScale},${1/this.dragTransform.yScale})`;let m=o.getBoundingClientRect();o.style.left=m.x+(this.dragTransform.xScale-1)*(s.clientX-m.x)/this.dragTransform.xScale+"px",o.style.top=m.y+(this.dragTransform.yScale-1)*(s.clientY-m.y)/this.dragTransform.yScale+"px",o.style.transformOrigin="0px 0px"}let l=this.el.getBoundingClientRect(),{top:d,left:h}=o.getBoundingClientRect();h-=l.left,d-=l.top;let c={position:{top:d*this.dragTransform.xScale,left:h*this.dragTransform.yScale}};if(a._temporaryRemoved){if(a.x=Math.max(0,Math.round(h/e)),a.y=Math.max(0,Math.round(d/t)),delete a.autoPosition,this.engine.nodeBoundFix(a),!this.engine.willItFit(a)){if(a.autoPosition=!0,!this.engine.willItFit(a)){W.off(n,"drag");return}a._willFitPos&&(u.copyPos(a,a._willFitPos),delete a._willFitPos)}this._onStartMoving(o,s,c,a,e,t)}else this._dragOrResize(o,s,c,a,e,t)};return W.droppable(this.el,{accept:s=>{let n=s.gridstackNode||this._readAttr(s,!1);if((n==null?void 0:n.grid)===this)return!0;if(!this.opts.acceptWidgets)return!1;let o=!0;if(typeof this.opts.acceptWidgets=="function")o=this.opts.acceptWidgets(s);else{let a=this.opts.acceptWidgets===!0?".grid-stack-item":this.opts.acceptWidgets;o=s.matches(a)}if(o&&n&&this.opts.maxRow){let a={w:n.w,h:n.h,minW:n.minW,minH:n.minH};o=this.engine.willItFit(a)}return o}}).on(this.el,"dropover",(s,n,o)=>{let a=n.gridstackNode;if((a==null?void 0:a.grid)===this&&!a._temporaryRemoved)return!1;a!=null&&a.grid&&a.grid!==this&&!a._temporaryRemoved&&a.grid._leave(n,o),e=this.cellWidth(),t=this.getCellHeight(!0),a||(a=this._readAttr(n,!1)),a.grid||(a._isExternal=!0,n.gridstackNode=a),o=o||n;let l=a.w||Math.round(o.offsetWidth/e)||1,d=a.h||Math.round(o.offsetHeight/t)||1;return a.grid&&a.grid!==this?(n._gridstackNodeOrig||(n._gridstackNodeOrig=a),n.gridstackNode=a=M(y({},a),{w:l,h:d,grid:this}),delete a.x,delete a.y,this.engine.cleanupNode(a).nodeBoundFix(a),a._initDD=a._isExternal=a._temporaryRemoved=!0):(a.w=l,a.h=d,a._temporaryRemoved=!0),r._itemRemoving(a.el,!1),W.on(n,"drag",i),i(s,n,o),!1}).on(this.el,"dropout",(s,n,o)=>{let a=n.gridstackNode;return a&&(!a.grid||a.grid===this)&&(this._leave(n,o),this._isTemp&&this.removeAsSubGrid(a)),!1}).on(this.el,"drop",(s,n,o)=>{var f,m;let a=n.gridstackNode;if((a==null?void 0:a.grid)===this&&!a._isExternal)return!1;let l=!!this.placeholder.parentElement;this.placeholder.remove();let d=l&&this.opts.animate;d&&this.setAnimation(!1);let h=n._gridstackNodeOrig;if(delete n._gridstackNodeOrig,l&&(h!=null&&h.grid)&&h.grid!==this){let v=h.grid;v.engine.removeNodeFromLayoutCache(h),v.engine.removedNodes.push(h),v._triggerRemoveEvent()._triggerChangeEvent(),v.parentGridItem&&!v.engine.nodes.length&&v.opts.subGridDynamic&&v.removeAsSubGrid()}if(!a||(l&&(this.engine.cleanupNode(a),a.grid=this),delete a.grid._isTemp,W.off(n,"drag"),o!==n?(o.remove(),n.gridstackNode=h,l&&(n=n.cloneNode(!0))):(n.remove(),this._removeDD(n)),!l))return!1;n.gridstackNode=a,a.el=n;let c=(m=(f=a.subGrid)==null?void 0:f.el)==null?void 0:m.gridstack;return u.copyPos(a,this._readAttr(this.placeholder)),u.removePositioningStyles(n),this.el.appendChild(n),this._prepareElement(n,!0,a),c&&(c.parentGridItem=a,c.opts.styleInHead||c._updateStyles(!0)),this._updateContainerHeight(),this.engine.addedNodes.push(a),this._triggerAddEvent(),this._triggerChangeEvent(),this.engine.endUpdate(),this._gsEventHandler.dropped&&this._gsEventHandler.dropped(M(y({},s),{type:"dropped"}),h&&h.grid?h:void 0,a),d&&setTimeout(()=>{this.opts&&this.setAnimation(this.opts.animate)}),!1}),this}static _itemRemoving(t,e){let i=t?t.gridstackNode:void 0;!(i!=null&&i.grid)||t.classList.contains(i.grid.opts.removableOptions.decline)||(e?i._isAboutToRemove=!0:delete i._isAboutToRemove,e?t.classList.add("grid-stack-item-removing"):t.classList.remove("grid-stack-item-removing"))}_setupRemoveDrop(){if(typeof this.opts.removable!="string")return this;let t=document.querySelector(this.opts.removable);return t?(!this.opts.staticGrid&&!W.isDroppable(t)&&W.droppable(t,this.opts.removableOptions).on(t,"dropover",(e,i)=>r._itemRemoving(i,!0)).on(t,"dropout",(e,i)=>r._itemRemoving(i,!1)),this):this}_prepareDragDropByNode(t){let e=t.el,i=t.noMove||this.opts.disableDrag,s=t.noResize||this.opts.disableResize;if(this.opts.staticGrid||i&&s)return t._initDD&&(this._removeDD(e),delete t._initDD),e.classList.add("ui-draggable-disabled","ui-resizable-disabled"),this;if(!t._initDD){let n,o,a=(h,c)=>{this._gsEventHandler[h.type]&&this._gsEventHandler[h.type](h,h.target),n=this.cellWidth(),o=this.getCellHeight(!0),this._onStartMoving(e,h,c,t,n,o)},l=(h,c)=>{this._dragOrResize(e,h,c,t,n,o)},d=h=>{this.placeholder.remove(),delete t._moving,delete t._event,delete t._lastTried;let c=t.w!==t._orig.w,f=h.target;if(!(!f.gridstackNode||f.gridstackNode.grid!==this)){if(t.el=f,t._isAboutToRemove){let m=e.gridstackNode.grid;m._gsEventHandler[h.type]&&m._gsEventHandler[h.type](h,f),m.engine.nodes.push(t),m.removeWidget(e,!0,!0)}else u.removePositioningStyles(f),t._temporaryRemoved?(u.copyPos(t,t._orig),this._writePosAttr(f,t),this.engine.addNode(t)):this._writePosAttr(f,t),this._gsEventHandler[h.type]&&this._gsEventHandler[h.type](h,f);this._extraDragRow=0,this._updateContainerHeight(),this._triggerChangeEvent(),this.engine.endUpdate(),h.type==="resizestop"&&(Number.isInteger(t.sizeToContent)&&(t.sizeToContent=t.h),this.resizeToContentCheck(c,t))}};W.draggable(e,{start:a,stop:d,drag:l}).resizable(e,{start:a,stop:d,resize:l}),t._initDD=!0}return W.draggable(e,i?"disable":"enable").resizable(e,s?"disable":"enable"),this}_onStartMoving(t,e,i,s,n,o){var a;if(this.engine.cleanNodes().beginUpdate(s),this._writePosAttr(this.placeholder,s),this.el.appendChild(this.placeholder),(a=s.grid)!=null&&a.el)this.dragTransform=u.getValuesFromTransformedElement(t);else if(this.placeholder&&this.placeholder.closest(".grid-stack")){let l=this.placeholder.closest(".grid-stack");this.dragTransform=u.getValuesFromTransformedElement(l)}else this.dragTransform={xScale:1,xOffset:0,yScale:1,yOffset:0};s.el=this.placeholder,s._lastUiPosition=i.position,s._prevYPix=i.position.top,s._moving=e.type==="dragstart",delete s._lastTried,e.type==="dropover"&&s._temporaryRemoved&&(this.engine.addNode(s),s._moving=!0),this.engine.cacheRects(n,o,this.opts.marginTop,this.opts.marginRight,this.opts.marginBottom,this.opts.marginLeft),e.type==="resizestart"&&(W.resizable(t,"option","minWidth",n*(s.minW||1)).resizable(t,"option","minHeight",o*(s.minH||1)),s.maxW&&W.resizable(t,"option","maxWidth",n*s.maxW),s.maxH&&W.resizable(t,"option","maxHeight",o*s.maxH))}_dragOrResize(t,e,i,s,n,o){let a=y({},s._orig),l,d=this.opts.marginLeft,h=this.opts.marginRight,c=this.opts.marginTop,f=this.opts.marginBottom,m=Math.round(o*.1),v=Math.round(n*.1);if(d=Math.min(d,v),h=Math.min(h,v),c=Math.min(c,m),f=Math.min(f,m),e.type==="drag"){if(s._temporaryRemoved)return;let _=i.position.top-s._prevYPix;s._prevYPix=i.position.top,this.opts.draggable.scroll!==!1&&u.updateScrollPosition(t,i.position,_);let w=i.position.left+(i.position.left>s._lastUiPosition.left?-h:d),C=i.position.top+(i.position.top>s._lastUiPosition.top?-f:c);a.x=Math.round(w/n),a.y=Math.round(C/o);let N=this._extraDragRow;if(this.engine.collide(s,a)){let A=this.getRow(),T=Math.max(0,a.y+s.h-A);this.opts.maxRow&&A+T>this.opts.maxRow&&(T=Math.max(0,this.opts.maxRow-A)),this._extraDragRow=T}else this._extraDragRow=0;if(this._extraDragRow!==N&&this._updateContainerHeight(),s.x===a.x&&s.y===a.y)return}else if(e.type==="resize"){if(a.x<0||(u.updateScrollResize(e,t,o),a.w=Math.round((i.size.width-d)/n),a.h=Math.round((i.size.height-c)/o),s.w===a.w&&s.h===a.h)||s._lastTried&&s._lastTried.w===a.w&&s._lastTried.h===a.h)return;let _=i.position.left+d,w=i.position.top+c;a.x=Math.round(_/n),a.y=Math.round(w/o),l=!0}s._event=e,s._lastTried=a;let g={x:i.position.left+d,y:i.position.top+c,w:(i.size?i.size.width:s.w*n)-d-h,h:(i.size?i.size.height:s.h*o)-c-f};if(this.engine.moveNodeCheck(s,M(y({},a),{cellWidth:n,cellHeight:o,rect:g,resizing:l}))){s._lastUiPosition=i.position,this.engine.cacheRects(n,o,c,h,f,d),delete s._skipDown,l&&s.subGrid&&s.subGrid.onResize(),this._extraDragRow=0,this._updateContainerHeight();let _=e.target;this._writePosAttr(_,s),this._gsEventHandler[e.type]&&this._gsEventHandler[e.type](e,_)}}_leave(t,e){let i=t.gridstackNode;i&&(e=e||t,e.style.transform="scale(1)",W.off(t,"drag"),!i._temporaryRemoved&&(i._temporaryRemoved=!0,this.engine.removeNode(i),i.el=i._isExternal&&e?e:t,this.opts.removable===!0&&r._itemRemoving(t,!0),t._gridstackNodeOrig?(t.gridstackNode=t._gridstackNodeOrig,delete t._gridstackNodeOrig):i._isExternal&&(delete i.el,delete t.gridstackNode,this.engine.restoreInitial())))}commit(){return Ds(this,this.batchUpdate(!1),"commit","batchUpdate","5.2"),this}};Et.resizeToContentParent=".grid-stack-item-content";Et.Utils=u;Et.Engine=kt;Et.GDRev="10.1.2";var ni={};un(ni,{afterMain:()=>Hs,afterRead:()=>Ps,afterWrite:()=>Ws,applyStyles:()=>ee,arrow:()=>Qe,auto:()=>Ae,basePlacements:()=>dt,beforeMain:()=>Is,beforeRead:()=>Ms,beforeWrite:()=>zs,bottom:()=>k,clippingParents:()=>Ri,computeStyles:()=>se,createPopper:()=>Re,createPopperBase:()=>Xs,createPopperLite:()=>Qs,detectOverflow:()=>Y,end:()=>yt,eventListeners:()=>re,flip:()=>ei,hide:()=>ii,left:()=>L,main:()=>$s,modifierPhases:()=>ki,offset:()=>si,placements:()=>Ce,popper:()=>Pt,popperGenerator:()=>Gt,popperOffsets:()=>ae,preventOverflow:()=>ri,read:()=>ks,reference:()=>Mi,right:()=>R,start:()=>ht,top:()=>O,variationPlacements:()=>Xe,viewport:()=>Te,write:()=>Bs});var O="top",k="bottom",R="right",L="left",Ae="auto",dt=[O,k,R,L],ht="start",yt="end",Ri="clippingParents",Te="viewport",Pt="popper",Mi="reference",Xe=dt.reduce(function(r,t){return r.concat([t+"-"+ht,t+"-"+yt])},[]),Ce=[].concat(dt,[Ae]).reduce(function(r,t){return r.concat([t,t+"-"+ht,t+"-"+yt])},[]),Ms="beforeRead",ks="read",Ps="afterRead",Is="beforeMain",$s="main",Hs="afterMain",zs="beforeWrite",Bs="write",Ws="afterWrite",ki=[Ms,ks,Ps,Is,$s,Hs,zs,Bs,Ws];function H(r){return r?(r.nodeName||"").toLowerCase():null}function S(r){if(r==null)return window;if(r.toString()!=="[object Window]"){var t=r.ownerDocument;return t&&t.defaultView||window}return r}function Z(r){var t=S(r).Element;return r instanceof t||r instanceof Element}function I(r){var t=S(r).HTMLElement;return r instanceof t||r instanceof HTMLElement}function te(r){if(typeof ShadowRoot=="undefined")return!1;var t=S(r).ShadowRoot;return r instanceof t||r instanceof ShadowRoot}function pn(r){var t=r.state;Object.keys(t.elements).forEach(function(e){var i=t.styles[e]||{},s=t.attributes[e]||{},n=t.elements[e];!I(n)||!H(n)||(Object.assign(n.style,i),Object.keys(s).forEach(function(o){var a=s[o];a===!1?n.removeAttribute(o):n.setAttribute(o,a===!0?"":a)}))})}function mn(r){var t=r.state,e={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,e.popper),t.styles=e,t.elements.arrow&&Object.assign(t.elements.arrow.style,e.arrow),function(){Object.keys(t.elements).forEach(function(i){var s=t.elements[i],n=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:e[i]),a=o.reduce(function(l,d){return l[d]="",l},{});!I(s)||!H(s)||(Object.assign(s.style,a),Object.keys(n).forEach(function(l){s.removeAttribute(l)}))})}}var ee={name:"applyStyles",enabled:!0,phase:"write",fn:pn,effect:mn,requires:["computeStyles"]};function z(r){return r.split("-")[0]}var at=Math.max,It=Math.min,ut=Math.round;function ie(){var r=navigator.userAgentData;return r!=null&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function xe(){return!/^((?!chrome|android).)*safari/i.test(ie())}function tt(r,t,e){t===void 0&&(t=!1),e===void 0&&(e=!1);var i=r.getBoundingClientRect(),s=1,n=1;t&&I(r)&&(s=r.offsetWidth>0&&ut(i.width)/r.offsetWidth||1,n=r.offsetHeight>0&&ut(i.height)/r.offsetHeight||1);var o=Z(r)?S(r):window,a=o.visualViewport,l=!xe()&&e,d=(i.left+(l&&a?a.offsetLeft:0))/s,h=(i.top+(l&&a?a.offsetTop:0))/n,c=i.width/s,f=i.height/n;return{width:c,height:f,top:h,right:d+c,bottom:h+f,left:d,x:d,y:h}}function $t(r){var t=tt(r),e=r.offsetWidth,i=r.offsetHeight;return Math.abs(t.width-e)<=1&&(e=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:r.offsetLeft,y:r.offsetTop,width:e,height:i}}function Se(r,t){var e=t.getRootNode&&t.getRootNode();if(r.contains(t))return!0;if(e&&te(e)){var i=t;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function j(r){return S(r).getComputedStyle(r)}function Pi(r){return["table","td","th"].indexOf(H(r))>=0}function V(r){return((Z(r)?r.ownerDocument:r.document)||window.document).documentElement}function ft(r){return H(r)==="html"?r:r.assignedSlot||r.parentNode||(te(r)?r.host:null)||V(r)}function Vs(r){return!I(r)||j(r).position==="fixed"?null:r.offsetParent}function gn(r){var t=/firefox/i.test(ie()),e=/Trident/i.test(ie());if(e&&I(r)){var i=j(r);if(i.position==="fixed")return null}var s=ft(r);for(te(s)&&(s=s.host);I(s)&&["html","body"].indexOf(H(s))<0;){var n=j(s);if(n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].indexOf(n.willChange)!==-1||t&&n.willChange==="filter"||t&&n.filter&&n.filter!=="none")return s;s=s.parentNode}return null}function lt(r){for(var t=S(r),e=Vs(r);e&&Pi(e)&&j(e).position==="static";)e=Vs(e);return e&&(H(e)==="html"||H(e)==="body"&&j(e).position==="static")?t:e||gn(r)||t}function Ht(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function zt(r,t,e){return at(r,It(t,e))}function Gs(r,t,e){var i=zt(r,t,e);return i>e?e:i}function Ne(){return{top:0,right:0,bottom:0,left:0}}function Oe(r){return Object.assign({},Ne(),r)}function De(r,t){return t.reduce(function(e,i){return e[i]=r,e},{})}var _n=function(t,e){return t=typeof t=="function"?t(Object.assign({},e.rects,{placement:e.placement})):t,Oe(typeof t!="number"?t:De(t,dt))};function vn(r){var t,e=r.state,i=r.name,s=r.options,n=e.elements.arrow,o=e.modifiersData.popperOffsets,a=z(e.placement),l=Ht(a),d=[L,R].indexOf(a)>=0,h=d?"height":"width";if(!(!n||!o)){var c=_n(s.padding,e),f=$t(n),m=l==="y"?O:L,v=l==="y"?k:R,g=e.rects.reference[h]+e.rects.reference[l]-o[l]-e.rects.popper[h],_=o[l]-e.rects.reference[l],w=lt(n),C=w?l==="y"?w.clientHeight||0:w.clientWidth||0:0,N=g/2-_/2,A=c[m],T=C-f[h]-c[v],x=C/2-f[h]/2+N,D=zt(A,x,T),B=l;e.modifiersData[i]=(t={},t[B]=D,t.centerOffset=D-x,t)}}function En(r){var t=r.state,e=r.options,i=e.element,s=i===void 0?"[data-popper-arrow]":i;s!=null&&(typeof s=="string"&&(s=t.elements.popper.querySelector(s),!s)||Se(t.elements.popper,s)&&(t.elements.arrow=s))}var Qe={name:"arrow",enabled:!0,phase:"main",fn:vn,effect:En,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function et(r){return r.split("-")[1]}var yn={top:"auto",right:"auto",bottom:"auto",left:"auto"};function bn(r,t){var e=r.x,i=r.y,s=t.devicePixelRatio||1;return{x:ut(e*s)/s||0,y:ut(i*s)/s||0}}function Us(r){var t,e=r.popper,i=r.popperRect,s=r.placement,n=r.variation,o=r.offsets,a=r.position,l=r.gpuAcceleration,d=r.adaptive,h=r.roundOffsets,c=r.isFixed,f=o.x,m=f===void 0?0:f,v=o.y,g=v===void 0?0:v,_=typeof h=="function"?h({x:m,y:g}):{x:m,y:g};m=_.x,g=_.y;var w=o.hasOwnProperty("x"),C=o.hasOwnProperty("y"),N=L,A=O,T=window;if(d){var x=lt(e),D="clientHeight",B="clientWidth";if(x===S(e)&&(x=V(e),j(x).position!=="static"&&a==="absolute"&&(D="scrollHeight",B="scrollWidth")),x=x,s===O||(s===L||s===R)&&n===yt){A=k;var $=c&&x===T&&T.visualViewport?T.visualViewport.height:x[D];g-=$-i.height,g*=l?1:-1}if(s===L||(s===O||s===k)&&n===yt){N=R;var P=c&&x===T&&T.visualViewport?T.visualViewport.width:x[B];m-=P-i.width,m*=l?1:-1}}var G=Object.assign({position:a},d&&yn),nt=h===!0?bn({x:m,y:g},S(e)):{x:m,y:g};if(m=nt.x,g=nt.y,l){var U;return Object.assign({},G,(U={},U[A]=C?"0":"",U[N]=w?"0":"",U.transform=(T.devicePixelRatio||1)<=1?"translate("+m+"px, "+g+"px)":"translate3d("+m+"px, "+g+"px, 0)",U))}return Object.assign({},G,(t={},t[A]=C?g+"px":"",t[N]=w?m+"px":"",t.transform="",t))}function wn(r){var t=r.state,e=r.options,i=e.gpuAcceleration,s=i===void 0?!0:i,n=e.adaptive,o=n===void 0?!0:n,a=e.roundOffsets,l=a===void 0?!0:a,d={placement:z(t.placement),variation:et(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Us(Object.assign({},d,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Us(Object.assign({},d,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var se={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:wn,data:{}};var Je={passive:!0};function An(r){var t=r.state,e=r.instance,i=r.options,s=i.scroll,n=s===void 0?!0:s,o=i.resize,a=o===void 0?!0:o,l=S(t.elements.popper),d=[].concat(t.scrollParents.reference,t.scrollParents.popper);return n&&d.forEach(function(h){h.addEventListener("scroll",e.update,Je)}),a&&l.addEventListener("resize",e.update,Je),function(){n&&d.forEach(function(h){h.removeEventListener("scroll",e.update,Je)}),a&&l.removeEventListener("resize",e.update,Je)}}var re={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:An,data:{}};var Tn={left:"right",right:"left",bottom:"top",top:"bottom"};function ne(r){return r.replace(/left|right|bottom|top/g,function(t){return Tn[t]})}var Cn={start:"end",end:"start"};function Ze(r){return r.replace(/start|end/g,function(t){return Cn[t]})}function Bt(r){var t=S(r),e=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:e,scrollTop:i}}function Wt(r){return tt(V(r)).left+Bt(r).scrollLeft}function Ii(r,t){var e=S(r),i=V(r),s=e.visualViewport,n=i.clientWidth,o=i.clientHeight,a=0,l=0;if(s){n=s.width,o=s.height;var d=xe();(d||!d&&t==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:n,height:o,x:a+Wt(r),y:l}}function $i(r){var t,e=V(r),i=Bt(r),s=(t=r.ownerDocument)==null?void 0:t.body,n=at(e.scrollWidth,e.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=at(e.scrollHeight,e.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-i.scrollLeft+Wt(r),l=-i.scrollTop;return j(s||e).direction==="rtl"&&(a+=at(e.clientWidth,s?s.clientWidth:0)-n),{width:n,height:o,x:a,y:l}}function Vt(r){var t=j(r),e=t.overflow,i=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(e+s+i)}function ti(r){return["html","body","#document"].indexOf(H(r))>=0?r.ownerDocument.body:I(r)&&Vt(r)?r:ti(ft(r))}function bt(r,t){var e;t===void 0&&(t=[]);var i=ti(r),s=i===((e=r.ownerDocument)==null?void 0:e.body),n=S(i),o=s?[n].concat(n.visualViewport||[],Vt(i)?i:[]):i,a=t.concat(o);return s?a:a.concat(bt(ft(o)))}function oe(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function xn(r,t){var e=tt(r,!1,t==="fixed");return e.top=e.top+r.clientTop,e.left=e.left+r.clientLeft,e.bottom=e.top+r.clientHeight,e.right=e.left+r.clientWidth,e.width=r.clientWidth,e.height=r.clientHeight,e.x=e.left,e.y=e.top,e}function Fs(r,t,e){return t===Te?oe(Ii(r,e)):Z(t)?xn(t,e):oe($i(V(r)))}function Sn(r){var t=bt(ft(r)),e=["absolute","fixed"].indexOf(j(r).position)>=0,i=e&&I(r)?lt(r):r;return Z(i)?t.filter(function(s){return Z(s)&&Se(s,i)&&H(s)!=="body"}):[]}function Hi(r,t,e,i){var s=t==="clippingParents"?Sn(r):[].concat(t),n=[].concat(s,[e]),o=n[0],a=n.reduce(function(l,d){var h=Fs(r,d,i);return l.top=at(h.top,l.top),l.right=It(h.right,l.right),l.bottom=It(h.bottom,l.bottom),l.left=at(h.left,l.left),l},Fs(r,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Le(r){var t=r.reference,e=r.element,i=r.placement,s=i?z(i):null,n=i?et(i):null,o=t.x+t.width/2-e.width/2,a=t.y+t.height/2-e.height/2,l;switch(s){case O:l={x:o,y:t.y-e.height};break;case k:l={x:o,y:t.y+t.height};break;case R:l={x:t.x+t.width,y:a};break;case L:l={x:t.x-e.width,y:a};break;default:l={x:t.x,y:t.y}}var d=s?Ht(s):null;if(d!=null){var h=d==="y"?"height":"width";switch(n){case ht:l[d]=l[d]-(t[h]/2-e[h]/2);break;case yt:l[d]=l[d]+(t[h]/2-e[h]/2);break;default:}}return l}function Y(r,t){t===void 0&&(t={});var e=t,i=e.placement,s=i===void 0?r.placement:i,n=e.strategy,o=n===void 0?r.strategy:n,a=e.boundary,l=a===void 0?Ri:a,d=e.rootBoundary,h=d===void 0?Te:d,c=e.elementContext,f=c===void 0?Pt:c,m=e.altBoundary,v=m===void 0?!1:m,g=e.padding,_=g===void 0?0:g,w=Oe(typeof _!="number"?_:De(_,dt)),C=f===Pt?Mi:Pt,N=r.rects.popper,A=r.elements[v?C:f],T=Hi(Z(A)?A:A.contextElement||V(r.elements.popper),l,h,o),x=tt(r.elements.reference),D=Le({reference:x,element:N,strategy:"absolute",placement:s}),B=oe(Object.assign({},N,D)),$=f===Pt?B:x,P={top:T.top-$.top+w.top,bottom:$.bottom-T.bottom+w.bottom,left:T.left-$.left+w.left,right:$.right-T.right+w.right},G=r.modifiersData.offset;if(f===Pt&&G){var nt=G[s];Object.keys(P).forEach(function(U){var Ot=[R,k].indexOf(U)>=0?1:-1,Dt=[O,k].indexOf(U)>=0?"y":"x";P[U]+=nt[Dt]*Ot})}return P}function zi(r,t){t===void 0&&(t={});var e=t,i=e.placement,s=e.boundary,n=e.rootBoundary,o=e.padding,a=e.flipVariations,l=e.allowedAutoPlacements,d=l===void 0?Ce:l,h=et(i),c=h?a?Xe:Xe.filter(function(v){return et(v)===h}):dt,f=c.filter(function(v){return d.indexOf(v)>=0});f.length===0&&(f=c);var m=f.reduce(function(v,g){return v[g]=Y(r,{placement:g,boundary:s,rootBoundary:n,padding:o})[z(g)],v},{});return Object.keys(m).sort(function(v,g){return m[v]-m[g]})}function Nn(r){if(z(r)===Ae)return[];var t=ne(r);return[Ze(r),t,Ze(t)]}function On(r){var t=r.state,e=r.options,i=r.name;if(!t.modifiersData[i]._skip){for(var s=e.mainAxis,n=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!0:o,l=e.fallbackPlacements,d=e.padding,h=e.boundary,c=e.rootBoundary,f=e.altBoundary,m=e.flipVariations,v=m===void 0?!0:m,g=e.allowedAutoPlacements,_=t.options.placement,w=z(_),C=w===_,N=l||(C||!v?[ne(_)]:Nn(_)),A=[_].concat(N).reduce(function(qt,_t){return qt.concat(z(_t)===Ae?zi(t,{placement:_t,boundary:h,rootBoundary:c,padding:d,flipVariations:v,allowedAutoPlacements:g}):_t)},[]),T=t.rects.reference,x=t.rects.popper,D=new Map,B=!0,$=A[0],P=0;P<A.length;P++){var G=A[P],nt=z(G),U=et(G)===ht,Ot=[O,k].indexOf(nt)>=0,Dt=Ot?"width":"height",X=Y(t,{placement:G,boundary:h,rootBoundary:c,altBoundary:f,padding:d}),ot=Ot?U?R:L:U?k:O;T[Dt]>x[Dt]&&(ot=ne(ot));var We=ne(ot),Lt=[];if(n&&Lt.push(X[nt]<=0),a&&Lt.push(X[ot]<=0,X[We]<=0),Lt.every(function(qt){return qt})){$=G,B=!1;break}D.set(G,Lt)}if(B)for(var Ve=v?3:1,xi=function(_t){var Ee=A.find(function(Ue){var Rt=D.get(Ue);if(Rt)return Rt.slice(0,_t).every(function(Si){return Si})});if(Ee)return $=Ee,"break"},ve=Ve;ve>0;ve--){var Ge=xi(ve);if(Ge==="break")break}t.placement!==$&&(t.modifiersData[i]._skip=!0,t.placement=$,t.reset=!0)}}var ei={name:"flip",enabled:!0,phase:"main",fn:On,requiresIfExists:["offset"],data:{_skip:!1}};function js(r,t,e){return e===void 0&&(e={x:0,y:0}),{top:r.top-t.height-e.y,right:r.right-t.width+e.x,bottom:r.bottom-t.height+e.y,left:r.left-t.width-e.x}}function Ys(r){return[O,R,k,L].some(function(t){return r[t]>=0})}function Dn(r){var t=r.state,e=r.name,i=t.rects.reference,s=t.rects.popper,n=t.modifiersData.preventOverflow,o=Y(t,{elementContext:"reference"}),a=Y(t,{altBoundary:!0}),l=js(o,i),d=js(a,s,n),h=Ys(l),c=Ys(d);t.modifiersData[e]={referenceClippingOffsets:l,popperEscapeOffsets:d,isReferenceHidden:h,hasPopperEscaped:c},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":c})}var ii={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Dn};function Ln(r,t,e){var i=z(r),s=[L,O].indexOf(i)>=0?-1:1,n=typeof e=="function"?e(Object.assign({},t,{placement:r})):e,o=n[0],a=n[1];return o=o||0,a=(a||0)*s,[L,R].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function Rn(r){var t=r.state,e=r.options,i=r.name,s=e.offset,n=s===void 0?[0,0]:s,o=Ce.reduce(function(h,c){return h[c]=Ln(c,t.rects,n),h},{}),a=o[t.placement],l=a.x,d=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=d),t.modifiersData[i]=o}var si={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:Rn};function Mn(r){var t=r.state,e=r.name;t.modifiersData[e]=Le({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var ae={name:"popperOffsets",enabled:!0,phase:"read",fn:Mn,data:{}};function Bi(r){return r==="x"?"y":"x"}function kn(r){var t=r.state,e=r.options,i=r.name,s=e.mainAxis,n=s===void 0?!0:s,o=e.altAxis,a=o===void 0?!1:o,l=e.boundary,d=e.rootBoundary,h=e.altBoundary,c=e.padding,f=e.tether,m=f===void 0?!0:f,v=e.tetherOffset,g=v===void 0?0:v,_=Y(t,{boundary:l,rootBoundary:d,padding:c,altBoundary:h}),w=z(t.placement),C=et(t.placement),N=!C,A=Ht(w),T=Bi(A),x=t.modifiersData.popperOffsets,D=t.rects.reference,B=t.rects.popper,$=typeof g=="function"?g(Object.assign({},t.rects,{placement:t.placement})):g,P=typeof $=="number"?{mainAxis:$,altAxis:$}:Object.assign({mainAxis:0,altAxis:0},$),G=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,nt={x:0,y:0};if(x){if(n){var U,Ot=A==="y"?O:L,Dt=A==="y"?k:R,X=A==="y"?"height":"width",ot=x[A],We=ot+_[Ot],Lt=ot-_[Dt],Ve=m?-B[X]/2:0,xi=C===ht?D[X]:B[X],ve=C===ht?-B[X]:-D[X],Ge=t.elements.arrow,qt=m&&Ge?$t(Ge):{width:0,height:0},_t=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ne(),Ee=_t[Ot],Ue=_t[Dt],Rt=zt(0,D[X],qt[X]),Si=N?D[X]/2-Ve-Rt-Ee-P.mainAxis:xi-Rt-Ee-P.mainAxis,en=N?-D[X]/2+Ve+Rt+Ue+P.mainAxis:ve+Rt+Ue+P.mainAxis,Ni=t.elements.arrow&&lt(t.elements.arrow),sn=Ni?A==="y"?Ni.clientTop||0:Ni.clientLeft||0:0,vs=(U=G==null?void 0:G[A])!=null?U:0,rn=ot+Si-vs-sn,nn=ot+en-vs,Es=zt(m?It(We,rn):We,ot,m?at(Lt,nn):Lt);x[A]=Es,nt[A]=Es-ot}if(a){var ys,on=A==="x"?O:L,an=A==="x"?k:R,Mt=x[T],Fe=T==="y"?"height":"width",bs=Mt+_[on],ws=Mt-_[an],Oi=[O,L].indexOf(w)!==-1,As=(ys=G==null?void 0:G[T])!=null?ys:0,Ts=Oi?bs:Mt-D[Fe]-B[Fe]-As+P.altAxis,Cs=Oi?Mt+D[Fe]+B[Fe]-As-P.altAxis:ws,xs=m&&Oi?Gs(Ts,Mt,Cs):zt(m?Ts:bs,Mt,m?Cs:ws);x[T]=xs,nt[T]=xs-Mt}t.modifiersData[i]=nt}}var ri={name:"preventOverflow",enabled:!0,phase:"main",fn:kn,requiresIfExists:["offset"]};function Wi(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}function Vi(r){return r===S(r)||!I(r)?Bt(r):Wi(r)}function Pn(r){var t=r.getBoundingClientRect(),e=ut(t.width)/r.offsetWidth||1,i=ut(t.height)/r.offsetHeight||1;return e!==1||i!==1}function Gi(r,t,e){e===void 0&&(e=!1);var i=I(t),s=I(t)&&Pn(t),n=V(t),o=tt(r,s,e),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!e)&&((H(t)!=="body"||Vt(n))&&(a=Vi(t)),I(t)?(l=tt(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):n&&(l.x=Wt(n))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function In(r){var t=new Map,e=new Set,i=[];r.forEach(function(n){t.set(n.name,n)});function s(n){e.add(n.name);var o=[].concat(n.requires||[],n.requiresIfExists||[]);o.forEach(function(a){if(!e.has(a)){var l=t.get(a);l&&s(l)}}),i.push(n)}return r.forEach(function(n){e.has(n.name)||s(n)}),i}function Ui(r){var t=In(r);return ki.reduce(function(e,i){return e.concat(t.filter(function(s){return s.phase===i}))},[])}function Fi(r){var t;return function(){return t||(t=new Promise(function(e){Promise.resolve().then(function(){t=void 0,e(r())})})),t}}function ji(r){var t=r.reduce(function(e,i){var s=e[i.name];return e[i.name]=s?Object.assign({},s,i,{options:Object.assign({},s.options,i.options),data:Object.assign({},s.data,i.data)}):i,e},{});return Object.keys(t).map(function(e){return t[e]})}var Ks={placement:"bottom",modifiers:[],strategy:"absolute"};function qs(){for(var r=arguments.length,t=new Array(r),e=0;e<r;e++)t[e]=arguments[e];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Gt(r){r===void 0&&(r={});var t=r,e=t.defaultModifiers,i=e===void 0?[]:e,s=t.defaultOptions,n=s===void 0?Ks:s;return function(a,l,d){d===void 0&&(d=n);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ks,n),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},c=[],f=!1,m={state:h,setOptions:function(w){var C=typeof w=="function"?w(h.options):w;g(),h.options=Object.assign({},n,h.options,C),h.scrollParents={reference:Z(a)?bt(a):a.contextElement?bt(a.contextElement):[],popper:bt(l)};var N=Ui(ji([].concat(i,h.options.modifiers)));return h.orderedModifiers=N.filter(function(A){return A.enabled}),v(),m.update()},forceUpdate:function(){if(!f){var w=h.elements,C=w.reference,N=w.popper;if(qs(C,N)){h.rects={reference:Gi(C,lt(N),h.options.strategy==="fixed"),popper:$t(N)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(P){return h.modifiersData[P.name]=Object.assign({},P.data)});for(var A=0;A<h.orderedModifiers.length;A++){if(h.reset===!0){h.reset=!1,A=-1;continue}var T=h.orderedModifiers[A],x=T.fn,D=T.options,B=D===void 0?{}:D,$=T.name;typeof x=="function"&&(h=x({state:h,options:B,name:$,instance:m})||h)}}}},update:Fi(function(){return new Promise(function(_){m.forceUpdate(),_(h)})}),destroy:function(){g(),f=!0}};if(!qs(a,l))return m;m.setOptions(d).then(function(_){!f&&d.onFirstUpdate&&d.onFirstUpdate(_)});function v(){h.orderedModifiers.forEach(function(_){var w=_.name,C=_.options,N=C===void 0?{}:C,A=_.effect;if(typeof A=="function"){var T=A({state:h,name:w,instance:m,options:N}),x=function(){};c.push(T||x)}})}function g(){c.forEach(function(_){return _()}),c=[]}return m}}var Xs=Gt();var $n=[re,ae,se,ee],Qs=Gt({defaultModifiers:$n});var Hn=[re,ae,se,ee,si,ei,ri,Qe,ii],Re=Gt({defaultModifiers:Hn});var wt=new Map,Yi={set(r,t,e){wt.has(r)||wt.set(r,new Map);let i=wt.get(r);if(!i.has(t)&&i.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`);return}i.set(t,e)},get(r,t){return wt.has(r)&&wt.get(r).get(t)||null},remove(r,t){if(!wt.has(r))return;let e=wt.get(r);e.delete(t),e.size===0&&wt.delete(r)}},zn=1e6,Bn=1e3,ls="transitionend",xr=r=>(r&&window.CSS&&window.CSS.escape&&(r=r.replace(/#([^\s"#']+)/g,(t,e)=>`#${CSS.escape(e)}`)),r),Wn=r=>r==null?`${r}`:Object.prototype.toString.call(r).match(/\s([a-z]+)/i)[1].toLowerCase(),Vn=r=>{do r+=Math.floor(Math.random()*zn);while(document.getElementById(r));return r},Gn=r=>{if(!r)return 0;let{transitionDuration:t,transitionDelay:e}=window.getComputedStyle(r),i=Number.parseFloat(t),s=Number.parseFloat(e);return!i&&!s?0:(t=t.split(",")[0],e=e.split(",")[0],(Number.parseFloat(t)+Number.parseFloat(e))*Bn)},Sr=r=>{r.dispatchEvent(new Event(ls))},pt=r=>!r||typeof r!="object"?!1:(typeof r.jquery!="undefined"&&(r=r[0]),typeof r.nodeType!="undefined"),At=r=>pt(r)?r.jquery?r[0]:r:typeof r=="string"&&r.length>0?document.querySelector(xr(r)):null,ge=r=>{if(!pt(r)||r.getClientRects().length===0)return!1;let t=getComputedStyle(r).getPropertyValue("visibility")==="visible",e=r.closest("details:not([open])");if(!e)return t;if(e!==r){let i=r.closest("summary");if(i&&i.parentNode!==e||i===null)return!1}return t},Tt=r=>!r||r.nodeType!==Node.ELEMENT_NODE||r.classList.contains("disabled")?!0:typeof r.disabled!="undefined"?r.disabled:r.hasAttribute("disabled")&&r.getAttribute("disabled")!=="false",Nr=r=>{if(!document.documentElement.attachShadow)return null;if(typeof r.getRootNode=="function"){let t=r.getRootNode();return t instanceof ShadowRoot?t:null}return r instanceof ShadowRoot?r:r.parentNode?Nr(r.parentNode):null},pi=()=>{},He=r=>{r.offsetHeight},Or=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ki=[],Un=r=>{document.readyState==="loading"?(Ki.length||document.addEventListener("DOMContentLoaded",()=>{for(let t of Ki)t()}),Ki.push(r)):r()},it=()=>document.documentElement.dir==="rtl",rt=r=>{Un(()=>{let t=Or();if(t){let e=r.NAME,i=t.fn[e];t.fn[e]=r.jQueryInterface,t.fn[e].Constructor=r,t.fn[e].noConflict=()=>(t.fn[e]=i,r.jQueryInterface)}})},q=(r,t=[],e=r)=>typeof r=="function"?r(...t):e,Dr=(r,t,e=!0)=>{if(!e){q(r);return}let s=Gn(t)+5,n=!1,o=({target:a})=>{a===t&&(n=!0,t.removeEventListener(ls,o),q(r))};t.addEventListener(ls,o),setTimeout(()=>{n||Sr(t)},s)},fs=(r,t,e,i)=>{let s=r.length,n=r.indexOf(t);return n===-1?!e&&i?r[s-1]:r[0]:(n+=e?1:-1,i&&(n=(n+s)%s),r[Math.max(0,Math.min(n,s-1))])},Fn=/[^.]*(?=\..*)\.|.*/,jn=/\..*/,Yn=/::\d+$/,qi={},Js=1,Lr={mouseenter:"mouseover",mouseleave:"mouseout"},Kn=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Rr(r,t){return t&&`${t}::${Js++}`||r.uidEvent||Js++}function Mr(r){let t=Rr(r);return r.uidEvent=t,qi[t]=qi[t]||{},qi[t]}function qn(r,t){return function e(i){return ps(i,{delegateTarget:r}),e.oneOff&&p.off(r,i.type,t),t.apply(r,[i])}}function Xn(r,t,e){return function i(s){let n=r.querySelectorAll(t);for(let{target:o}=s;o&&o!==this;o=o.parentNode)for(let a of n)if(a===o)return ps(s,{delegateTarget:o}),i.oneOff&&p.off(r,s.type,t,e),e.apply(o,[s])}}function kr(r,t,e=null){return Object.values(r).find(i=>i.callable===t&&i.delegationSelector===e)}function Pr(r,t,e){let i=typeof t=="string",s=i?e:t||e,n=Ir(r);return Kn.has(n)||(n=r),[i,s,n]}function Zs(r,t,e,i,s){if(typeof t!="string"||!r)return;let[n,o,a]=Pr(t,e,i);t in Lr&&(o=(v=>function(g){if(!g.relatedTarget||g.relatedTarget!==g.delegateTarget&&!g.delegateTarget.contains(g.relatedTarget))return v.call(this,g)})(o));let l=Mr(r),d=l[a]||(l[a]={}),h=kr(d,o,n?e:null);if(h){h.oneOff=h.oneOff&&s;return}let c=Rr(o,t.replace(Fn,"")),f=n?Xn(r,e,o):qn(r,o);f.delegationSelector=n?e:null,f.callable=o,f.oneOff=s,f.uidEvent=c,d[c]=f,r.addEventListener(a,f,n)}function hs(r,t,e,i,s){let n=kr(t[e],i,s);n&&(r.removeEventListener(e,n,!!s),delete t[e][n.uidEvent])}function Qn(r,t,e,i){let s=t[e]||{};for(let[n,o]of Object.entries(s))n.includes(i)&&hs(r,t,e,o.callable,o.delegationSelector)}function Ir(r){return r=r.replace(jn,""),Lr[r]||r}var p={on(r,t,e,i){Zs(r,t,e,i,!1)},one(r,t,e,i){Zs(r,t,e,i,!0)},off(r,t,e,i){if(typeof t!="string"||!r)return;let[s,n,o]=Pr(t,e,i),a=o!==t,l=Mr(r),d=l[o]||{},h=t.startsWith(".");if(typeof n!="undefined"){if(!Object.keys(d).length)return;hs(r,l,o,n,s?e:null);return}if(h)for(let c of Object.keys(l))Qn(r,l,c,t.slice(1));for(let[c,f]of Object.entries(d)){let m=c.replace(Yn,"");(!a||t.includes(m))&&hs(r,l,o,f.callable,f.delegationSelector)}},trigger(r,t,e){if(typeof t!="string"||!r)return null;let i=Or(),s=Ir(t),n=t!==s,o=null,a=!0,l=!0,d=!1;n&&i&&(o=i.Event(t,e),i(r).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),d=o.isDefaultPrevented());let h=ps(new Event(t,{bubbles:a,cancelable:!0}),e);return d&&h.preventDefault(),l&&r.dispatchEvent(h),h.defaultPrevented&&o&&o.preventDefault(),h}};function ps(r,t={}){for(let[e,i]of Object.entries(t))try{r[e]=i}catch(s){Object.defineProperty(r,e,{configurable:!0,get(){return i}})}return r}function tr(r){if(r==="true")return!0;if(r==="false")return!1;if(r===Number(r).toString())return Number(r);if(r===""||r==="null")return null;if(typeof r!="string")return r;try{return JSON.parse(decodeURIComponent(r))}catch(t){return r}}function Xi(r){return r.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}var mt={setDataAttribute(r,t,e){r.setAttribute(`data-bs-${Xi(t)}`,e)},removeDataAttribute(r,t){r.removeAttribute(`data-bs-${Xi(t)}`)},getDataAttributes(r){if(!r)return{};let t={},e=Object.keys(r.dataset).filter(i=>i.startsWith("bs")&&!i.startsWith("bsConfig"));for(let i of e){let s=i.replace(/^bs/,"");s=s.charAt(0).toLowerCase()+s.slice(1,s.length),t[s]=tr(r.dataset[i])}return t},getDataAttribute(r,t){return tr(r.getAttribute(`data-bs-${Xi(t)}`))}},jt=class{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){let i=pt(e)?mt.getDataAttribute(e,"config"):{};return y(y(y(y({},this.constructor.Default),typeof i=="object"?i:{}),pt(e)?mt.getDataAttributes(e):{}),typeof t=="object"?t:{})}_typeCheckConfig(t,e=this.constructor.DefaultType){for(let[i,s]of Object.entries(e)){let n=t[i],o=pt(n)?"element":Wn(n);if(!new RegExp(s).test(o))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${o}" but expected type "${s}".`)}}},Jn="5.3.3",Q=class extends jt{constructor(t,e){super(),t=At(t),t&&(this._element=t,this._config=this._getConfig(e),Yi.set(this._element,this.constructor.DATA_KEY,this))}dispose(){Yi.remove(this._element,this.constructor.DATA_KEY),p.off(this._element,this.constructor.EVENT_KEY);for(let t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,i=!0){Dr(t,e,i)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return Yi.get(At(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,typeof e=="object"?e:null)}static get VERSION(){return Jn}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}},Qi=r=>{let t=r.getAttribute("data-bs-target");if(!t||t==="#"){let e=r.getAttribute("href");if(!e||!e.includes("#")&&!e.startsWith("."))return null;e.includes("#")&&!e.startsWith("#")&&(e=`#${e.split("#")[1]}`),t=e&&e!=="#"?e.trim():null}return t?t.split(",").map(e=>xr(e)).join(","):null},b={find(r,t=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(t,r))},findOne(r,t=document.documentElement){return Element.prototype.querySelector.call(t,r)},children(r,t){return[].concat(...r.children).filter(e=>e.matches(t))},parents(r,t){let e=[],i=r.parentNode.closest(t);for(;i;)e.push(i),i=i.parentNode.closest(t);return e},prev(r,t){let e=r.previousElementSibling;for(;e;){if(e.matches(t))return[e];e=e.previousElementSibling}return[]},next(r,t){let e=r.nextElementSibling;for(;e;){if(e.matches(t))return[e];e=e.nextElementSibling}return[]},focusableChildren(r){let t=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(e=>`${e}:not([tabindex^="-"])`).join(",");return this.find(t,r).filter(e=>!Tt(e)&&ge(e))},getSelectorFromElement(r){let t=Qi(r);return t&&b.findOne(t)?t:null},getElementFromSelector(r){let t=Qi(r);return t?b.findOne(t):null},getMultipleElementsFromSelector(r){let t=Qi(r);return t?b.find(t):[]}},Ai=(r,t="hide")=>{let e=`click.dismiss${r.EVENT_KEY}`,i=r.NAME;p.on(document,e,`[data-bs-dismiss="${i}"]`,function(s){if(["A","AREA"].includes(this.tagName)&&s.preventDefault(),Tt(this))return;let n=b.getElementFromSelector(this)||this.closest(`.${i}`);r.getOrCreateInstance(n)[t]()})},Zn="alert",to="bs.alert",$r=`.${to}`,eo=`close${$r}`,io=`closed${$r}`,so="fade",ro="show",mi=class r extends Q{static get NAME(){return Zn}close(){if(p.trigger(this._element,eo).defaultPrevented)return;this._element.classList.remove(ro);let e=this._element.classList.contains(so);this._queueCallback(()=>this._destroyElement(),this._element,e)}_destroyElement(){this._element.remove(),p.trigger(this._element,io),this.dispose()}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};Ai(mi,"close");rt(mi);var no="button",oo="bs.button",ao=`.${oo}`,lo=".data-api",ho="active",er='[data-bs-toggle="button"]',co=`click${ao}${lo}`,gi=class r extends Q{static get NAME(){return no}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(ho))}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this);t==="toggle"&&e[t]()})}};p.on(document,co,er,r=>{r.preventDefault();let t=r.target.closest(er);gi.getOrCreateInstance(t).toggle()});rt(gi);var uo="swipe",_e=".bs.swipe",fo=`touchstart${_e}`,po=`touchmove${_e}`,mo=`touchend${_e}`,go=`pointerdown${_e}`,_o=`pointerup${_e}`,vo="touch",Eo="pen",yo="pointer-event",bo=40,wo={endCallback:null,leftCallback:null,rightCallback:null},Ao={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"},_i=class r extends jt{constructor(t,e){super(),this._element=t,!(!t||!r.isSupported())&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return wo}static get DefaultType(){return Ao}static get NAME(){return uo}dispose(){p.off(this._element,_e)}_start(t){if(!this._supportPointerEvents){this._deltaX=t.touches[0].clientX;return}this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX)}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),q(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){let t=Math.abs(this._deltaX);if(t<=bo)return;let e=t/this._deltaX;this._deltaX=0,e&&q(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(p.on(this._element,go,t=>this._start(t)),p.on(this._element,_o,t=>this._end(t)),this._element.classList.add(yo)):(p.on(this._element,fo,t=>this._start(t)),p.on(this._element,po,t=>this._move(t)),p.on(this._element,mo,t=>this._end(t)))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Eo||t.pointerType===vo)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}},To="carousel",Co="bs.carousel",St=`.${Co}`,Hr=".data-api",xo="ArrowLeft",So="ArrowRight",No=500,Me="next",le="prev",ce="left",ui="right",Oo=`slide${St}`,Ji=`slid${St}`,Do=`keydown${St}`,Lo=`mouseenter${St}`,Ro=`mouseleave${St}`,Mo=`dragstart${St}`,ko=`load${St}${Hr}`,Po=`click${St}${Hr}`,zr="carousel",oi="active",Io="slide",$o="carousel-item-end",Ho="carousel-item-start",zo="carousel-item-next",Bo="carousel-item-prev",Br=".active",Wr=".carousel-item",Wo=Br+Wr,Vo=".carousel-item img",Go=".carousel-indicators",Uo="[data-bs-slide], [data-bs-slide-to]",Fo='[data-bs-ride="carousel"]',jo={[xo]:ui,[So]:ce},Yo={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ko={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"},Pe=class r extends Q{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=b.findOne(Go,this._element),this._addEventListeners(),this._config.ride===zr&&this.cycle()}static get Default(){return Yo}static get DefaultType(){return Ko}static get NAME(){return To}next(){this._slide(Me)}nextWhenVisible(){!document.hidden&&ge(this._element)&&this.next()}prev(){this._slide(le)}pause(){this._isSliding&&Sr(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){p.one(this._element,Ji,()=>this.cycle());return}this.cycle()}}to(t){let e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding){p.one(this._element,Ji,()=>this.to(t));return}let i=this._getItemIndex(this._getActive());if(i===t)return;let s=t>i?Me:le;this._slide(s,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&p.on(this._element,Do,t=>this._keydown(t)),this._config.pause==="hover"&&(p.on(this._element,Lo,()=>this.pause()),p.on(this._element,Ro,()=>this._maybeEnableCycle())),this._config.touch&&_i.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(let i of b.find(Vo,this._element))p.on(i,Mo,s=>s.preventDefault());let e={leftCallback:()=>this._slide(this._directionToOrder(ce)),rightCallback:()=>this._slide(this._directionToOrder(ui)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),No+this._config.interval))}};this._swipeHelper=new _i(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;let e=jo[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;let e=b.findOne(Br,this._indicatorsElement);e.classList.remove(oi),e.removeAttribute("aria-current");let i=b.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);i&&(i.classList.add(oi),i.setAttribute("aria-current","true"))}_updateInterval(){let t=this._activeElement||this._getActive();if(!t)return;let e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;let i=this._getActive(),s=t===Me,n=e||fs(this._getItems(),i,s,this._config.wrap);if(n===i)return;let o=this._getItemIndex(n),a=m=>p.trigger(this._element,m,{relatedTarget:n,direction:this._orderToDirection(t),from:this._getItemIndex(i),to:o});if(a(Oo).defaultPrevented||!i||!n)return;let d=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=n;let h=s?Ho:$o,c=s?zo:Bo;n.classList.add(c),He(n),i.classList.add(h),n.classList.add(h);let f=()=>{n.classList.remove(h,c),n.classList.add(oi),i.classList.remove(oi,c,h),this._isSliding=!1,a(Ji)};this._queueCallback(f,i,this._isAnimated()),d&&this.cycle()}_isAnimated(){return this._element.classList.contains(Io)}_getActive(){return b.findOne(Wo,this._element)}_getItems(){return b.find(Wr,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return it()?t===ce?le:Me:t===ce?Me:le}_orderToDirection(t){return it()?t===le?ce:ui:t===le?ui:ce}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this,t);if(typeof t=="number"){e.to(t);return}if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}};p.on(document,Po,Uo,function(r){let t=b.getElementFromSelector(this);if(!t||!t.classList.contains(zr))return;r.preventDefault();let e=Pe.getOrCreateInstance(t),i=this.getAttribute("data-bs-slide-to");if(i){e.to(i),e._maybeEnableCycle();return}if(mt.getDataAttribute(this,"slide")==="next"){e.next(),e._maybeEnableCycle();return}e.prev(),e._maybeEnableCycle()});p.on(window,ko,()=>{let r=b.find(Fo);for(let t of r)Pe.getOrCreateInstance(t)});rt(Pe);var qo="collapse",Xo="bs.collapse",ze=`.${Xo}`,Qo=".data-api",Jo=`show${ze}`,Zo=`shown${ze}`,ta=`hide${ze}`,ea=`hidden${ze}`,ia=`click${ze}${Qo}`,Zi="show",ue="collapse",ai="collapsing",sa="collapsed",ra=`:scope .${ue} .${ue}`,na="collapse-horizontal",oa="width",aa="height",la=".collapse.show, .collapse.collapsing",cs='[data-bs-toggle="collapse"]',ha={parent:null,toggle:!0},ca={parent:"(null|element)",toggle:"boolean"},vi=class r extends Q{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];let i=b.find(cs);for(let s of i){let n=b.getSelectorFromElement(s),o=b.find(n).filter(a=>a===this._element);n!==null&&o.length&&this._triggerArray.push(s)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return ha}static get DefaultType(){return ca}static get NAME(){return qo}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(la).filter(a=>a!==this._element).map(a=>r.getOrCreateInstance(a,{toggle:!1}))),t.length&&t[0]._isTransitioning||p.trigger(this._element,Jo).defaultPrevented)return;for(let a of t)a.hide();let i=this._getDimension();this._element.classList.remove(ue),this._element.classList.add(ai),this._element.style[i]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;let s=()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(ue,Zi),this._element.style[i]="",p.trigger(this._element,Zo)},o=`scroll${i[0].toUpperCase()+i.slice(1)}`;this._queueCallback(s,this._element,!0),this._element.style[i]=`${this._element[o]}px`}hide(){if(this._isTransitioning||!this._isShown()||p.trigger(this._element,ta).defaultPrevented)return;let e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,He(this._element),this._element.classList.add(ai),this._element.classList.remove(ue,Zi);for(let s of this._triggerArray){let n=b.getElementFromSelector(s);n&&!this._isShown(n)&&this._addAriaAndCollapsedClass([s],!1)}this._isTransitioning=!0;let i=()=>{this._isTransitioning=!1,this._element.classList.remove(ai),this._element.classList.add(ue),p.trigger(this._element,ea)};this._element.style[e]="",this._queueCallback(i,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Zi)}_configAfterMerge(t){return t.toggle=!!t.toggle,t.parent=At(t.parent),t}_getDimension(){return this._element.classList.contains(na)?oa:aa}_initializeChildren(){if(!this._config.parent)return;let t=this._getFirstLevelChildren(cs);for(let e of t){let i=b.getElementFromSelector(e);i&&this._addAriaAndCollapsedClass([e],this._isShown(i))}}_getFirstLevelChildren(t){let e=b.find(ra,this._config.parent);return b.find(t,this._config.parent).filter(i=>!e.includes(i))}_addAriaAndCollapsedClass(t,e){if(t.length)for(let i of t)i.classList.toggle(sa,!e),i.setAttribute("aria-expanded",e)}static jQueryInterface(t){let e={};return typeof t=="string"&&/show|hide/.test(t)&&(e.toggle=!1),this.each(function(){let i=r.getOrCreateInstance(this,e);if(typeof t=="string"){if(typeof i[t]=="undefined")throw new TypeError(`No method named "${t}"`);i[t]()}})}};p.on(document,ia,cs,function(r){(r.target.tagName==="A"||r.delegateTarget&&r.delegateTarget.tagName==="A")&&r.preventDefault();for(let t of b.getMultipleElementsFromSelector(this))vi.getOrCreateInstance(t,{toggle:!1}).toggle()});rt(vi);var ir="dropdown",da="bs.dropdown",Yt=`.${da}`,ms=".data-api",ua="Escape",sr="Tab",fa="ArrowUp",rr="ArrowDown",pa=2,ma=`hide${Yt}`,ga=`hidden${Yt}`,_a=`show${Yt}`,va=`shown${Yt}`,Vr=`click${Yt}${ms}`,Gr=`keydown${Yt}${ms}`,Ea=`keyup${Yt}${ms}`,de="show",ya="dropup",ba="dropend",wa="dropstart",Aa="dropup-center",Ta="dropdown-center",Ut='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ca=`${Ut}.${de}`,fi=".dropdown-menu",xa=".navbar",Sa=".navbar-nav",Na=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Oa=it()?"top-end":"top-start",Da=it()?"top-start":"top-end",La=it()?"bottom-end":"bottom-start",Ra=it()?"bottom-start":"bottom-end",Ma=it()?"left-start":"right-start",ka=it()?"right-start":"left-start",Pa="top",Ia="bottom",$a={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Ha={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"},Ct=class r extends Q{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=b.next(this._element,fi)[0]||b.prev(this._element,fi)[0]||b.findOne(fi,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return $a}static get DefaultType(){return Ha}static get NAME(){return ir}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Tt(this._element)||this._isShown())return;let t={relatedTarget:this._element};if(!p.trigger(this._element,_a,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Sa))for(let i of[].concat(...document.body.children))p.on(i,"mouseover",pi);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(de),this._element.classList.add(de),p.trigger(this._element,va,t)}}hide(){if(Tt(this._element)||!this._isShown())return;let t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!p.trigger(this._element,ma,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(let i of[].concat(...document.body.children))p.off(i,"mouseover",pi);this._popper&&this._popper.destroy(),this._menu.classList.remove(de),this._element.classList.remove(de),this._element.setAttribute("aria-expanded","false"),mt.removeDataAttribute(this._menu,"popper"),p.trigger(this._element,ga,t)}}_getConfig(t){if(t=super._getConfig(t),typeof t.reference=="object"&&!pt(t.reference)&&typeof t.reference.getBoundingClientRect!="function")throw new TypeError(`${ir.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(typeof ni=="undefined")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;this._config.reference==="parent"?t=this._parent:pt(this._config.reference)?t=At(this._config.reference):typeof this._config.reference=="object"&&(t=this._config.reference);let e=this._getPopperConfig();this._popper=Re(t,this._menu,e)}_isShown(){return this._menu.classList.contains(de)}_getPlacement(){let t=this._parent;if(t.classList.contains(ba))return Ma;if(t.classList.contains(wa))return ka;if(t.classList.contains(Aa))return Pa;if(t.classList.contains(Ta))return Ia;let e=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return t.classList.contains(ya)?e?Da:Oa:e?Ra:La}_detectNavbar(){return this._element.closest(xa)!==null}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_getPopperConfig(){let t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(mt.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),y(y({},t),q(this._config.popperConfig,[t]))}_selectMenuItem({key:t,target:e}){let i=b.find(Na,this._menu).filter(s=>ge(s));i.length&&fs(i,e,t===rr,!i.includes(e)).focus()}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]=="undefined")throw new TypeError(`No method named "${t}"`);e[t]()}})}static clearMenus(t){if(t.button===pa||t.type==="keyup"&&t.key!==sr)return;let e=b.find(Ca);for(let i of e){let s=r.getInstance(i);if(!s||s._config.autoClose===!1)continue;let n=t.composedPath(),o=n.includes(s._menu);if(n.includes(s._element)||s._config.autoClose==="inside"&&!o||s._config.autoClose==="outside"&&o||s._menu.contains(t.target)&&(t.type==="keyup"&&t.key===sr||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;let a={relatedTarget:s._element};t.type==="click"&&(a.clickEvent=t),s._completeHide(a)}}static dataApiKeydownHandler(t){let e=/input|textarea/i.test(t.target.tagName),i=t.key===ua,s=[fa,rr].includes(t.key);if(!s&&!i||e&&!i)return;t.preventDefault();let n=this.matches(Ut)?this:b.prev(this,Ut)[0]||b.next(this,Ut)[0]||b.findOne(Ut,t.delegateTarget.parentNode),o=r.getOrCreateInstance(n);if(s){t.stopPropagation(),o.show(),o._selectMenuItem(t);return}o._isShown()&&(t.stopPropagation(),o.hide(),n.focus())}};p.on(document,Gr,Ut,Ct.dataApiKeydownHandler);p.on(document,Gr,fi,Ct.dataApiKeydownHandler);p.on(document,Vr,Ct.clearMenus);p.on(document,Ea,Ct.clearMenus);p.on(document,Vr,Ut,function(r){r.preventDefault(),Ct.getOrCreateInstance(this).toggle()});rt(Ct);var Ur="backdrop",za="fade",nr="show",or=`mousedown.bs.${Ur}`,Ba={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Wa={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"},Ei=class extends jt{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Ba}static get DefaultType(){return Wa}static get NAME(){return Ur}show(t){if(!this._config.isVisible){q(t);return}this._append();let e=this._getElement();this._config.isAnimated&&He(e),e.classList.add(nr),this._emulateAnimation(()=>{q(t)})}hide(t){if(!this._config.isVisible){q(t);return}this._getElement().classList.remove(nr),this._emulateAnimation(()=>{this.dispose(),q(t)})}dispose(){this._isAppended&&(p.off(this._element,or),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){let t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(za),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=At(t.rootElement),t}_append(){if(this._isAppended)return;let t=this._getElement();this._config.rootElement.append(t),p.on(t,or,()=>{q(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(t){Dr(t,this._getElement(),this._config.isAnimated)}},Va="focustrap",Ga="bs.focustrap",yi=`.${Ga}`,Ua=`focusin${yi}`,Fa=`keydown.tab${yi}`,ja="Tab",Ya="forward",ar="backward",Ka={autofocus:!0,trapElement:null},qa={autofocus:"boolean",trapElement:"element"},bi=class extends jt{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Ka}static get DefaultType(){return qa}static get NAME(){return Va}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),p.off(document,yi),p.on(document,Ua,t=>this._handleFocusin(t)),p.on(document,Fa,t=>this._handleKeydown(t)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,p.off(document,yi))}_handleFocusin(t){let{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;let i=b.focusableChildren(e);i.length===0?e.focus():this._lastTabNavDirection===ar?i[i.length-1].focus():i[0].focus()}_handleKeydown(t){t.key===ja&&(this._lastTabNavDirection=t.shiftKey?ar:Ya)}},lr=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",hr=".sticky-top",li="padding-right",cr="margin-right",Ie=class{constructor(){this._element=document.body}getWidth(){let t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){let t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,li,e=>e+t),this._setElementAttributes(lr,li,e=>e+t),this._setElementAttributes(hr,cr,e=>e-t)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,li),this._resetElementAttributes(lr,li),this._resetElementAttributes(hr,cr)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,i){let s=this.getWidth(),n=o=>{if(o!==this._element&&window.innerWidth>o.clientWidth+s)return;this._saveInitialAttribute(o,e);let a=window.getComputedStyle(o).getPropertyValue(e);o.style.setProperty(e,`${i(Number.parseFloat(a))}px`)};this._applyManipulationCallback(t,n)}_saveInitialAttribute(t,e){let i=t.style.getPropertyValue(e);i&&mt.setDataAttribute(t,e,i)}_resetElementAttributes(t,e){let i=s=>{let n=mt.getDataAttribute(s,e);if(n===null){s.style.removeProperty(e);return}mt.removeDataAttribute(s,e),s.style.setProperty(e,n)};this._applyManipulationCallback(t,i)}_applyManipulationCallback(t,e){if(pt(t)){e(t);return}for(let i of b.find(t,this._element))e(i)}},Xa="modal",Qa="bs.modal",st=`.${Qa}`,Ja=".data-api",Za="Escape",tl=`hide${st}`,el=`hidePrevented${st}`,Fr=`hidden${st}`,jr=`show${st}`,il=`shown${st}`,sl=`resize${st}`,rl=`click.dismiss${st}`,nl=`mousedown.dismiss${st}`,ol=`keydown.dismiss${st}`,al=`click${st}${Ja}`,dr="modal-open",ll="fade",ur="show",ts="modal-static",hl=".modal.show",cl=".modal-dialog",dl=".modal-body",ul='[data-bs-toggle="modal"]',fl={backdrop:!0,focus:!0,keyboard:!0},pl={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"},fe=class r extends Q{constructor(t,e){super(t,e),this._dialog=b.findOne(cl,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Ie,this._addEventListeners()}static get Default(){return fl}static get DefaultType(){return pl}static get NAME(){return Xa}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||p.trigger(this._element,jr,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(dr),this._adjustDialog(),this._backdrop.show(()=>this._showElement(t)))}hide(){!this._isShown||this._isTransitioning||p.trigger(this._element,tl).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(ur),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){p.off(window,st),p.off(this._dialog,st),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Ei({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new bi({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;let e=b.findOne(dl,this._dialog);e&&(e.scrollTop=0),He(this._element),this._element.classList.add(ur);let i=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,p.trigger(this._element,il,{relatedTarget:t})};this._queueCallback(i,this._dialog,this._isAnimated())}_addEventListeners(){p.on(this._element,ol,t=>{if(t.key===Za){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),p.on(window,sl,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),p.on(this._element,nl,t=>{p.one(this._element,rl,e=>{if(!(this._element!==t.target||this._element!==e.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(dr),this._resetAdjustments(),this._scrollBar.reset(),p.trigger(this._element,Fr)})}_isAnimated(){return this._element.classList.contains(ll)}_triggerBackdropTransition(){if(p.trigger(this._element,el).defaultPrevented)return;let e=this._element.scrollHeight>document.documentElement.clientHeight,i=this._element.style.overflowY;i==="hidden"||this._element.classList.contains(ts)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(ts),this._queueCallback(()=>{this._element.classList.remove(ts),this._queueCallback(()=>{this._element.style.overflowY=i},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){let t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),i=e>0;if(i&&!t){let s=it()?"paddingLeft":"paddingRight";this._element.style[s]=`${e}px`}if(!i&&t){let s=it()?"paddingRight":"paddingLeft";this._element.style[s]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each(function(){let i=r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof i[t]=="undefined")throw new TypeError(`No method named "${t}"`);i[t](e)}})}};p.on(document,al,ul,function(r){let t=b.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&r.preventDefault(),p.one(t,jr,s=>{s.defaultPrevented||p.one(t,Fr,()=>{ge(this)&&this.focus()})});let e=b.findOne(hl);e&&fe.getInstance(e).hide(),fe.getOrCreateInstance(t).toggle(this)});Ai(fe);rt(fe);var ml="offcanvas",gl="bs.offcanvas",gt=`.${gl}`,Yr=".data-api",_l=`load${gt}${Yr}`,vl="Escape",fr="show",pr="showing",mr="hiding",El="offcanvas-backdrop",Kr=".offcanvas.show",yl=`show${gt}`,bl=`shown${gt}`,wl=`hide${gt}`,gr=`hidePrevented${gt}`,qr=`hidden${gt}`,Al=`resize${gt}`,Tl=`click${gt}${Yr}`,Cl=`keydown.dismiss${gt}`,xl='[data-bs-toggle="offcanvas"]',Sl={backdrop:!0,keyboard:!0,scroll:!1},Nl={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"},xt=class r extends Q{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Sl}static get DefaultType(){return Nl}static get NAME(){return ml}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||p.trigger(this._element,yl,{relatedTarget:t}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Ie().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(pr);let i=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(fr),this._element.classList.remove(pr),p.trigger(this._element,bl,{relatedTarget:t})};this._queueCallback(i,this._element,!0)}hide(){if(!this._isShown||p.trigger(this._element,wl).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(mr),this._backdrop.hide();let e=()=>{this._element.classList.remove(fr,mr),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Ie().reset(),p.trigger(this._element,qr)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){let t=()=>{if(this._config.backdrop==="static"){p.trigger(this._element,gr);return}this.hide()},e=!!this._config.backdrop;return new Ei({className:El,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new bi({trapElement:this._element})}_addEventListeners(){p.on(this._element,Cl,t=>{if(t.key===vl){if(this._config.keyboard){this.hide();return}p.trigger(this._element,gr)}})}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};p.on(document,Tl,xl,function(r){let t=b.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&r.preventDefault(),Tt(this))return;p.one(t,qr,()=>{ge(this)&&this.focus()});let e=b.findOne(Kr);e&&e!==t&&xt.getInstance(e).hide(),xt.getOrCreateInstance(t).toggle(this)});p.on(window,_l,()=>{for(let r of b.find(Kr))xt.getOrCreateInstance(r).show()});p.on(window,Al,()=>{for(let r of b.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(r).position!=="fixed"&&xt.getOrCreateInstance(r).hide()});Ai(xt);rt(xt);var Ol=/^aria-[\w-]*$/i,Xr={"*":["class","dir","id","lang","role",Ol],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Dl=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Ll=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Rl=(r,t)=>{let e=r.nodeName.toLowerCase();return t.includes(e)?Dl.has(e)?!!Ll.test(r.nodeValue):!0:t.filter(i=>i instanceof RegExp).some(i=>i.test(e))};function Ml(r,t,e){if(!r.length)return r;if(e&&typeof e=="function")return e(r);let s=new window.DOMParser().parseFromString(r,"text/html"),n=[].concat(...s.body.querySelectorAll("*"));for(let o of n){let a=o.nodeName.toLowerCase();if(!Object.keys(t).includes(a)){o.remove();continue}let l=[].concat(...o.attributes),d=[].concat(t["*"]||[],t[a]||[]);for(let h of l)Rl(h,d)||o.removeAttribute(h.nodeName)}return s.body.innerHTML}var kl="TemplateFactory",Pl={allowList:Xr,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Il={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},$l={entry:"(string|element|function|null)",selector:"(string|element)"},ds=class extends jt{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return Pl}static get DefaultType(){return Il}static get NAME(){return kl}getContent(){return Object.values(this._config.content).map(t=>this._resolvePossibleFunction(t)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content=y(y({},this._config.content),t),this}toHtml(){let t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(let[s,n]of Object.entries(this._config.content))this._setContent(t,n,s);let e=t.children[0],i=this._resolvePossibleFunction(this._config.extraClass);return i&&e.classList.add(...i.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(let[e,i]of Object.entries(t))super._typeCheckConfig({selector:e,entry:i},$l)}_setContent(t,e,i){let s=b.findOne(i,t);if(s){if(e=this._resolvePossibleFunction(e),!e){s.remove();return}if(pt(e)){this._putElementInTemplate(At(e),s);return}if(this._config.html){s.innerHTML=this._maybeSanitize(e);return}s.textContent=e}}_maybeSanitize(t){return this._config.sanitize?Ml(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return q(t,[this])}_putElementInTemplate(t,e){if(this._config.html){e.innerHTML="",e.append(t);return}e.textContent=t.textContent}},Hl="tooltip",zl=new Set(["sanitize","allowList","sanitizeFn"]),es="fade",Bl="modal",hi="show",Wl=".tooltip-inner",_r=`.${Bl}`,vr="hide.bs.modal",ke="hover",is="focus",Vl="click",Gl="manual",Ul="hide",Fl="hidden",jl="show",Yl="shown",Kl="inserted",ql="click",Xl="focusin",Ql="focusout",Jl="mouseenter",Zl="mouseleave",th={AUTO:"auto",TOP:"top",RIGHT:it()?"left":"right",BOTTOM:"bottom",LEFT:it()?"right":"left"},eh={allowList:Xr,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ih={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"},pe=class r extends Q{constructor(t,e){if(typeof ni=="undefined")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return eh}static get DefaultType(){return ih}static get NAME(){return Hl}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),p.off(this._element.closest(_r),vr,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;let t=p.trigger(this._element,this.constructor.eventName(jl)),i=(Nr(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!i)return;this._disposePopper();let s=this._getTipElement();this._element.setAttribute("aria-describedby",s.getAttribute("id"));let{container:n}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(n.append(s),p.trigger(this._element,this.constructor.eventName(Kl))),this._popper=this._createPopper(s),s.classList.add(hi),"ontouchstart"in document.documentElement)for(let a of[].concat(...document.body.children))p.on(a,"mouseover",pi);let o=()=>{p.trigger(this._element,this.constructor.eventName(Yl)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(o,this.tip,this._isAnimated())}hide(){if(!this._isShown()||p.trigger(this._element,this.constructor.eventName(Ul)).defaultPrevented)return;if(this._getTipElement().classList.remove(hi),"ontouchstart"in document.documentElement)for(let s of[].concat(...document.body.children))p.off(s,"mouseover",pi);this._activeTrigger[Vl]=!1,this._activeTrigger[is]=!1,this._activeTrigger[ke]=!1,this._isHovered=null;let i=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),p.trigger(this._element,this.constructor.eventName(Fl)))};this._queueCallback(i,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){let e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(es,hi),e.classList.add(`bs-${this.constructor.NAME}-auto`);let i=Vn(this.constructor.NAME).toString();return e.setAttribute("id",i),this._isAnimated()&&e.classList.add(es),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ds(M(y({},this._config),{content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)})),this._templateFactory}_getContentForTemplate(){return{[Wl]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(es)}_isShown(){return this.tip&&this.tip.classList.contains(hi)}_createPopper(t){let e=q(this._config.placement,[this,t,this._element]),i=th[e.toUpperCase()];return Re(this._element,t,this._getPopperConfig(i))}_getOffset(){let{offset:t}=this._config;return typeof t=="string"?t.split(",").map(e=>Number.parseInt(e,10)):typeof t=="function"?e=>t(e,this._element):t}_resolvePossibleFunction(t){return q(t,[this._element])}_getPopperConfig(t){let e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:i=>{this._getTipElement().setAttribute("data-popper-placement",i.state.placement)}}]};return y(y({},e),q(this._config.popperConfig,[e]))}_setListeners(){let t=this._config.trigger.split(" ");for(let e of t)if(e==="click")p.on(this._element,this.constructor.eventName(ql),this._config.selector,i=>{this._initializeOnDelegatedTarget(i).toggle()});else if(e!==Gl){let i=e===ke?this.constructor.eventName(Jl):this.constructor.eventName(Xl),s=e===ke?this.constructor.eventName(Zl):this.constructor.eventName(Ql);p.on(this._element,i,this._config.selector,n=>{let o=this._initializeOnDelegatedTarget(n);o._activeTrigger[n.type==="focusin"?is:ke]=!0,o._enter()}),p.on(this._element,s,this._config.selector,n=>{let o=this._initializeOnDelegatedTarget(n);o._activeTrigger[n.type==="focusout"?is:ke]=o._element.contains(n.relatedTarget),o._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},p.on(this._element.closest(_r),vr,this._hideModalHandler)}_fixTitle(){let t=this._element.getAttribute("title");t&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){let e=mt.getDataAttributes(this._element);for(let i of Object.keys(e))zl.has(i)&&delete e[i];return t=y(y({},e),typeof t=="object"&&t?t:{}),t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=t.container===!1?document.body:At(t.container),typeof t.delay=="number"&&(t.delay={show:t.delay,hide:t.delay}),typeof t.title=="number"&&(t.title=t.title.toString()),typeof t.content=="number"&&(t.content=t.content.toString()),t}_getDelegateConfig(){let t={};for(let[e,i]of Object.entries(this._config))this.constructor.Default[e]!==i&&(t[e]=i);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]=="undefined")throw new TypeError(`No method named "${t}"`);e[t]()}})}};rt(pe);var sh="popover",rh=".popover-header",nh=".popover-body",oh=M(y({},pe.Default),{content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"}),ah=M(y({},pe.DefaultType),{content:"(null|string|element|function)"}),us=class r extends pe{static get Default(){return oh}static get DefaultType(){return ah}static get NAME(){return sh}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[rh]:this._getTitle(),[nh]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]=="undefined")throw new TypeError(`No method named "${t}"`);e[t]()}})}};rt(us);var lh="scrollspy",hh="bs.scrollspy",gs=`.${hh}`,ch=".data-api",dh=`activate${gs}`,Er=`click${gs}`,uh=`load${gs}${ch}`,fh="dropdown-item",he="active",ph='[data-bs-spy="scroll"]',ss="[href]",mh=".nav, .list-group",yr=".nav-link",gh=".nav-item",_h=".list-group-item",vh=`${yr}, ${gh} > ${yr}, ${_h}`,Eh=".dropdown",yh=".dropdown-toggle",bh={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},wh={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"},wi=class r extends Q{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return bh}static get DefaultType(){return wh}static get NAME(){return lh}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(let t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=At(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,typeof t.threshold=="string"&&(t.threshold=t.threshold.split(",").map(e=>Number.parseFloat(e))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(p.off(this._config.target,Er),p.on(this._config.target,Er,ss,t=>{let e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();let i=this._rootElement||window,s=e.offsetTop-this._element.offsetTop;if(i.scrollTo){i.scrollTo({top:s,behavior:"smooth"});return}i.scrollTop=s}}))}_getNewObserver(){let t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(e=>this._observerCallback(e),t)}_observerCallback(t){let e=o=>this._targetLinks.get(`#${o.target.id}`),i=o=>{this._previousScrollData.visibleEntryTop=o.target.offsetTop,this._process(e(o))},s=(this._rootElement||document.documentElement).scrollTop,n=s>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=s;for(let o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}let a=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(n&&a){if(i(o),!s)return;continue}!n&&!a&&i(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;let t=b.find(ss,this._config.target);for(let e of t){if(!e.hash||Tt(e))continue;let i=b.findOne(decodeURI(e.hash),this._element);ge(i)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,i))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(he),this._activateParents(t),p.trigger(this._element,dh,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(fh)){b.findOne(yh,t.closest(Eh)).classList.add(he);return}for(let e of b.parents(t,mh))for(let i of b.prev(e,vh))i.classList.add(he)}_clearActiveClass(t){t.classList.remove(he);let e=b.find(`${ss}.${he}`,t);for(let i of e)i.classList.remove(he)}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this,t);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}};p.on(window,uh,()=>{for(let r of b.find(ph))wi.getOrCreateInstance(r)});rt(wi);var Ah="tab",Th="bs.tab",Kt=`.${Th}`,Ch=`hide${Kt}`,xh=`hidden${Kt}`,Sh=`show${Kt}`,Nh=`shown${Kt}`,Oh=`click${Kt}`,Dh=`keydown${Kt}`,Lh=`load${Kt}`,Rh="ArrowLeft",br="ArrowRight",Mh="ArrowUp",wr="ArrowDown",rs="Home",Ar="End",Ft="active",Tr="fade",ns="show",kh="dropdown",Qr=".dropdown-toggle",Ph=".dropdown-menu",os=`:not(${Qr})`,Ih='.list-group, .nav, [role="tablist"]',$h=".nav-item, .list-group-item",Hh=`.nav-link${os}, .list-group-item${os}, [role="tab"]${os}`,Jr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',as=`${Hh}, ${Jr}`,zh=`.${Ft}[data-bs-toggle="tab"], .${Ft}[data-bs-toggle="pill"], .${Ft}[data-bs-toggle="list"]`,$e=class r extends Q{constructor(t){super(t),this._parent=this._element.closest(Ih),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),p.on(this._element,Dh,e=>this._keydown(e)))}static get NAME(){return Ah}show(){let t=this._element;if(this._elemIsActive(t))return;let e=this._getActiveElem(),i=e?p.trigger(e,Ch,{relatedTarget:t}):null;p.trigger(t,Sh,{relatedTarget:e}).defaultPrevented||i&&i.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Ft),this._activate(b.getElementFromSelector(t));let i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.add(ns);return}t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),p.trigger(t,Nh,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(Tr))}_deactivate(t,e){if(!t)return;t.classList.remove(Ft),t.blur(),this._deactivate(b.getElementFromSelector(t));let i=()=>{if(t.getAttribute("role")!=="tab"){t.classList.remove(ns);return}t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),p.trigger(t,xh,{relatedTarget:e})};this._queueCallback(i,t,t.classList.contains(Tr))}_keydown(t){if(![Rh,br,Mh,wr,rs,Ar].includes(t.key))return;t.stopPropagation(),t.preventDefault();let e=this._getChildren().filter(s=>!Tt(s)),i;if([rs,Ar].includes(t.key))i=e[t.key===rs?0:e.length-1];else{let s=[br,wr].includes(t.key);i=fs(e,t.target,s,!0)}i&&(i.focus({preventScroll:!0}),r.getOrCreateInstance(i).show())}_getChildren(){return b.find(as,this._parent)}_getActiveElem(){return this._getChildren().find(t=>this._elemIsActive(t))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(let i of e)this._setInitialAttributesOnChild(i)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);let e=this._elemIsActive(t),i=this._getOuterElement(t);t.setAttribute("aria-selected",e),i!==t&&this._setAttributeIfNotExists(i,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){let e=b.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){let i=this._getOuterElement(t);if(!i.classList.contains(kh))return;let s=(n,o)=>{let a=b.findOne(n,i);a&&a.classList.toggle(o,e)};s(Qr,Ft),s(Ph,ns),i.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,i){t.hasAttribute(e)||t.setAttribute(e,i)}_elemIsActive(t){return t.classList.contains(Ft)}_getInnerElement(t){return t.matches(as)?t:b.findOne(as,t)}_getOuterElement(t){return t.closest($h)||t}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this);if(typeof t=="string"){if(e[t]===void 0||t.startsWith("_")||t==="constructor")throw new TypeError(`No method named "${t}"`);e[t]()}})}};p.on(document,Oh,Jr,function(r){["A","AREA"].includes(this.tagName)&&r.preventDefault(),!Tt(this)&&$e.getOrCreateInstance(this).show()});p.on(window,Lh,()=>{for(let r of b.find(zh))$e.getOrCreateInstance(r)});rt($e);var Bh="toast",Wh="bs.toast",Nt=`.${Wh}`,Vh=`mouseover${Nt}`,Gh=`mouseout${Nt}`,Uh=`focusin${Nt}`,Fh=`focusout${Nt}`,jh=`hide${Nt}`,Yh=`hidden${Nt}`,Kh=`show${Nt}`,qh=`shown${Nt}`,Xh="fade",Cr="hide",ci="show",di="showing",Qh={animation:"boolean",autohide:"boolean",delay:"number"},Jh={animation:!0,autohide:!0,delay:5e3},me=class r extends Q{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return Jh}static get DefaultType(){return Qh}static get NAME(){return Bh}show(){if(p.trigger(this._element,Kh).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Xh);let e=()=>{this._element.classList.remove(di),p.trigger(this._element,qh),this._maybeScheduleHide()};this._element.classList.remove(Cr),He(this._element),this._element.classList.add(ci,di),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown()||p.trigger(this._element,jh).defaultPrevented)return;let e=()=>{this._element.classList.add(Cr),this._element.classList.remove(di,ci),p.trigger(this._element,Yh)};this._element.classList.add(di),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ci),super.dispose()}isShown(){return this._element.classList.contains(ci)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=e;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=e;break}}if(e){this._clearTimeout();return}let i=t.relatedTarget;this._element===i||this._element.contains(i)||this._maybeScheduleHide()}_setListeners(){p.on(this._element,Vh,t=>this._onInteraction(t,!0)),p.on(this._element,Gh,t=>this._onInteraction(t,!1)),p.on(this._element,Uh,t=>this._onInteraction(t,!0)),p.on(this._element,Fh,t=>this._onInteraction(t,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each(function(){let e=r.getOrCreateInstance(this,t);if(typeof t=="string"){if(typeof e[t]=="undefined")throw new TypeError(`No method named "${t}"`);e[t](this)}})}};Ai(me);rt(me);var Ti=!1,Be=[],ct=[];function Zr(r,t,e,i){let s="mdi-alert";switch(r){case"warning":s="mdi-alert";break;case"success":s="mdi-check-circle";break;case"info":s="mdi-information";break;case"danger":s="mdi-alert";break}let n=document.createElement("div");n.setAttribute("class","toast-container position-fixed bottom-0 end-0 m-3");let o=document.createElement("div");o.setAttribute("class","toast"),o.setAttribute("role","alert"),o.setAttribute("aria-live","assertive"),o.setAttribute("aria-atomic","true");let a=document.createElement("div");a.setAttribute("class",`toast-header bg-${r} text-dark`);let l=document.createElement("i");l.setAttribute("class",`mdi ${s}`);let d=document.createElement("strong");d.setAttribute("class","me-auto ms-1"),d.innerText=t;let h=document.createElement("button");h.setAttribute("type","button"),h.setAttribute("class","btn-close"),h.setAttribute("data-bs-dismiss","toast"),h.setAttribute("aria-label","Close");let c=document.createElement("div");if(c.setAttribute("class","toast-body text-dark"),c.innerText=e.trim(),a.appendChild(l),a.appendChild(d),typeof i!="undefined"){let m=document.createElement("small");m.setAttribute("class","text-dark"),m.innerText=i,a.appendChild(m)}return a.appendChild(h),o.appendChild(a),o.appendChild(c),n.appendChild(o),document.body.appendChild(n),new me(o)}function Ci(r){r.forEach(function(t,e){var i=t.getGridItems();Be[e]={},i.forEach(function(s){Be[e][s.gridstackNode.id]=s})})}function tn(r){var t=r.gridstackNode.grid.el.getAttribute("data-grid-id");return t==="2"?!0:r.getAttribute("data-full-depth")==="False"}function Zh(r){return!0}function _s(r,t){return Et.init(options={cellHeight:11,margin:0,marginBottom:1,float:!0,disableOneColumnMode:!0,animate:!0,removeTimeout:100,disableResize:!0,acceptWidgets:t},r)}function tc(r,t){Ci(ct);var e={};Be.forEach((i,s)=>{let n=[];for(let o in i){let a=i[o];if(a.getAttribute("data-item-face")!=="back"){let l=parseInt(a.getAttribute("gs-y"))/2,d=parseInt(a.getAttribute("gs-h"))/2,h=a.gridstackNode.grid.el.getAttribute("gs-max-row")/2,c;t?c=l+1:c=d>1?h-l-d+1:h-l,a.getAttribute("data-item-face")=="none"&&(c=null),n.push({id:parseInt(a.getAttribute("gs-id")),x:parseInt(a.getAttribute("gs-x")),y:c,is_full_depth:a.getAttribute("data-full-depth"),face:a.getAttribute("data-item-face")})}}names={0:"front",1:"rear",2:"other"},e[names[s]]=n,e.rack_id=r});try{fetch("/"+basePath+"api/plugins/reorder/save/"+r+"/",{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":netbox_csrf_token},body:JSON.stringify(e)}).then(s=>{if(s.ok){Ti=!1;var n=document.getElementById("saveButton");n.setAttribute("disabled","disabled"),s.json().then(o=>{console.log(o)}),window.location.href=returnUrl}else s.status===304?(console.warn("No changes detected."),Zr("warning","Info","No changes were detected.","The data has not been modified.").show()):s.json().then(o=>{console.error("Error:",o),Zr("danger","Error",o.error,o.message).show()})})}catch(i){console.error("Error:",i)}}var ec=_s("#grid-front",tn),ic=_s("#grid-rear",tn),sc=_s("#grid-other",Zh);ct=[ec,ic,sc];Ci(ct);ct.forEach(function(r,t){r.on("change",function(e,i){Ti=!0;var s=document.getElementById("saveButton");s.removeAttribute("disabled"),i.forEach(function(n){var o=t===0?1:0,a=Be[o];if(a&&a[n.id]){var l=a[n.id],d=ct[o];d.update(l,{x:n.x,y:n.y})}})}),r.on("dropped",function(e,i,s){Ti=!0;var n=document.getElementById("saveButton");n.removeAttribute("disabled");var o=ct.indexOf(i.grid);if(t===0?s.el.setAttribute("data-item-face","front"):t===1&&s.el.setAttribute("data-item-face","rear"),o===2){var a=t===0?1:0,l=ct[a];if(l&&s.el.getAttribute("data-full-depth")==="True"){var d=s.el.cloneNode(!0),h=d.querySelector(".grid-stack-item-content");h.removeAttribute("style"),h.classList.add("device_rear"),d.setAttribute("data-item-face","back"),l.addWidget(d)}Ci(ct)}else if((o===0||o===1)&&t===2){if(s.el.getAttribute("data-full-depth")==="True"){var d=s.el.querySelector(".grid-stack-item-content");d.removeAttribute("style"),d.classList.remove("device_rear"),d.setAttribute("data-item-face","front");var c=s.el.getAttribute("data-item-color"),f=s.el.getAttribute("data-item-text-color");d.style="background-color: #"+c+"; color: #"+f+";";var a=o===0?1:0,l=ct[a],m=Be[a][i.el.getAttribute("gs-id")];l.removeWidget(m)}Ci(ct)}})});var rc=document.getElementById("saveButton");rc.addEventListener("click",function(r){tc(rackId,descUnits)});window.addEventListener("beforeunload",function(r){Ti&&(r.returnValue="Are you sure you want to leave? Changes you made may not be saved.")});document.getElementById("view-selector").addEventListener("change",function(){var r=this.value,t=window.location.href.split("?")[0],e=t+"?view="+r;window.location.href=e});})();
/*! Bundled license information:

gridstack/dist/gridstack.js:
  (*!
   * GridStack 10.1.2
   * https://gridstackjs.com/
   *
   * Copyright (c) 2021-2022 Alain Dumesny
   * see root license https://github.com/gridstack/gridstack.js/tree/master/LICENSE
   *)

bootstrap/dist/js/bootstrap.esm.js:
  (*!
    * Bootstrap v5.3.3 (https://getbootstrap.com/)
    * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
    * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
    *)
*/
