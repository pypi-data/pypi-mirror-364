import streamlit as st
from streamlit_crepe import st_milkdown

st.title("üß™ –¢–µ—Å—Ç —Ä–µ–∂–∏–º–æ–≤ Placeholder")

st.markdown("""
–¢–µ—Å—Ç–∏—Ä—É–µ–º —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã –¥–ª—è placeholder –≤ Milkdown Crepe.
–ò–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–∑–≤–µ—Å—Ç–µ–Ω —Ç–æ–ª—å–∫–æ —Ä–µ–∂–∏–º `'block'`, –Ω–æ –ø–æ–ø—Ä–æ–±—É–µ–º –¥—Ä—É–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã.
""")

# –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–µ–∂–∏–º–∞–º–∏
modes_to_test = [
    ('block', '–ë–ª–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏)'),
    ('inline', '–ò–Ω–ª–∞–π–Ω —Ä–µ–∂–∏–º (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ)'),
    ('text', '–¢–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ)'),
    ('paragraph', '–ü–∞—Ä–∞–≥—Ä–∞—Ñ —Ä–µ–∂–∏–º (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ)'),
    ('line', '–°—Ç—Ä–æ—á–Ω—ã–π —Ä–µ–∂–∏–º (–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ)'),
]

st.subheader("–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∂–∏–º–æ–≤ placeholder")

for mode, description in modes_to_test:
    with st.expander(f"–†–µ–∂–∏–º: {mode} - {description}"):
        st.markdown(f"**–†–µ–∂–∏–º:** `mode: '{mode}'`")
        
        try:
            # –°–æ–∑–¥–∞–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å –∫–∞—Å—Ç–æ–º–Ω—ã–º —Ä–µ–∂–∏–º–æ–º
            # –ü–æ—Å–∫–æ–ª—å–∫—É –º—ã –Ω–µ –º–æ–∂–µ–º –Ω–∞–ø—Ä—è–º—É—é –ø–µ—Ä–µ–¥–∞—Ç—å mode —á–µ—Ä–µ–∑ API,
            # –ø–æ–∫–∞–∂–µ–º –∫–∞–∫ —ç—Ç–æ –¥–æ–ª–∂–Ω–æ –≤—ã–≥–ª—è–¥–µ—Ç—å –≤ –∫–æ–¥–µ
            st.code(f"""
// –í CrepeEditor.tsx:
[Crepe.Feature.Placeholder]: {{
    text: 'Placeholder –¥–ª—è —Ä–µ–∂–∏–º–∞ {mode}',
    mode: '{mode}',
}},
            """, language="typescript")
            
            # –°–æ–∑–¥–∞–µ–º –æ–±—ã—á–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
            content = st_milkdown(
                placeholder=f"Placeholder –¥–ª—è —Ä–µ–∂–∏–º–∞ {mode}",
                height=150,
                key=f"test_mode_{mode}"
            )
            
            if content:
                st.markdown("**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:**")
                st.code(content[:100] + "..." if len(content) > 100 else content)
                
        except Exception as e:
            st.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ä–µ–∂–∏–º–∞ {mode}: {e}")

st.subheader("üìö –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏")

st.markdown("""
### –ò–∑–≤–µ—Å—Ç–Ω—ã–µ —Ä–µ–∂–∏–º—ã –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Milkdown:

**1. `mode: 'block'`** (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω)
```typescript
[Crepe.Feature.Placeholder]: {
    text: 'Start writing...', 
    mode: 'block',
}
```

### –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ–∂–∏–º—ã (—Ç—Ä–µ–±—É—é—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è):

–û—Å–Ω–æ–≤—ã–≤–∞—è—Å—å –Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ ProseMirror –∏ Milkdown, –≤–æ–∑–º–æ–∂–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ä–µ–∂–∏–º—ã:

- **`'inline'`** - –ò–Ω–ª–∞–π–Ω placeholder (–≤–Ω—É—Ç—Ä–∏ —Å—Ç—Ä–æ–∫–∏)
- **`'paragraph'`** - –ù–∞ —É—Ä–æ–≤–Ω–µ –ø–∞—Ä–∞–≥—Ä–∞—Ñ–∞
- **`'document'`** - –ù–∞ —É—Ä–æ–≤–Ω–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞
- **`'node'`** - –ù–∞ —É—Ä–æ–≤–Ω–µ —É–∑–ª–∞

### –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–æ–≤:

–ß—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–æ–≤ –≤ –Ω–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –Ω—É–∂–Ω–æ:

1. **–î–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ API:**
```python
def st_milkdown(
    placeholder: str = "",
    placeholder_mode: str = "block",  # –ù–æ–≤—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
    # –¥—Ä—É–≥–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã...
):
```

2. **–û–±–Ω–æ–≤–∏—Ç—å frontend:**
```typescript
[Crepe.Feature.Placeholder]: {
    text: args.placeholder || 'Start writing...',
    mode: args.placeholder_mode || 'block',
},
```

3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∂–∏–º—ã:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–∫–∏–µ —Ä–µ–∂–∏–º—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç Milkdown
- –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ä–µ–∂–∏–º–æ–≤
""")

st.subheader("üî¨ –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ")

st.markdown("""
–î–ª—è –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤ placeholder –Ω—É–∂–Ω–æ:

1. **–ò–∑—É—á–∏—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ Milkdown** - –Ω–∞–π—Ç–∏ –≤—Å–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä–µ–∂–∏–º—ã
2. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –≤–µ—Ä—Å–∏—é** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `placeholder_mode`
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–µ–∂–∏–º** –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ
4. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é** –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Ä–µ–∂–∏–º–æ–≤

### –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å:
- ‚úÖ **`'block'`** - –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- ‚ùì **–î—Ä—É–≥–∏–µ —Ä–µ–∂–∏–º—ã** - –¢—Ä–µ–±—É—é—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ Milkdown
""")

# –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—É—â—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
st.subheader("üìù –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è")

st.code("""
// –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ CrepeEditor.tsx:
[Crepe.Feature.Placeholder]: {
    text: args.placeholder || 'Start writing...',
    mode: 'block', // –ñ–µ—Å—Ç–∫–æ –∑–∞–¥–∞–Ω —Ä–µ–∂–∏–º 'block'
},
""", language="typescript")

st.markdown("""
**–í—ã–≤–æ–¥:** –í –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ä–µ–∂–∏–º `'block'`. 
–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –¥—Ä—É–≥–∏—Ö —Ä–µ–∂–∏–º–æ–≤ –Ω—É–∂–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é Milkdown 
–∏ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ API –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.
""")