deploymentId: az1
var:
  orgId: ${profile.csp.orgId}
  region: ${env.region}
  provider:
    subscriptionId: ${env.subscriptionId?}
    directoryId: ${env.directoryId?}
    applicationId: ${env.applicationId?}
    applicationKey: ${env.applicationKey?}
  infra:
    resourceGroup: ${env.infraResourceGroup}
    vnet: ${env.infraVnet}
    subnet: ${env.managementSubnet}
    subnetAddressSpace: ${env.managementSubnet_CIDR}
  desktop:
    resourceGroup: ${env.desktopResourceGroup}
    vnet: ${env.desktopVnet}
  uag:
    fqdn: abc.xyz
    vmSubnet: ${env.desktopSubnet}
    vmSubnetAddressSpace: ${env.desktopSubnet_CIDR}
    managementSubnet: ${env.managementSubnet}
    managementSubnetAddressSpace: ${env.managementSubnet_CIDR}
    dmzSubnet: ${env.dmzSubnet}
    dmzSubnetAddressSpace: ${env.dmzSubnet_CIDR}
  image:
    subnet: ${env.managementSubnet}
    username: ${default.name}
    password: Fsautomation1!
  vm:
    username: ${default.name}
    password: Fsautomation1!
    vmSkus:
      - kind: vmSkus
        id: Standard_DS2_v2
        data:
          capabilities:
            MemoryPreservingMaintenanceSupported: true
            vCPUsAvailable: '2'
            OSVhdSizeMB: '1047552'
            CombinedTempDiskAndCachedReadBytesPerSecond: '65536000'
            CombinedTempDiskAndCachedWriteBytesPerSecond: '65536000'
            EncryptionAtHostSupported: true
            UncachedDiskBytesPerSecond: '96000000'
            CombinedTempDiskAndCachedIOPS: '8000'
            RdmaEnabled: false
            MemoryGB: 7
            PremiumIO: true
            CapacityReservationSupported: true
            SupportedEphemeralOSDiskPlacements: ResourceDisk,CacheDisk
            CpuArchitectureType: x64
            AcceleratedNetworkingEnabled: true
            LowPriorityCapable: true
            HyperVGenerations:
              - V1
              - V2
            VMDeploymentTypes: IaaS
            CachedDiskBytes: '92341796864'
            UncachedDiskIOPS: '6400'
            EphemeralOSDiskSupported: true
            MaxDataDiskCount: '8'
            MaxResourceVolumeMB: '14336'
            vCPUsPerCore: '1'
            MaxNetworkInterfaces: '2'
            ACUs: '210'
            vCPUs: 2
          visible: true
          deprecated: false
          azAllowed: true
          uagAllowed: false
          tier: Standard
          templateRecommended: true
          series: DSv2
          name: Standard_DS2_v2
          templateBlocked: false
          edgeAllowed: false
          family: standardDSv2Family
          gpuType: NONE
          supportedZones:
            - '1'
            - '2'
            - '3'
        displayName: DS2_v2 (2 CPUs, 7GiB Memory)
    diskSkus:
      - kind: diskSkus
        id: Premium_LRS
        data:
          series: UNKNOWN
          capabilities:
            MaxBurstDurationInMin: '30'
            MaxZonalFaultDomainCount: '3'
            BurstCreditBucketSizeInIO: '6084000'
            MinIOps: '120'
            MaxBurstBandwidthMBps: '170'
            BurstCreditBucketSizeInGiB: '255'
            MaxBandwidthMBps: '25'
            MaxIOps: '120'
            MinSizeGiB: '0'
            MaxSizeGiB: '4'
            MaxValueOfMaxShares: '3'
            MinBandwidthMBps: '25'
            MaxBurstIops: '3500'
          tier: Premium
          name: Premium_LRS
          family: ''
          diskSkuAutoScaleEnabled: false



# ----------------------------------
# Blueprint: v1/infra-green.blueprint.yml
default:
  name: ${deploymentId}
resource:
  myProvider:
    kind: hcs/provider
    conditions:
      create_new: ${var.provider.applicationId}
    data:
      orgId: ${var.orgId}
      providerLabel: azure
      name: ${default.name}
      edgeGatewayNeeded: true
      providerDetails:
        method: ByAppRegistration
        data:
          subscriptionId: ${var.provider.subscriptionId}
          directoryId: ${var.provider.directoryId}
          applicationId: ${var.provider.applicationId}
          applicationKey: ${var.provider.applicationKey}
          region: ${var.region}
          environment: AZURE
  mySite:
    kind: hcs/site
    data:
      orgId: ${var.orgId}
      name: ${default.name}
      description: Site generated by hcs plan
  myAD:
    kind: hcs/ad
    data:
      orgId: ${var.orgId}
      name: ${default.name}
      description: AD generated by hcs plan
      defaultOU: CN=Computers
      dnsDomainName: ${env.dnsDomainName}
      netBIOSName: ${env.netBIOSName}
      joinAccounts:
        primary:
          username: ${env.domainUser}
          password: ${env.domainPassword}
        auxiliary:
          username: ${env.domainUser}
          password: ${env.domainPassword}
      bindAccounts:
        primary:
          username: ${env.domainUser}
          password: ${env.domainPassword}
        auxiliary:
          username: ${env.domainUser}
          password: ${env.domainPassword}
      primaryDNS: null
      secondaryDNS: null
  myEdge:
    kind: hcs/edge
    data:
      orgId: ${var.orgId}
      providerInstanceId: ${myProvider.id}
      name: ${default.name}
      description: Edge generated by hcs plan
      siteId: ${mySite.id}
      providerLabel: azure
      infrastructure:
        managementNetwork:
          kind: subnets
          id: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.infra.subnet}
          data:
            parent: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
            name: ${env.managementSubnet}
            cidr: ${env.managementSubnet_CIDR}
  myUAG:
    after:
      - myEdge
    kind: hcs/uag
    data:
      orgId: ${var.orgId}
      name: ${default.name}
      description: UAG generated by hcs plan
      providerInstanceId: ${myProvider.id}
      fqdn: ${var.uag.fqdn}
      numberOfGateways: 2
      lbLoadDistributionType: SOURCE_IP_AFFINITY
      type: EXTERNAL
      infrastructure:
        managementNetwork:
          kind: subnets
          id: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.uag.managementSubnet}
          data:
            parent: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
            name: ${var.uag.managementSubnet}
            cidr: ${var.uag.managementSubnetAddressSpace}
        dmzNetwork:
          kind: subnets
          id: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.uag.dmzSubnet}
          data:
            parent: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
            name: ${var.uag.dmzSubnet}
            cidr: ${var.uag.dmzSubnetAddressSpace}
        desktopNetwork:
          kind: subnets
          id: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.uag.dmzSubnet}
          data:
            parent: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
            name: ${var.uag.vmSubnet}
            cidr: ${var.uag.vmSubnetAddressSpace}
        vmSkus:
          kind: vmSkus
          id: Standard_A4_v2
          data:
            capabilities:
              MemoryPreservingMaintenanceSupported: true
              vCPUsAvailable: 4
              OSVhdSizeMB: 1047552
              CombinedTempDiskAndCachedReadBytesPerSecond: 83886080
              CombinedTempDiskAndCachedWriteBytesPerSecond: 41943040
              EncryptionAtHostSupported: false
              UncachedDiskBytesPerSecond: 96000000
              CombinedTempDiskAndCachedIOPS: 4000
              RdmaEnabled: false
              MemoryGB: 8
              PremiumIO: false
              CapacityReservationSupported: true
              CpuArchitectureType: x64
              AcceleratedNetworkingEnabled: false
              LowPriorityCapable: true
              HyperVGenerations: ''
              VMDeploymentTypes: PaaS,IaaS
              UncachedDiskIOPS: 6400
              EphemeralOSDiskSupported: false
              MaxDataDiskCount: 8
              MaxResourceVolumeMB: 40960
              vCPUsPerCore: 1
              MaxNetworkInterfaces: 4
              ACUs: 100
              vCPUs: 4
              SupportsV1: true
              SupportsV2: false
            uagAllowed: true
            tier: Standard
            templateRecommended: false
            series: Av2
            name: A4_v2 (4 CPUs, 8GiB Memory)
            templateBlocked: false
            edgeAllowed: false
            family: standardAv2Family
            gpuType: NONE
      sslCertificate:
        data:
          certificate: |
            -----BEGIN CERTIFICATE-----
            MIIC2DCCAcCgAwIBAgIJAMWJXNXU+fD5MA0GCSqGSIb3DQEBCwUAMBoxCzAJBgNV
            BAYTAlVTMQswCQYDVQQIDAJDQTAeFw0yNDA5MTYwNDQ5NDFaFw0yNjA5MTYwNDQ5
            NDFaMBoxCzAJBgNVBAYTAlVTMQswCQYDVQQIDAJDQTCCASIwDQYJKoZIhvcNAQEB
            BQADggEPADCCAQoCggEBANTfGlpoSreVvoOlHOoe/SdZzEUIM4EwDH4BURCOYjin
            QCh/trlgXOKSXOz+p2yrMddKKX7VW0dzg/B+g2rxyjYItnORcHaexUBM/IJC/u8Z
            3gTIu3KmQZabXfWHfdFAm8XOVQHVY/dpnOAb0szjBXYl3c7Gz/6SJeGSrm+Q7HMJ
            M40CgYpYFSde2ULIby6ruGP+Z2xRdBVZsK7QefDywtFOzKJLlvOZBVXHKUAWYVDG
            twBp3zeBVYxeen7jWY2IcYCB/9wJrlChVwU7mKFhzbJr2eehPJnKCLljc5j7jANa
            VRJg9DKAD41dJBScJ25FB93vul5R6CwPDm5R0QfheDkCAwEAAaMhMB8wHQYDVR0O
            BBYEFBI/JhBCdLrbegYpDc9zb2OWWohKMA0GCSqGSIb3DQEBCwUAA4IBAQAfqo6S
            rWMne9vuH4E/9pAZkYvTd5cXUCL3gfItHzhDi7sGXCqgp/sC4HOdALbrfJkzgAmc
            q3JJAOTC3nanbwVYlUo8DDiTcRH8MLnKB6qR2HpcFxbjdTKxFrpIQtcxh8hIU4Gk
            /BnyrYO/uuqAEXX70onP2e8fST8JUqbSGvuJ3enjd+4SARsMRIsKq8p2EQLZRQYC
            nBDcnGtzQ+ZGByhJh5pflg1CqTNV6uDOWOOywtNY4hA6E5dI7SdjeeLxJNbHfbPj
            gd8doB807z2GC5iocHFwboEkHsmC7yR9oHh5hcHYdBvqtJgc+gQsOz7gkLWL7TCL
            lS6gRq3JWJgzpDQS
            -----END CERTIFICATE-----
            -----BEGIN PRIVATE KEY-----
            MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQDU3xpaaEq3lb6D
            pRzqHv0nWcxFCDOBMAx+AVEQjmI4p0Aof7a5YFziklzs/qdsqzHXSil+1VtHc4Pw
            foNq8co2CLZzkXB2nsVATPyCQv7vGd4EyLtypkGWm131h33RQJvFzlUB1WP3aZzg
            G9LM4wV2Jd3Oxs/+kiXhkq5vkOxzCTONAoGKWBUnXtlCyG8uq7hj/mdsUXQVWbCu
            0Hnw8sLRTsyiS5bzmQVVxylAFmFQxrcAad83gVWMXnp+41mNiHGAgf/cCa5QoVcF
            O5ihYc2ya9nnoTyZygi5Y3OY+4wDWlUSYPQygA+NXSQUnCduRQfd77peUegsDw5u
            UdEH4Xg5AgMBAAECggEBAMAIF6zxIl4k/v2hSMlHdVY3Ytfvgw8Kumo9Y9TMrXyw
            HGesdrkaXhCiuqOtQnn8ofS2WWKqtDJr2d1tM76ZKrK9/2GYFV1c81KDYNNd/r7R
            lgC42KifpNFpjUR+mxjW8O9rqDIEP68lHjjpwKvGLNodZNAxd9cOHpA0k5nfof5O
            7AlsMqimjfF70nCf6iP7l/sd8TRYVsL3jRUo8Rn7FvqNcdM7p1KwQga4cfR1xGqW
            QJvcdDW8urBtrA2qmjLSBSeMqh5Nzpo/2yaItx1Uka3HRMYZUfFZQmYwE4jSIy57
            UOML3SuSjcXd07fzUvganb0lpredK+Tc7XL20Ilw2QECgYEA9HrXkM6rJI+1yxJk
            v4iNH5T3lZSBkGxgWx1lcoN0Wu0JBxZ56yJdY9UiTHc+67ehD0PC+vqjsWfQSSyW
            fTCIIbLKLJAqbl4ROSwcKf+MJBPbYT4U87SJiqwq1XVzkbj01jODg5NLUySMB3YZ
            5D1hATM+PlDx8VWy8zKqhIG7mdkCgYEA3ub4OLVvWIprgNtbjiJlBZhZy8rpC/ac
            gVr0Nbm6jjKEAsv/a62om5iqVTASjqEHgP2cohuLwLUyVgsqs4HGnPw2Dtb6GMpH
            LJ3OJ0AO1Te6nSROVXMtx130MLjMxSCUGVCqXqijXlyz9GXXMYW16CP8h7mdJFwM
            U8RugMzcdWECgYAt0Cs/FotZoZiGgl7gyXzwkyDGJfsVjkmMKXkOOXX/Z/XOHzcf
            ieQIRjNUMvBWiaWjz6XlFDzCjNqqK7HTqdmIvxFFwopA/l2p4gsxD5M6W4I7ub+B
            X656jwLD12udvhQbY7HcYSi3XtzitQ3rCFl6ORkL4m1ENTQAgNkVVZ5LGQKBgALH
            XFbQpDe1Wgu8MFMASMQeFxh8ShV1GJRgPuUgkJvPM2gZhPChtJVj/NOdCs4uYbqQ
            7s/yifZ4C82YzAp61rAEUOQ0d9+xPdvnh7djjAvKaxAkcLmN+wceO7oTw7G9azs5
            jzYo4gh+HVwxnNIoOZFQSYijnrriTuEIdNw0MZdhAoGASCNPSp6XEX4984ugtxTf
            mAxw6J6ByZtw90TARsnScZKwksk9ZDKbSWlM6TOugfSMBocRW5jsURni0bIcLV0B
            UR6RWezvMNXcqfz7Z3BNfnV0+pphZQzJKuDbw1X7zEajtnTIbzbE6AKMxvNnXKzz
            J1/sLXvki3toEOdVa9pF1NY=
            -----END PRIVATE KEY-----
        type: PEM
  myImageMultiSession:
    kind: hcs/image
    data:
      import:
        orgId: ${var.orgId}
        providerInstanceId: ${myProvider.id}
        streamName: ${default.name}-multi
        streamDescription: Multi session image generated by hcs plan
        providerLabel: AZURE
        versionSource: 0.0
        versionType: MAJOR
        gpuType: NONE
        sourceStreamType: AZURE_MARKET_PLACE
        os: Windows 10 Enterprise multi-session, 20H2
        osType: WINDOWS
        markers:
        - name: default
        assetDetails:
          data:
            generationType: V1
            licenseType: Windows_Client
            offer: windows-10
            publisher: microsoftwindowsdesktop
            sku: 20h2-evd
            vmSize: Standard_DS2_v2
            subNet: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.image.subnet}
            vNet: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
          vmInfo:
              username: ${var.image.username}
              password: ${var.image.password}
          options:
            createPublicIp: false
          type: AZURE_VM_IN_RG
      publish:
        orgId: ${var.orgId}
        versionName: 1.0.0
        providerLabel: AZURE
  myImageSingleSession:
    kind: hcs/image
    data:
      import:
        orgId: ${var.orgId}
        providerInstanceId: ${myProvider.id}
        streamName: ${default.name}-single
        streamDescription: Single session image generated by hcs plan
        providerLabel: AZURE
        versionSource: 0.0
        versionType: MAJOR
        gpuType: NONE
        sourceStreamType: AZURE_MARKET_PLACE
        os: Windows 10 Enterprise, 22H2
        osType: WINDOWS
        markers:
        - name: default
        assetDetails:
          data:
            generationType: V1
            licenseType: Windows_Client
            offer: windows-10
            publisher: microsoftwindowsdesktop
            sku: win10-22h2-ent
            vmSize: Standard_DS2_v2
            subNet: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.image.subnet}
            vNet: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
          vmInfo:
            username: ${var.image.username}
            password: ${var.image.password}
          options:
            createPublicIp: false
          type: AZURE_VM_IN_RG
      publish:
        orgId: ${var.orgId}
        versionName: 1.0.0
        providerLabel: AZURE
  myTemplateDedicated:
    kind: hcs/pool-template
    data:
      name: ${default.name}-dedicated-template
      description: Dedicated-session pool template generated by hcs plan
      imageReference:
        streamId: ${myImageSingleSession.id}
        markerId: ${myImageSingleSession.markers[0].id}
      networks:
        - kind: subnets
          id: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.image.subnet}
          data:
            parent: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
            name: ${env.desktopSubnet}
            cidr: ${env.desktopSubnet_CIDR}
      diskSizeInGB: 127
      diskEncryption:
        enabled: false
      vmLicenseType: WINDOWS_CLIENT
      availabilityZoneEnabled: false
      infrastructure:
        vmSkus: ${var.vm.vmSkus}
        diskSkus: ${var.vm.diskSkus}
      reuseVmId: true
      sessionsPerVm: 1
      agentCustomization:
        demSettingId: ''
      sparePolicy:
        description: ''
        limit: 1
        max: 1
        min: 1
      templateTimeZone:
        timeZone: America/Los_Angeles
        dayLightDisabled: true
      computerAccountOU: CN=Computers
      activeDirectoryId: ${myAD.id}
      flags:
        azureHybridJoinEnabled: false
      templateUEMSettings: null
      uagDeploymentId: ${myUAG.id}
      orgId: ${var.orgId}
      providerInstanceId: ${myProvider.id}
      licenseProvided: true
      vmNamePattern: ${default.name}-m-
      desktopAdminUsername: ${var.vm.username}
      templateType: DEDICATED
      desktopAdminPassword: ${var.vm.password}
  myTemplateFloating:
    kind: hcs/pool-template
    data:
      name: ${default.name}-single-template
      description: Single-session pool template generated by hcs plan
      imageReference:
        streamId: ${myImageSingleSession.id}
        markerId: ${myImageSingleSession.markers[0].id}
      networks:
        - kind: subnets
          id: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.image.subnet}
          data:
            parent: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
            name: ${env.desktopSubnet}
            cidr: ${env.desktopSubnet_CIDR}
      diskSizeInGB: 127
      diskEncryption:
        enabled: false
      vmLicenseType: WINDOWS_CLIENT
      availabilityZoneEnabled: false
      infrastructure:
        vmSkus: ${var.vm.vmSkus}
        diskSkus: ${var.vm.diskSkus}
      reuseVmId: true
      sessionsPerVm: 1
      agentCustomization:
        demSettingId: ''
      sparePolicy:
        description: ''
        limit: 1
        max: 1
        min: 1
      templateTimeZone:
        timeZone: America/Los_Angeles
        dayLightDisabled: true
      computerAccountOU: CN=Computers
      activeDirectoryId: ${myAD.id}
      flags:
        azureHybridJoinEnabled: false
      templateUEMSettings: null
      uagDeploymentId: ${myUAG.id}
      orgId: ${var.orgId}
      providerInstanceId: ${myProvider.id}
      licenseProvided: true
      vmNamePattern: ${default.name}-m-
      desktopAdminUsername: ${var.vm.username}
      templateType: FLOATING
      desktopAdminPassword: ${var.vm.password}
  myTemplateMulti:
    kind: hcs/pool-template
    data:
      name: ${default.name}-multi-template
      description: Multi-session pool template generated by hcs plan
      imageReference:
        streamId: ${myImageMultiSession.id}
        markerId: ${myImageMultiSession.markers[0].id}
      networks:
        - kind: subnets
          id: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}/subnets/${var.image.subnet}
          data:
            parent: /subscriptions/${var.provider.subscriptionId}/resourceGroups/${var.infra.resourceGroup}/providers/Microsoft.Network/virtualNetworks/${var.infra.vnet}
            name: ${env.desktopSubnet}
            cidr: ${env.desktopSubnet_CIDR}
      diskSizeInGB: 127
      diskEncryption:
        enabled: false
      vmLicenseType: WINDOWS_CLIENT
      availabilityZoneEnabled: false
      infrastructure:
        vmSkus: ${var.vm.vmSkus}
        diskSkus: ${var.vm.diskSkus}
      reuseVmId: true
      sessionsPerVm: 1
      agentCustomization:
        demSettingId: ''
      sparePolicy:
        description: ''
        limit: 1
        max: 1
        min: 1
      templateTimeZone:
        timeZone: America/Los_Angeles
        dayLightDisabled: true
      computerAccountOU: CN=Computers
      activeDirectoryId: ${myAD.id}
      flags:
        azureHybridJoinEnabled: false
      templateUEMSettings: null
      uagDeploymentId: ${myUAG.id}
      orgId: ${var.orgId}
      providerInstanceId: ${myProvider.id}
      licenseProvided: true
      vmNamePattern: ${default.name}-m-
      desktopAdminUsername: ${var.vm.username}
      templateType: MULTI_SESSION
      desktopAdminPassword: ${var.vm.password}
  myPoolDedicated:
    kind: hcs/pool-group
    data:
      orgId: ${var.orgId}
      name: ${default.name}-dedicated-pool-group
      type: DESKTOP
      templateType: DEDICATED
      connectionAffinity: NEAREST_SITE
      scope: ALL_SITES
      enableSSO: false
      preferredClientType: HORIZON_CLIENT
      protocols:
        - name: BLAST
          defaultProtocol: true
      templates:
        - id: ${myTemplateDedicated.id}
  myPoolFloating:
    kind: hcs/pool-group
    data:
      orgId: ${var.orgId}
      name: ${default.name}-floating-pool-group
      type: DESKTOP
      templateType: FLOATING
      connectionAffinity: NEAREST_SITE
      scope: ALL_SITES
      enableSSO: false
      preferredClientType: HORIZON_CLIENT
      protocols:
        - name: BLAST
          defaultProtocol: true
      templates:
        - id: ${myTemplateFloating.id}
  myPoolMultisession:
    kind: hcs/pool-group
    data:
      orgId: ${var.orgId}
      name: ${default.name}-multi-pool-group
      type: DESKTOP
      templateType: MULTI_SESSION
      connectionAffinity: NEAREST_SITE
      scope: ALL_SITES
      enableSSO: false
      preferredClientType: HORIZON_CLIENT
      protocols:
        - name: BLAST
          defaultProtocol: true
      templates:
        - id: ${myTemplateMulti.id}

