{% load i18n cms_tags zb_tags %}
{# Template del listado de archivos #}
<div class="row">
    {% for file in files %}
        <div class="col-12 col-sm-12 col-md-6 mb-3">
            <div class=" card shadow-sm bg-white h-100">
                <div class="card-body position-relative">
                    <div class="d-flex justify-content-center">
                        <div class="my-3" id="circulo">
                            <i class="fa-light fa-file fa-3x"></i>
                        </div>
                    </div>
                    <div class="{{ file.file_extended.published|yesno:",text-danger" }}">
                        <h5 class="card-title">{{ file.file_extended.title }}</h5>
                        <p class="card-text">{{ file.description }}</p>
                    </div>
                    {% if request.toolbar.edit_mode_active and perms.zb_repository.change_file and  perms.zb_repository.change_fileextended %}
                        <div class="position-absolute d-flex justify-content-end" style="top: 0; right: 0">
                            {% render_model_block file %}
                                <button class="btn btn-info"><i class="fa-light fa-file-pen"></i></button>
                            {% endrender_model_block %}
                            <form action="" method="post">
                                {% csrf_token %}
                                <label for="file_id"></label>
                                <input type="hidden" name="file_id" id="file_id" value="{{ file.id }}">
                                <button class="btn {{ file.file_extended.published|yesno:"btn-danger,btn-info" }}">
                                    <i class="fa-light {{ file.file_extended.published|yesno:"fa-file-slash,fa-file-check" }}"></i>
                                </button>
                            </form>
                        </div>
                    {% endif %}
                    {% if request.GET.search %}
                        {% zb_concat instance.category "|" as category_replace %}
                        <div class="my-5">
                        </div>
                        <p class="position-absolute bottom-0 text-black-50">{% trans "Category" %}: {{ file.file_extended.category|stringformat:"s"|zb_replace:category_replace|slice:"3:" }}</p>
                    {% endif %}
                </div>
                <div class="card-footer bg-white text-center">
                    <a href="{{ file.file_url }}" target="{{ instance.target }}" class="btn btn-info text-white">
                        <i class="{{ file.icon_class }}"></i> {% trans 'Download.' %}
                    </a>
                </div>
            </div>
        </div>
    {% endfor %}
</div>
{% zb_concat "djangocms_zb_repository/" instance.template "/includes/pagination.html" as template %}
{% include template %}