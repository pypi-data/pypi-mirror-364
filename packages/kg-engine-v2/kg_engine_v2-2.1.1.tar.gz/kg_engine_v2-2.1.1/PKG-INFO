Metadata-Version: 2.4
Name: kg-engine-v2
Version: 2.1.1
Summary: Advanced Knowledge Graph Engine with semantic search and temporal tracking
Project-URL: Homepage, https://github.com/dasein108/kg_semantic
Project-URL: Repository, https://github.com/dasein108/kg_semantic.git
Project-URL: Issues, https://github.com/dasein108/kg_semantic/issues
Author-email: KG/Semantic Engine <acidpictures@gmail.com>
Requires-Python: >=3.8
Requires-Dist: dateparser>=1.1.0
Requires-Dist: llama-index-vector-stores-neo4jvector>=0.3.0
Requires-Dist: llama-index>=0.10.0
Requires-Dist: neo4j>=5.0.0
Requires-Dist: numpy>=1.24.0
Requires-Dist: openai>=1.0.0
Requires-Dist: python-dotenv>=1.0.0
Requires-Dist: sentence-transformers>=2.2.0
Provides-Extra: dev
Requires-Dist: black>=23.0.0; extra == 'dev'
Requires-Dist: flake8>=6.0.0; extra == 'dev'
Requires-Dist: mypy>=1.0.0; extra == 'dev'
Requires-Dist: pytest>=7.0.0; extra == 'dev'
Description-Content-Type: text/markdown

# Knowledge Graph Engine v2

Modern Neo4j-based knowledge graph engine with semantic search capabilities and intelligent relationship management.

## ğŸ¯ Overview

A production-ready knowledge graph system built entirely on **Neo4j** for persistent graph storage and vector search. Combines graph database operations with semantic vector search to provide intelligent information storage, retrieval, and reasoning.

## âœ¨ Key Features

- **ğŸ—ï¸ Neo4j-Native Architecture**: Complete Neo4j integration for both graph and vector operations
- **ğŸ” Enhanced Semantic Search**: Improved vector search with dynamic thresholds and contextual boosting
- **ğŸ¤– LLM Integration**: OpenAI/Ollama support for entity extraction and query processing  
- **âš”ï¸ Conflict Resolution**: Intelligent handling of contradicting information with temporal tracking
- **â° Temporal Tracking**: Complete relationship history with date ranges and conflict resolution
- **ğŸ¯ Smart Query Understanding**: Context-aware search with semantic category matching
- **ğŸ“Š Optimized Performance**: Lower similarity thresholds (0.3) for better recall
- **ğŸš€ Production Ready**: ACID compliance, comprehensive error handling, modern architecture

## ğŸ“ Project Structure

```
src/                                  # Main source directory
â”œâ”€â”€ kg_engine/                        # Knowledge Graph Engine
â”‚   â”œâ”€â”€ core/                         # Core engine
â”‚   â”‚   â””â”€â”€ engine.py                 # Main KG Engine
â”‚   â”œâ”€â”€ models/                       # Data models
â”‚   â”‚   â””â”€â”€ models.py                 # Graph data structures
â”‚   â”œâ”€â”€ storage/                      # Storage components
â”‚   â”‚   â”œâ”€â”€ graph_db.py               # Neo4j graph operations
â”‚   â”‚   â”œâ”€â”€ neo4j_vector_store.py     # Vector storage
â”‚   â”‚   â”œâ”€â”€ vector_store.py           # Vector store interface
â”‚   â”‚   â””â”€â”€ ...                       # Other storage components
â”‚   â”œâ”€â”€ llm/                          # LLM integration
â”‚   â”‚   â””â”€â”€ llm_interface.py          # OpenAI/Ollama interface
â”‚   â”œâ”€â”€ config/                       # Configuration
â”‚   â”‚   â”œâ”€â”€ neo4j_config.py           # Neo4j settings
â”‚   â”‚   â””â”€â”€ neo4j_schema.py           # Schema management
â”‚   â””â”€â”€ utils/                        # Utilities
â”‚       â”œâ”€â”€ date_parser.py            # Date parsing
â”‚       â””â”€â”€ ...                       # Other utilities
â”œâ”€â”€ examples/                         # Usage examples
â”‚   â”œâ”€â”€ examples.py                   # Basic examples
â”‚   â”œâ”€â”€ bio_example.py                # Biographical demo
â”‚   â””â”€â”€ simple_bio_demo.py            # Simple demo
â””â”€â”€ test_neo4j_integration.py         # Test suite

docs/                                 # Comprehensive documentation
â”œâ”€â”€ architecture/                     # System design
â”œâ”€â”€ user-guide/                       # Getting started
â”œâ”€â”€ api/                              # API reference
â””â”€â”€ development/                      # Development guides
```

## ğŸš€ Quick Start

### Prerequisites
```bash
# Install Neo4j (required)
docker run --name neo4j -p7474:7474 -p7687:7687 -d \
    -e NEO4J_AUTH=neo4j/password \
    neo4j:latest
```

### Installation
```bash
pip install -e .
```

### Basic Usage
```python
from src.kg_engine import KnowledgeGraphEngineV2, InputItem
from src.kg_engine.config import Neo4jConfig

# Initialize with Neo4j
engine = KnowledgeGraphEngineV2(
    api_key="your-openai-key",  # or "ollama" for local LLM
    neo4j_config=Neo4jConfig()
)

# Add knowledge
result = engine.process_input([
    InputItem(description="Alice works as a software engineer at Google"),
    InputItem(description="Bob lives in San Francisco")
])

# Search with natural language
response = engine.search("Who works at Google?")
print(response.answer)  # "Alice works as a software engineer at Google."
```

## ğŸ¤– LLM Setup Options

### Option 1: OpenAI (Recommended for Production)
```bash
export OPENAI_API_KEY="your-api-key"
```

```python
engine = KnowledgeGraphEngineV2(
    api_key="your-openai-key",
    model="gpt-4.1-nano"  # Fast and cost-effective
)
```

### Option 2: Local Ollama (Privacy & Cost-Free)
```bash
# Install Ollama
curl -fsSL https://ollama.ai/install.sh | sh

# Start server
ollama serve

# Pull a model
ollama pull llama3.2:3b  # Recommended: good balance of size/performance
```

```python
engine = KnowledgeGraphEngineV2(
    api_key="ollama",
    base_url="http://localhost:11434/v1",
    model="llama3.2:3b"
)
```

## ğŸ—ï¸ Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LLM Interface â”‚    â”‚   Graph Database â”‚    â”‚  Vector Store   â”‚
â”‚                 â”‚    â”‚                  â”‚    â”‚                 â”‚
â”‚ â€¢ Entity Extractâ”‚    â”‚ â€¢ Neo4j Native   â”‚    â”‚ â€¢ Neo4j Vectors â”‚
â”‚ â€¢ Query Parse   â”‚    â”‚ â€¢ Conflict Det.  â”‚    â”‚ â€¢ Semantic      â”‚
â”‚ â€¢ Answer Gen.   â”‚    â”‚ â€¢ Temporal Track â”‚    â”‚ â€¢ Search        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                       â”‚                       â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ KG Engine v2        â”‚
                    â”‚                     â”‚
                    â”‚ â€¢ Process Input     â”‚
                    â”‚ â€¢ Smart Updates     â”‚
                    â”‚ â€¢ Hybrid Search     â”‚
                    â”‚ â€¢ Natural Language  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Advanced Features

### Intelligent Conflict Resolution
```python
# Initial information
engine.process_input([InputItem(description="Alice lives in Boston")])

# Update with conflicting information (automatically resolves)
engine.process_input([InputItem(description="Alice moved to Seattle in 2024")])

# System automatically:
# 1. Marks old relationship as obsolete
# 2. Adds new relationship as active
# 3. Maintains complete history
```

### Enhanced Semantic Search
```python
# Improved semantic understanding with contextual boosting
response = engine.search("Who works in technology?")
# âœ… Returns all tech workers including software engineers, developers

response = engine.search("Who was born in Europe?")
# âœ… Returns all European births: Berlin, Lyon, Barcelona, Paris

response = engine.search("What do people do for hobbies?")
# âœ… Returns all "enjoys" relationships with boosted relevance scores
```

### Temporal Relationship Tracking
```python
# Natural language dates
engine.process_input([
    InputItem(description="Project started", from_date="2 months ago"),
    InputItem(description="Alice joined", from_date="last week")
])
```

## ğŸ“š Documentation

- **[ğŸ“– Quick Start](docs/user-guide/quick-start.md)**: Get running in 5 minutes
- **[ğŸ—ï¸ Architecture](docs/architecture/overview.md)**: System design and components
- **[ğŸ“Š Workflows](docs/architecture/workflows.md)**: Process flows with diagrams
- **[ğŸ”§ API Reference](docs/api/README.md)**: Complete API documentation
- **[ğŸ‘©â€ğŸ’» Development](docs/development/README.md)**: Development setup and guidelines

## ğŸš¦ Running Examples

```bash
# Run basic examples
python src/examples/examples.py

# Run biographical knowledge graph demo  
python src/examples/simple_bio_demo.py

# Verify project structure
python verify_structure.py
```

Expected output:
```
âœ… Neo4j connection verified
ğŸš€ Knowledge Graph Engine v2 initialized
   - Vector store: kg_v2 (neo4j)
   - Graph database: Neo4j (persistent)
   
=== Example: Semantic Relationship Handling ===
1. Adding: John Smith teaches at MIT
   Result: 1 new edge(s) created
...
```

## ğŸ” Search Capabilities

The Knowledge Graph Engine v2 features advanced semantic search with:

- **Dynamic Similarity Thresholds**: Base threshold of 0.3 with context-specific adjustments
- **Semantic Category Matching**: Understands relationships between concepts (e.g., "technology" â†’ "software engineer")
- **Query-Specific Boosting**: Different query types get tailored relevance scoring
- **Geographic Intelligence**: Recognizes European cities and other geographic relationships
- **Contextual Understanding**: Distinguishes between work, hobbies, locations, and other relationship types

### Example Queries
```python
# Technology and profession queries
"Who works in technology?" â†’ Finds software engineers, developers, tech professionals
"Tell me about engineers" â†’ Returns all engineering-related professions

# Geographic queries  
"Who was born in Europe?" â†’ Finds Berlin, Lyon, Barcelona, Paris births
"Who lives in Paris?" â†’ Returns all Paris residents

# Activity and interest queries
"What do people do for hobbies?" â†’ Returns all "enjoys" relationships
"Tell me about photographers" â†’ Finds people who enjoy or specialize in photography

# Entity-specific queries
"Tell me about Emma Johnson" â†’ Returns all relationships for Emma
```

### PyPI Release Steps:

  1. Update version (currently 2.1.1 in both files)

  2. Clean and build:
  rm -rf dist/ build/
  python -m build

  3. Test locally:
  pip install dist/*.whl
  python -c "from kg_engine import KnowledgeGraphEngineV2; print('Import successful')"

  4. Upload to PyPI:
  # Test PyPI first
  twine upload --repository testpypi dist/*

  # Production PyPI
  twine upload dist/*
## License

MIT License