[project]
name = "repo-on-fire"
version = "0.2.5"
description = "A thin wrapper around Google's repo tool, adding some extras on top!"
authors = [
    { name = "Martin Hoeher", email = "martin@rpdev.net" },
]
dependencies = [
    "pydantic>=2.6.1",
    "pydantic-settings>=2.1.0",
    "flufl-lock>=8.0.2",
    "appdirs>=1.4.4",
    "requests>=2.31.0",
    "tomlkit>=0.12.3",
    "click>=8.1.7",
]
requires-python = ">=3.8,<4.0"
readme = "README.md"
classifiers = [
    "Programming Language :: Python :: 3",
    "Operating System :: OS Independent",
    "Programming Language :: Python :: 3 :: Only",
    "Programming Language :: Python :: 3.8",
    "Programming Language :: Python :: 3.9",
    "Programming Language :: Python :: 3.10",
    "Programming Language :: Python :: 3.11",
    "Programming Language :: Python :: 3.12",
]

[project.license]
text = "LGPL-3.0-or-later"

[project.urls]
Homepage = "https://gitlab.com/rpdev/repo-on-fire"
Documentation = "https://repo-on-fire.readthedocs.io/en/latest/"
"Bug Tracker" = "https://gitlab.com/rpdev/repo-on-fire/-/issues"

[project.scripts]
repo_on_fire = "repo_on_fire.__main__:main"
repo-on-fire = "repo_on_fire.__main__:main"
rof = "repo_on_fire.__main__:main"

[build-system]
requires = [
    "pdm-backend",
]
build-backend = "pdm.backend"

[tool.pdm]
distribution = true

[tool.pdm.dev-dependencies]
dev = [
    "ruff>=0.2.1",
    "mypy>=1.8.0",
    "pytest>=8.0.0",
    "pytest-cov>=4.1.0",
    "pytest-xdist>=3.5.0",
    "types-requests>=2.31.0.20240125",
    "mkdocs>=1.5.3",
    "mkdocstrings[python]>=0.24.0",
    "mkdocs-material[imaging]>=9.5.9",
    "mkdocs-awesome-pages-plugin>=2.9.2",
    "mkdocs-glightbox>=0.3.7",
    "mkdocs-material-extensions>=1.3.1",
]

[tool.ruff]
line-length = 100
fix = true
target-version = "py38"
select = [
    "I",
    "F",
    "E",
    "W",
    "D",
    "YTT",
    "B",
    "Q",
    "T10",
    "INT",
    "PL",
    "PIE",
    "PYI",
    "TID",
    "ISC",
    "TCH",
    "C",
    "PGH",
    "RUF",
    "S102",
    "NPY002",
    "PERF",
    "FLY",
    "G",
    "UP",
]

[tool.ruff.pydocstyle]
convention = "google"

[tool.pytest.ini_options]
addopts = "    --cov repo_on_fire\n    --cov-report term\n    --cov-report html\n    --cov-report xml\n    --doctest-modules\n    --log-level=DEBUG\n    --junitxml=report.xml\n"
filterwarnings = [
    "error",
]

[tool.coverage.report]
exclude_lines = [
    "return NotImplemented",
    "raise NotImplementedError()",
    "pragma: no cover",
    "assert False",
]

[tool.mypy]
ignore_missing_imports = true
plugins = [
    "pydantic.mypy",
]
