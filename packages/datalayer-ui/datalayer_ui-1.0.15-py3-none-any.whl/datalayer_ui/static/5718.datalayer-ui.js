"use strict";(self.webpackChunk_datalayer_ui=self.webpackChunk_datalayer_ui||[]).push([[3303,5718,9882],{35718:(e,t,r)=>{r.d(t,{k:()=>oe});var i=r(18683),n=r(98754),s=r(9387),o=r(50059),a=r(42968),l=r(17402),c=r(63279);const d=()=>{const[e,t]=(0,s.useState)(0);return(0,s.useEffect)(()=>{const e=setInterval(()=>{t(e=>{let t=e+1;return t>100&&(t=0),t})},100);return()=>clearInterval(e)},[]),(0,i.jsx)(c.z,{progress:e,barSize:"small"})};var u=r(15115),_=r(58875),p=r(80736),h=r(38621);const m={small:16,medium:32,large:64};function f({title:e,titleId:t,size:r,colored:i,...n},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:i?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor","aria-hidden":"true",width:r?"string"==typeof r?m[r]:r:"16px",ref:o,"aria-labelledby":t},n),e?s.createElement("title",{id:t},e):null,s.createElement("path",{fill:i?"currentColor":["#fff","#fffff","white","#FFF","#FFFFFF"].includes("currentColor")?"white":"currentColor",fillRule:"evenodd",d:"M18.364 3.058a.75.75 0 01.75.75V8.05a.75.75 0 01-.75.75h-4.243a.75.75 0 010-1.5h2.36a7.251 7.251 0 102.523 3.822.75.75 0 111.45-.387 8.75 8.75 0 11-2.84-4.447v-2.48a.75.75 0 01.75-.75z",clipRule:"evenodd"}))}const g=s.forwardRef(f),x=e=>{const{kernel:t,outputAdapter:r}=e;return(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(_.K,{"aria-labelledby":"",icon:h.tno,variant:"invisible"})}),(0,i.jsx)(u.W.Overlay,{children:(0,i.jsxs)(p.l,{children:[t&&(0,i.jsxs)(p.l.Item,{onSelect:e=>{t.interrupt()},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(h.wFz,{})}),"Interrupt kernel"]}),t&&(0,i.jsxs)(p.l.Item,{onSelect:e=>{t.restart()},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(g,{})}),"Restart kernel"]}),r&&(0,i.jsxs)(p.l.Item,{variant:"danger",onSelect:e=>{r.clear()},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(h.YBG,{})}),"Clear outputs"]})]})})]})};var b=r(57330);const w=e=>{const{output:t}=e;let r,n,s;switch(t.output_type){case"error":r=t.traceback.join("\n");break;case"stream":{const e=t.text;r="string"==typeof e?e:"boolean"==typeof e?e?"true":"false":Array.isArray(e)?e.join("\n"):e?.toString();break}case"display_data":{const e=t.data;if(e){const t=e["image/png"];t&&(s=t)}break}case"execute_result":{const e=t.data;if(e){const t=e["text/plain"];t&&(r="string"==typeof t?t:Array.isArray(t)?t.join("\n"):t.toString());const i=e["text/html"];i&&(n="string"==typeof i?i:i.join("\n"))}break}}return(0,i.jsxs)(i.Fragment,{children:[r&&(0,i.jsx)("pre",{style:{color:"black",backgroundColor:"white"},children:r}),n&&(0,i.jsx)("div",{children:(0,i.jsx)("div",{dangerouslySetInnerHTML:{__html:n}})}),s&&(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:`data:image/png;base64,${s}`})})]})};var y=r(55388),E=r(20137),A=r(66087),v=r(91959),j=r(29299),k=r(34369),P=r(69225),C=r(64257);class M{constructor(e,t,r){this.from=e,this.to=t,this.diagnostic=r}}class T{constructor(e,t,r){this.diagnostics=e,this.panel=t,this.selected=r}static init(e,t,r){let i=r.facet(U).markerFilter;i&&(e=i(e,r));let n=e.slice().sort((e,t)=>e.from-t.from||e.to-t.to),s=new A.vB,o=[],a=0;for(let e=0;;){let t,i,l=e==n.length?null:n[e];if(!l&&!o.length)break;for(o.length?(t=a,i=o.reduce((e,t)=>Math.min(e,t.to),l&&l.from>t?l.from:1e8)):(t=l.from,i=l.to,o.push(l),e++);e<n.length;){let r=n[e];if(r.from!=t||!(r.to>r.from||r.to==t)){i=Math.min(r.from,i);break}o.push(r),e++,i=Math.min(r.to,i)}let c=Z(o);if(o.some(e=>e.from==e.to||e.from==e.to-1&&r.doc.lineAt(e.from).to==e.from))s.add(t,t,E.NZ.widget({widget:new N(c),diagnostics:o.slice()}));else{let e=o.reduce((e,t)=>t.markClass?e+" "+t.markClass:e,"");s.add(t,i,E.NZ.mark({class:"cm-lintRange cm-lintRange-"+c+e,diagnostics:o.slice(),inclusiveEnd:o.some(e=>e.to>i)}))}a=i;for(let e=0;e<o.length;e++)o[e].to<=a&&o.splice(e--,1)}let l=s.finish();return new T(l,t,O(l))}}function O(e,t=null,r=0){let i=null;return e.between(r,1e9,(e,r,{spec:n})=>{if(!(t&&n.diagnostics.indexOf(t)<0))if(i){if(n.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new M(i.from,r,i.diagnostic)}else i=new M(e,r,t||n.diagnostics[0])}),i}const I=A.Pe.define(),R=A.Pe.define(),D=A.Pe.define(),S=A.sU.define({create:()=>new T(E.NZ.none,null,null),update(e,t){if(t.docChanged&&e.diagnostics.size){let r=e.diagnostics.map(t.changes),i=null,n=e.panel;if(e.selected){let n=t.changes.mapPos(e.selected.from,1);i=O(r,e.selected.diagnostic,n)||O(r,null,n)}!r.size&&n&&t.state.facet(U).autoPanel&&(n=null),e=new T(r,n,i)}for(let r of t.effects)if(r.is(I)){let i=t.state.facet(U).autoPanel?r.value.length?q.open:null:e.panel;e=T.init(r.value,i,t.state)}else r.is(R)?e=new T(e.diagnostics,r.value?q.open:null,e.selected):r.is(D)&&(e=new T(e.diagnostics,e.panel,r.value));return e},provide:e=>[E.S7.from(e,e=>e.panel),E.Lz.decorations.from(e,e=>e.diagnostics)]}),L=E.NZ.mark({class:"cm-lintRange cm-lintRange-active"});function F(e,t,r){let i,{diagnostics:n}=e.state.field(S),s=-1,o=-1;n.between(t-(r<0?1:0),t+(r>0?1:0),(e,n,{spec:a})=>{if(t>=e&&t<=n&&(e==n||(t>e||r>0)&&(t<n||r<0)))return i=a.diagnostics,s=e,o=n,!1});let a=e.state.facet(U).tooltipFilter;return i&&a&&(i=a(i,e.state)),i?{pos:s,end:o,above:e.state.doc.lineAt(s).to<o,create:()=>({dom:B(e,i)})}:null}function B(e,t){return(0,C.A)("ul",{class:"cm-tooltip-lint"},t.map(t=>V(e,t,!1)))}const W=e=>{let t=e.state.field(S,!1);return!(!t||!t.panel||(e.dispatch({effects:R.of(!1)}),0))},K=[{key:"Mod-Shift-m",run:e=>{let t=e.state.field(S,!1);var r,i;t&&t.panel||e.dispatch({effects:(r=e.state,i=[R.of(!0)],r.field(S,!1)?i:i.concat(A.Pe.appendConfig.of(G)))});let n=(0,E.ld)(e,q.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},preventDefault:!0},{key:"F8",run:e=>{let t=e.state.field(S,!1);if(!t)return!1;let r=e.state.selection.main,i=t.diagnostics.iter(r.to+1);return!(!i.value&&(i=t.diagnostics.iter(0),!i.value||i.from==r.from&&i.to==r.to)||(e.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),0))}}],U=A.sj.define({combine:e=>Object.assign({sources:e.map(e=>e.source).filter(e=>null!=e)},(0,A.QR)(e.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?r=>e(r)||t(r):e:t}))});function J(e){let t=[];if(e)e:for(let{name:r}of e){for(let e=0;e<r.length;e++){let i=r[e];if(/[a-zA-Z]/.test(i)&&!t.some(e=>e.toLowerCase()==i.toLowerCase())){t.push(i);continue e}}t.push("")}return t}function V(e,t,r){var i;let n=r?J(t.actions):[];return(0,C.A)("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},(0,C.A)("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(i=t.actions)||void 0===i?void 0:i.map((r,i)=>{let s=!1,o=i=>{if(i.preventDefault(),s)return;s=!0;let n=O(e.state.field(S).diagnostics,t);n&&r.apply(e,n.from,n.to)},{name:a}=r,l=n[i]?a.indexOf(n[i]):-1,c=l<0?a:[a.slice(0,l),(0,C.A)("u",a.slice(l,l+1)),a.slice(l+1)];return(0,C.A)("button",{type:"button",class:"cm-diagnosticAction",onclick:o,onmousedown:o,"aria-label":` Action: ${a}${l<0?"":` (access key "${n[i]})"`}.`},c)}),t.source&&(0,C.A)("div",{class:"cm-diagnosticSource"},t.source))}class N extends E.xO{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return(0,C.A)("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class z{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=V(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class q{constructor(e){this.view=e,this.items=[],this.list=(0,C.A)("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t=>{if(27==t.keyCode)W(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:r}=this.items[this.selectedIndex],i=J(r.actions);for(let n=0;n<i.length;n++)if(i[n].toUpperCase().charCodeAt(0)==t.keyCode){let t=O(this.view.state.field(S).diagnostics,r);t&&r.actions[n].apply(e,t.from,t.to)}}}t.preventDefault()},onclick:e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}}),this.dom=(0,C.A)("div",{class:"cm-panel-lint"},this.list,(0,C.A)("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>W(this.view)},"Ã—")),this.update()}get selectedIndex(){let e=this.view.state.field(S).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(S),r=0,i=!1,n=null,s=new Set;for(e.between(0,this.view.state.doc.length,(e,o,{spec:a})=>{for(let e of a.diagnostics){if(s.has(e))continue;s.add(e);let o,a=-1;for(let t=r;t<this.items.length;t++)if(this.items[t].diagnostic==e){a=t;break}a<0?(o=new z(this.view,e),this.items.splice(r,0,o),i=!0):(o=this.items[a],a>r&&(this.items.splice(r,a-r),i=!0)),t&&o.diagnostic==t.diagnostic?o.dom.hasAttribute("aria-selected")||(o.dom.setAttribute("aria-selected","true"),n=o):o.dom.hasAttribute("aria-selected")&&o.dom.removeAttribute("aria-selected"),r++}});r<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)i=!0,this.items.pop();0==this.items.length&&(this.items.push(new z(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),i=!0),n?(this.list.setAttribute("aria-activedescendant",n.id),this.view.requestMeasure({key:this,read:()=>({sel:n.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let r=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/r:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/r)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),i&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let r of this.items)if(r.dom.parentNode==this.list){for(;e!=r.dom;)t();e=r.dom.nextSibling}else this.list.insertBefore(r.dom,e);for(;e;)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=O(this.view.state.field(S).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:D.of(t)})}static open(e){return new q(e)}}function Y(e){return function(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const $=E.Lz.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:Y("#d11")},".cm-lintRange-warning":{backgroundImage:Y("orange")},".cm-lintRange-info":{backgroundImage:Y("#999")},".cm-lintRange-hint":{backgroundImage:Y("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function H(e){return"error"==e?4:"warning"==e?3:"info"==e?2:1}function Z(e){let t="hint",r=1;for(let i of e){let e=H(i.severity);e>r&&(r=e,t=i.severity)}return t}E.wJ;const G=[S,E.Lz.decorations.compute([S],e=>{let{selected:t,panel:r}=e.field(S);return t&&r&&t.from!=t.to?E.NZ.set([L.range(t.from,t.to)]):E.NZ.none}),(0,E.Ux)(F,{hideOn:function(e,t){let r=t.pos,i=t.end||r,n=e.state.facet(U).hideOn(e,r,i);if(null!=n)return n;let s=e.startState.doc.lineAt(t.pos);return!(!e.effects.some(e=>e.is(I))&&!e.changes.touchesRange(s.from,Math.max(s.to,i)))}}),$],X=(()=>[(0,E.$K)(),(0,E.Wu)(),(0,E.N$)(),(0,j.b6)(),(0,v.Lv)(),(0,E.VH)(),(0,E.A)(),A.$t.allowMultipleSelections.of(!0),(0,v.WD)(),(0,v.y9)(v.Zt,{fallback:!0}),(0,v.SG)(),(0,P.wm)(),(0,P.yU)(),(0,E.D4)(),(0,E.HJ)(),(0,E.dz)(),(0,k.gN)(),E.w4.of([...P.Bc,...j.pw,...k.Eo,...j.cL,...v.f7,...P.OO,...K])])();var Q=r(9388);const ee=[E.Lz.theme({"&":{fontSize:"9pt",border:"1px solid #c0c0c0"},".cm-content":{fontFamily:"Menlo, Monaco, Lucida Console, monospace",minHeight:"10px"},".cm-gutters":{minHeight:"10px"},".cm-scroller":{overflow:"auto"}},{dark:!1})];var te=r(41630);const re=e=>{const{executeCode:t,outputAdapter:r,editorView:n}=e;return(0,i.jsxs)(u.W,{children:[(0,i.jsx)(u.W.Anchor,{children:(0,i.jsx)(_.K,{"aria-labelledby":"",icon:h.tno,variant:"invisible"})}),(0,i.jsx)(u.W.Overlay,{children:(0,i.jsxs)(p.l,{children:[(0,i.jsxs)(p.l.Item,{onSelect:e=>{e.preventDefault(),t(n)},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(h.flY,{})}),(0,i.jsx)(p.l.TrailingVisual,{children:"â‡§ â†µ"}),"Run code"]}),(0,i.jsxs)(p.l.Item,{onSelect:e=>{e.preventDefault(),r.interrupt()},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(h.wFz,{})}),"Interrupt kernel"]}),(0,i.jsxs)(p.l.Item,{variant:"danger",onClick:e=>{e.preventDefault(),r.clear()},children:[(0,i.jsx)(p.l.LeadingVisual,{children:(0,i.jsx)(h.YBG,{})}),"Clear outputs"]})]})})]})},ie=({color:e})=>(0,i.jsx)(n.A,{sx:{backgroundColor:e,width:"14px",height:"14px",borderRadius:3}}),ne=e=>{const{executeCode:t,editorView:r,kernel:o,codePre:a}=e,{theme:l}=(0,te.DP)(),c=(0,s.useMemo)(()=>l?.colorSchemes.light.colors.success.muted,[]),d=(0,s.useMemo)(()=>l?.colorSchemes.light.colors.severe.muted,[]),[u,_]=(0,s.useState)("unknown");return(0,s.useEffect)(()=>{o&&o.ready.then(()=>{a&&t(r,a),_(o.connection.status),o.connection.statusChanged.connect((e,t)=>{_(t)})})},[o]),(0,i.jsxs)(n.A,{display:"flex",children:[(0,i.jsx)(n.A,{flexGrow:1}),(0,i.jsx)(n.A,{sx:{paddingTop:"6px"},children:(0,i.jsx)(ie,{color:(p=u,"idle"===p?c:d)})}),(0,i.jsx)(n.A,{children:(0,i.jsx)(re,{...e})})]});var p},se=e=>{const{code:t,codePre:r,outputAdapter:n,autoRun:o,disableRun:a,sourceId:l,toolbarPosition:c,insertText:d,kernel:u}=e,_=(0,y.Ay)(),[p,h]=(0,s.useState)(),m=_.getDataset(l),f=_.getInput(l),g=(0,s.useRef)(),x=(e,t)=>a?(alert("Code execution is disabled for this editor. There should be a button on the page to run this editor."),!0):(t?n.execute(t):n.execute(e.state.doc.toString()),!0);return(0,s.useEffect)(()=>{_.setInput(l,t);const e=new A.xx,r=[{key:"Shift-Enter",run:()=>x(n),preventDefault:!0}],i=A.$t.create({doc:t,extensions:[X,e.of((0,Q.python)()),E.Lz.lineWrapping,E.w4.of([...r]),ee,E.Lz.updateListener.of(e=>{if(e.docChanged){const t=e.state.doc.toString();_.setInput(l,t)}})]}),n=new E.Lz({state:i,parent:g.current});return h(n),o&&x(n),()=>{n.destroy()}},[t]),(0,s.useEffect)(()=>{var e;e=m,p&&d&&p.dispatch({changes:{from:0,insert:d(e)}})},[m]),(0,s.useEffect)(()=>{(e=>{p&&e&&p.dispatch({changes:{from:0,to:p.state.doc.length,insert:e}})})(f)},[f]),(0,i.jsxs)(i.Fragment,{children:[u&&"up"===c&&(0,i.jsx)(ne,{editorView:p,codePre:r,kernel:u,outputAdapter:n,executeCode:x}),(0,i.jsx)("div",{ref:g}),u&&"middle"===c&&(0,i.jsx)(ne,{editorView:p,codePre:r,kernel:u,outputAdapter:n,executeCode:x})]})},oe=e=>{const{defaultKernel:t}=(0,a.PD)(),r=(0,y.LC)(),{adapter:c,autoRun:u,clearTrigger:_,code:p,codePre:h,disableRun:m,executeTrigger:f,insertText:g,kernel:E,lumino:A,model:v,outputs:j,receipt:k,showControl:P,showEditor:C,showKernelProgressBar:M=!0,suppressCodeExecutionErrors:T=!1,onExecutionPhaseChanged:O,id:I,toolbarPosition:R}=e,D=E??t,[S,L]=(0,s.useState)(I),[F,B]=(0,s.useState)("unknown"),[W,K]=(0,s.useState)(j),[U,J]=(0,s.useState)();(0,s.useEffect)(()=>{S||L((0,l.YG)())},[]),(0,s.useEffect)(()=>{const e=(e,t)=>{K(e.toJSON()),S&&r.setModel(S,e)},t=(e,t)=>{k&&"add"===t.type&&t.newValues.map(e=>{if(e&&e.data){const t=e.data["text/html"];t&&t.indexOf(k)>-1&&r.setGradeSuccess(I,!0)}})};if(S&&D){const i=c??new b.b(S,D,W??[],v,T);J(i),r.setAdapter(S,i),v&&r.setModel(S,v),p&&r.setInput(S,p),i.outputArea.model.changed.connect(e),k&&i.outputArea.model.changed.connect(t)}return()=>{U&&(U.outputArea.model.changed.disconnect(e),U.outputArea.model.changed.disconnect(t))}},[S,D]),(0,s.useEffect)(()=>{U&&u&&U.execute(p,O)},[U]),(0,s.useEffect)(()=>{if(D)return D.ready.then(()=>{B(D.connection.status),D.connection.statusChanged.connect((e,t)=>{B(t)})}),()=>{}},[D]);const V=r.getExecuteRequest(I);return(0,s.useEffect)(()=>{U&&V&&V===S&&U.execute(p,O)},[V,U]),(0,s.useEffect)(()=>{U&&f>0&&U.execute(p,O)},[f]),(0,s.useEffect)(()=>{U&&_>0&&U.clear()},[_,U]),(0,i.jsxs)(i.Fragment,{children:[C&&U&&S&&(0,i.jsx)(n.A,{sx:{"& .cm-editor":{borderRadius:"5px"}},children:(0,i.jsx)(se,{autoRun:u,code:p,codePre:h,disableRun:m,insertText:g,kernel:D,outputAdapter:U,sourceId:S,toolbarPosition:R})}),U&&(0,i.jsxs)(n.A,{display:"flex",children:[(0,i.jsx)(n.A,{flexGrow:1,children:"idle"!==F&&M&&(0,i.jsx)(d,{})}),P&&(0,i.jsx)(n.A,{style:{marginTop:"-13px"},children:(0,i.jsx)(x,{kernel:D,outputAdapter:U})})]}),W&&(0,i.jsx)(n.A,{sx:{"& .jp-OutputArea":{fontSize:"10px"},"& .jp-OutputPrompt":{},"& .jp-OutputArea-prompt":{display:"none"},"& pre":{fontSize:"12px",wordBreak:"break-all",wordWrap:"break-word",whiteSpace:"pre-wrap"}},children:A?U&&(0,i.jsx)(o.j,{children:U.outputArea}):W&&(0,i.jsx)(i.Fragment,{children:W.map(e=>(0,i.jsx)(w,{output:e}))})})]})};oe.defaultProps={autoRun:!1,clearTrigger:0,disableRun:!1,executeTrigger:0,showControl:!0,lumino:!0,outputs:[{output_type:"execute_result",data:{"text/html":["<p>Type code in the cell and Shift+Enter to execute.</p>"]},execution_count:0,metadata:{}}],notifyOnComplete:!1,toolbarPosition:"up"}},57330:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{b:()=>OutputAdapter});var _jupyterlab_javascript_extension__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(69882),_jupyterlab_json_extension__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(83303),_jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(35031),_jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(35901),_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(89915),_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(53054),_jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(92727),_jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(89462),_jupyter_ipywidgets_libembed_amd__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(5190),_OutputExecutor__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(85112);class OutputAdapter{_id;_kernel;_renderers;_outputArea;_rendermime;_iPyWidgetsManager;_suppressCodeExecutionErrors;constructor(id,kernel,outputs,outputAreaModel,suppressCodeExecutionErrors=!1){this._id=id,this._kernel=kernel,this._suppressCodeExecutionErrors=suppressCodeExecutionErrors,this._renderers=_jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_4__.dn.filter(e=>"text/javascript"!==e.mimeTypes[0]),this._renderers.push(_jupyterlab_json_extension__WEBPACK_IMPORTED_MODULE_1__.rendererFactory),this._renderers.push(_jupyterlab_javascript_extension__WEBPACK_IMPORTED_MODULE_0__.rendererFactory),this._rendermime=new _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_5__.K({initialFactories:this._renderers}),this._iPyWidgetsManager=new _jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_6__.y({loader:_jupyter_ipywidgets_libembed_amd__WEBPACK_IMPORTED_MODULE_8__.l}),this._rendermime.addFactory({safe:!1,mimeTypes:[_jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_7__.a],createRenderer:e=>new _jupyter_ipywidgets_classic__WEBPACK_IMPORTED_MODULE_7__.u(e,this._iPyWidgetsManager)},0);const model=outputAreaModel??new _jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_2__.c({trusted:!0,values:outputs});if(this._outputArea=new _jupyterlab_outputarea__WEBPACK_IMPORTED_MODULE_3__.Bw({model,rendermime:this._rendermime}),outputs&&outputs[0]){const data=outputs[0].data;if(data){const isPlotly=data["application/vnd.plotly.v1+json"];if(isPlotly){let script=this._outputArea.node.children[0].children[1].children[0].children[1].innerHTML;script=script.replaceAll("\n,","\n"),eval(script)}}}this.initKernel()}async execute(e,t){if(this._kernel){this.clear();const r={},i=(0,_OutputExecutor__WEBPACK_IMPORTED_MODULE_9__.g)(this._id,e,this._outputArea,this._kernel,r,this._suppressCodeExecutionErrors,t);await i}}interrupt(){this._kernel&&this._kernel.interrupt()}clear(){this._outputArea.model.clear()}get kernel(){return this._kernel}set kernel(e){this._kernel=e,this.initKernel()}get outputArea(){return this._outputArea}initKernel(){this._kernel&&this._iPyWidgetsManager.registerWithKernel(this._kernel.connection)}}var __WEBPACK_DEFAULT_EXPORT__=OutputAdapter},69882:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{APPLICATION_JAVASCRIPT_MIMETYPE:()=>APPLICATION_JAVASCRIPT_MIMETYPE,ExperimentalRenderedJavascript:()=>ExperimentalRenderedJavascript,TEXT_JAVASCRIPT_MIMETYPE:()=>TEXT_JAVASCRIPT_MIMETYPE,default:()=>__WEBPACK_DEFAULT_EXPORT__,rendererFactory:()=>rendererFactory});var _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(54704);const TEXT_JAVASCRIPT_MIMETYPE="text/javascript",APPLICATION_JAVASCRIPT_MIMETYPE="application/javascript";function evalInContext(code,element,document,window){return eval(code)}class ExperimentalRenderedJavascript extends _jupyterlab_rendermime__WEBPACK_IMPORTED_MODULE_0__.TS{render(e){const t=this.translator.load("jupyterlab"),r=()=>{try{const t=e.data[this.mimeType];return t&&evalInContext(t,this.node,document,window),Promise.resolve()}catch(e){return Promise.reject(e)}};if(!e.trusted){const e=document.createElement("pre");e.textContent=t.__("Are you sure that you want to run arbitrary Javascript within your JupyterLab session?");const i=document.createElement("button");return i.textContent=t.__("Run"),this.node.appendChild(e),this.node.appendChild(i),i.onclick=e=>{this.node.textContent="",r()},Promise.resolve()}return r()}}const rendererFactory={safe:!1,mimeTypes:[TEXT_JAVASCRIPT_MIMETYPE,APPLICATION_JAVASCRIPT_MIMETYPE],createRenderer:e=>new ExperimentalRenderedJavascript(e)},extension={id:"@jupyterlab/javascript-extension:factory",description:"Adds renderer for JavaScript content.",rendererFactory,rank:0,dataType:"string"},__WEBPACK_DEFAULT_EXPORT__=extension},83303:(e,t,r)=>{r.r(t),r.d(t,{MIME_TYPE:()=>l,MIME_TYPES_JSONL:()=>c,RenderedJSON:()=>d,default:()=>_,rendererFactory:()=>u});var i=r(30808),n=r(85181),s=r(14809),o=r(9387),a=r(72447);const l="application/json",c=["text/jsonl","application/jsonl","application/json-lines"];class d extends s.x0{constructor(e){super(),this._rootDOM=null,this.addClass("jp-RenderedJSON"),this.addClass("CodeMirror"),this._mimeType=e.mimeType,this.translator=e.translator||n.wK}[i._.symbol](){return()=>i._.printWidget(this)}async renderModel(e){const{Component:t}=await r.e(3835).then(r.bind(r,63835));let i;if(c.indexOf(this._mimeType)>=0){const t=(e.data[this._mimeType]||"").trim().split(/\n/);i=JSON.parse(`[${t.join(",")}]`)}else i=e.data[this._mimeType]||{};const n=e.metadata[this._mimeType]||{};return null===this._rootDOM&&(this._rootDOM=(0,a.H)(this.node)),new Promise((e,r)=>{this._rootDOM.render(o.createElement(t,{data:i,metadata:n,translator:this.translator,forwardedRef:()=>e()}))})}onBeforeDetach(e){this._rootDOM&&(this._rootDOM.unmount(),this._rootDOM=null)}}const u={safe:!0,mimeTypes:[l,...c],createRenderer:e=>new d(e)},_=[{id:"@jupyterlab/json-extension:factory",description:"Adds renderer for JSON content.",rendererFactory:u,rank:0,dataType:"json",documentWidgetFactoryOptions:{name:"JSON",primaryFileType:"json",fileTypes:["json","notebook","geojson"],defaultFor:["json"]}},{id:"@jupyterlab/json-lines-extension:factory",description:"Adds renderer for JSONLines content.",rendererFactory:u,rank:0,dataType:"string",documentWidgetFactoryOptions:{name:"JSONLines",primaryFileType:"jsonl",fileTypes:["jsonl","ndjson"],defaultFor:["jsonl","ndjson"]}}]}}]);