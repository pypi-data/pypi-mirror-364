[package]
name = "core-common"
version = "0.1.0"
edition = "2021"
description = "Common types and utilities for the core crate"

[features]
default = ["python", "arbitrary", "database", "test_harness"]
python = ["pyo3", "rust_decimal/maths", "pythonize", "pyo3-stub-gen"]
arbitrary = ["quickcheck"]
database = ["postgres-types", "bytes", "rust_decimal/db-postgres"]
test_harness = []
console = ["console-subscriber"]

[dependencies]
core-macros = { path = "../macros" }
alloy-primitives = { version = "0.8.23" }
alloy-dyn-abi = { version = "0.8.23" }
alloy-sol-types = { version = "0.8.23" }
anyhow = { version = "1" }
thiserror = { version = "2" }
libsecp256k1 = { version = "0.7.1", default-features = false }
serde = { version = "1", features = ["derive"] }
serde_json = { version = "1.0" }
sparse-merkle-tree = { git = "https://github.com/jjyr/sparse-merkle-tree.git", rev = "b7932906aa2da6059c8ed19c93821fa78d271f73", default-features = false }
tracing = { version = "0.1", features = ["attributes"] }
tracing-subscriber = { version = "0.3", features = [
    "env-filter",
    "json",
    "time",
    "registry",
] }
# Console
console-subscriber = { version = "0.2.0", optional = true }
# Python types (should be in the python feature)
pyo3 = { version = "0.25", optional = true, features = ["multiple-pymethods"] }
pythonize = { version = "0.25", optional = true }
pyo3-stub-gen = { git = "https://github.com/Jij-Inc/pyo3-stub-gen.git", optional = true }
rust_decimal = { version = "1.34", features = ["serde"] }
strum = { version = "0.27.1", features = ["derive"] }
regex = "1.11.1"
arrayvec = { version = "0.7", default-features = false }
# Development and testing
quickcheck = { version = "1.0.3", optional = true }
# Database
postgres-types = { version = "0.2", features = [
    "derive",
    "with-serde_json-1",
], optional = true }
bytes = { version = "1.0", default-features = false, optional = true }

lazy_static = "1.4"
rustc-hex = { version = "2.1.0", default-features = false }
zerocopy = { version = "0.8.25" }
time = "0.3.17"
url = "2.5.4"
strum_macros = "0.27.1"
cfg-if = "1.0.0"
chrono = { version = "0.4", features = ["serde"] }
clap = "4.5.4"
derive_builder = "0.20.0"
backoff = { version = "0.4.0" }

[dev-dependencies]
rand = "0.8"
