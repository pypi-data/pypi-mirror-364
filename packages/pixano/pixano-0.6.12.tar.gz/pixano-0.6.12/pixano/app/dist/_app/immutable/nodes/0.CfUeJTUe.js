import{s as J,H as j,I as z,J as ne,K as le,L as se,M as oe,d as b,w as D,i as L,b as M,A as Be,c as F,e as U,g as H,h as K,j as R,k as Z,E as Ce,n as me,z as Oe,F as ze,o as pe,q as kt,m as wt,f as re,t as ae,a as de,P as At,G as Ht,B as Qe,C as Xe,a9 as Rt}from"../chunks/BeJwflgO.js";import{S as Q,i as X,d as k,t as g,a as d,m as w,e as I,b as T,g as ee,c as te}from"../chunks/CXBIDK6p.js";import{D as Ft,g as ie,f as fe,e as he,v as Kt,W as Ye,c as Ne,w as jt,x as Le,y as Ut,d as It,A as Re,C as ye,b as Fe,E as xe,F as Ve}from"../chunks/B81L-OfO.js";import{c as $e}from"../chunks/DPkO8WLB.js";import{k as Bt,p as et,S as Tt,a as Ot,c as zt,b as qt,d as Wt,C as Gt}from"../chunks/CoGE4j-f.js";import{T as G,C as St,P as Dt}from"../chunks/fM4OTL4z.js";import{p as Zt}from"../chunks/B9u33kEZ.js";import{f as Et,T as B,a as Jt,b as Ke,c as tt,e as Qt,s as _e,d as Nt,k as Mt,g as Te,t as je,n as Ue,p as Ee,h as Ct,i as Pt,j as Xt,l as ke,o as Se,q as De,m as nt}from"../chunks/BU7plhYt.js";import{I as ce,L as Yt,b as yt}from"../chunks/8RsWtykp.js";import{g as Ae}from"../chunks/BQqikIAS.js";import{p as Me}from"../chunks/CPVtFGAp.js";const xt=!1,en=!1,ns=Object.freeze(Object.defineProperty({__proto__:null,prerender:xt,ssr:en},Symbol.toStringTag,{value:"Module"}));async function tn(o){let e=[];try{const l=await fetch(`/browser/item_ids/${o}`);l.ok?e=await l.json():l.status!=404&&console.log("api.getDatasetItemsIds -",l.status,l.statusText,await l.text())}catch(l){console.log("api.getDatasetItemsIds -",l)}return e}async function nn(){let o,e;try{const l=await fetch("/datasets/info");l.ok?(o=await l.json(),e=o.map(t=>new Ft(t))):(e=[],console.log("api.getDatasetsInfo -",l.status,l.statusText,await l.text()))}catch(l){e=[],console.log("api.getDatasetsInfo -",l)}return e}async function ln(){let o;try{const e=await fetch("/models");e.ok?o=await e.json():(o=[],console.log("api.getModels -",e.status,e.statusText))}catch(e){o=[],console.log("api.getModels -",e)}return o}function sn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function on(o){let e,l;const t=[{name:"arrow-left-circle"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[sn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function rn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M16 12H8"}],["path",{d:"m12 8-4 4 4 4"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class an extends Q{constructor(e){super(),X(this,e,rn,on,J,{})}}function fn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function cn(o){let e,l;const t=[{name:"arrow-left"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[fn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function un(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m12 19-7-7 7-7"}],["path",{d:"M19 12H5"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class mn extends Q{constructor(e){super(),X(this,e,un,cn,J,{})}}function $n(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function dn(o){let e,l;const t=[{name:"arrow-right"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[$n]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function gn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M5 12h14"}],["path",{d:"m12 5 7 7-7 7"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class _n extends Q{constructor(e){super(),X(this,e,gn,dn,J,{})}}function pn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function hn(o){let e,l;const t=[{name:"database"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[pn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function bn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5"}],["path",{d:"M3 12A9 3 0 0 0 21 12"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class vn extends Q{constructor(e){super(),X(this,e,bn,hn,J,{})}}function kn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function wn(o){let e,l;const t=[{name:"home"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[kn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function In(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}],["polyline",{points:"9 22 9 12 15 12 15 22"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class Lt extends Q{constructor(e){super(),X(this,e,In,wn,J,{})}}function Tn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Sn(o){let e,l;const t=[{name:"minus-circle"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Tn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Dn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class En extends Q{constructor(e){super(),X(this,e,Dn,Sn,J,{})}}function Nn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Mn(o){let e,l;const t=[{name:"mouse-pointer"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Nn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Cn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m3 3 7.07 16.97 2.51-7.39 7.39-2.51L3 3z"}],["path",{d:"m13 13 6 6"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class Pn extends Q{constructor(e){super(),X(this,e,Cn,Mn,J,{})}}function Ln(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Vn(o){let e,l;const t=[{name:"plus-circle"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Ln]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function An(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"M8 12h8"}],["path",{d:"M12 8v8"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class Hn extends Q{constructor(e){super(),X(this,e,An,Vn,J,{})}}function Rn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Fn(o){let e,l;const t=[{name:"replace-all"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Rn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Kn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M14 4c0-1.1.9-2 2-2"}],["path",{d:"M20 2c1.1 0 2 .9 2 2"}],["path",{d:"M22 8c0 1.1-.9 2-2 2"}],["path",{d:"M16 10c-1.1 0-2-.9-2-2"}],["path",{d:"m3 7 3 3 3-3"}],["path",{d:"M6 10V5c0-1.7 1.3-3 3-3h1"}],["rect",{width:"8",height:"8",x:"2",y:"14",rx:"2"}],["path",{d:"M14 14c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2"}],["path",{d:"M20 14c1.1 0 2 .9 2 2v4c0 1.1-.9 2-2 2"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class jn extends Q{constructor(e){super(),X(this,e,Kn,Fn,J,{})}}function Un(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Bn(o){let e,l;const t=[{name:"wand-2"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[Un]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function On(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72Z"}],["path",{d:"m14 7 3 3"}],["path",{d:"M5 6v4"}],["path",{d:"M19 14v4"}],["path",{d:"M10 2v2"}],["path",{d:"M7 8H3"}],["path",{d:"M21 16h-4"}],["path",{d:"M11 3H9"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class zn extends Q{constructor(e){super(),X(this,e,On,Bn,J,{})}}function qn(o){let e;const l=o[2].default,t=ne(l,o,o[3],null);return{c(){t&&t.c()},l(n){t&&t.l(n)},m(n,s){t&&t.m(n,s),e=!0},p(n,s){t&&t.p&&(!e||s&8)&&le(t,l,n,n[3],e?oe(l,n[3],s,null):se(n[3]),null)},i(n){e||(d(t,n),e=!0)},o(n){g(t,n),e=!1},d(n){t&&t.d(n)}}}function Wn(o){let e,l;const t=[{name:"x"},o[1],{iconNode:o[0]}];let n={$$slots:{default:[qn]},$$scope:{ctx:o}};for(let s=0;s<t.length;s+=1)n=j(n,t[s]);return e=new ce({props:n}),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,[r]){const i=r&3?ie(t,[t[0],r&2&&fe(s[1]),r&1&&{iconNode:s[0]}]):{};r&8&&(i.$$scope={dirty:r,ctx:s}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function Gn(o,e,l){let{$$slots:t={},$$scope:n}=e;const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];return o.$$set=r=>{l(1,e=j(j({},e),z(r))),"$$scope"in r&&l(3,n=r.$$scope)},e=z(e),[s,e,t,n]}class Vt extends Q{constructor(e){super(),X(this,e,Gn,Wn,J,{})}}const Zn=""+new URL("../assets/favicon.OuiISzV3.ico",import.meta.url).href;function Jn(o){let e,l;return e=new jn({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function lt(o){let e,l,t,n;return e=new G({props:{tooltipContent:"Validate association (Enter)",selected:!1,$$slots:{default:[Qn]},$$scope:{ctx:o}}}),e.$on("click",o[2]),t=new G({props:{tooltipContent:"Abort association (Escape)",selected:!1,$$slots:{default:[Xn]},$$scope:{ctx:o}}}),t.$on("click",o[3]),{c(){T(e.$$.fragment),l=R(),T(t.$$.fragment)},l(s){I(e.$$.fragment,s),l=H(s),I(t.$$.fragment,s)},m(s,r){w(e,s,r),L(s,l,r),w(t,s,r),n=!0},p(s,r){const i={};r&256&&(i.$$scope={dirty:r,ctx:s}),e.$set(i);const a={};r&256&&(a.$$scope={dirty:r,ctx:s}),t.$set(a)},i(s){n||(d(e.$$.fragment,s),d(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&b(l),k(e,s),k(t,s)}}}function Qn(o){let e,l;return e=new St({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Xn(o){let e,l;return e=new Vt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Yn(o){var u,m;let e,l,t,n,s,r,i;l=new G({props:{tooltipContent:Et.name,selected:((u=o[1])==null?void 0:u.type)===B.Fusion,$$slots:{default:[Jn]},$$scope:{ctx:o}}}),l.$on("click",o[6]);let a=((m=o[1])==null?void 0:m.type)===B.Fusion&&lt(o);return{c(){e=K("div"),T(l.$$.fragment),t=R(),a&&a.c(),this.h()},l($){e=F($,"DIV",{class:!0});var c=U(e);I(l.$$.fragment,c),t=H(c),a&&a.l(c),c.forEach(b),this.h()},h(){var $;D(e,"class",n=$e("flex items-center gap-4",{"bg-slate-200 rounded-sm":(($=o[1])==null?void 0:$.type)===B.Fusion}))},m($,c){L($,e,c),w(l,e,null),M(e,t),a&&a.m(e,null),s=!0,r||(i=Be(window,"keydown",o[4]),r=!0)},p($,[c]){var S,v,f;const _={};c&2&&(_.selected=((S=$[1])==null?void 0:S.type)===B.Fusion),c&256&&(_.$$scope={dirty:c,ctx:$}),l.$set(_),((v=$[1])==null?void 0:v.type)===B.Fusion?a?(a.p($,c),c&2&&d(a,1)):(a=lt($),a.c(),d(a,1),a.m(e,null)):a&&(ee(),g(a,1,1,()=>{a=null}),te()),(!s||c&2&&n!==(n=$e("flex items-center gap-4",{"bg-slate-200 rounded-sm":((f=$[1])==null?void 0:f.type)===B.Fusion})))&&D(e,"class",n)},i($){s||(d(l.$$.fragment,$),d(a),s=!0)},o($){g(l.$$.fragment,$),g(a),s=!1},d($){$&&b(e),k(l),a&&a.d(),r=!1,i()}}}function yn(o,e,l){let t,n;Z(o,_e,$=>l(1,t=$)),Z(o,Nt,$=>l(7,n=$));let{selectTool:s}=e,{clearFusionHighlighting:r}=e;const i=()=>{let $=[];if(n.to_fuse.length>1){const[c,..._]=n.to_fuse;_.forEach(S=>{S.ui.childs&&($=[...$,...S.ui.childs])}),Jt.update(S=>S.map(v=>{if($.includes(v)){if(v.ui.top_entities&&v.ui.top_entities.length>0&&v.data.entity_ref.id!==v.ui.top_entities[0].id)return console.error("ERROR: Sub entities currently not managed for fusion.",v),v;v.data.entity_ref={id:c.id,name:c.table_info.name},v.ui.top_entities=[c];const f={change_type:"update",object:v};Ke.update(p=>tt(p,f))}return v})),Qt.update(S=>{const v=S.filter(f=>!_.includes(f));return v.length>0&&v.map(f=>(f.id===c.id&&(f.ui.childs=f.ui.childs?[...f.ui.childs,...$]:$),f)),v}),_.forEach(S=>{const v={change_type:"delete",object:S};Ke.update(f=>tt(f,v))})}r()},a=()=>{r()};function u($){if((t==null?void 0:t.type)!==B.Fusion)return;const c=document.activeElement;if(!(c instanceof HTMLInputElement||c instanceof HTMLTextAreaElement||(c==null?void 0:c.getAttribute("contenteditable"))==="true"))switch($.key){case"Escape":a();break;case"Enter":i();break}}const m=()=>s(Et);return o.$$set=$=>{"selectTool"in $&&l(0,s=$.selectTool),"clearFusionHighlighting"in $&&l(5,r=$.clearFusionHighlighting)},[s,t,i,a,u,r,m]}class xn extends Q{constructor(e){super(),X(this,e,yn,Yn,J,{selectTool:0,clearFusionHighlighting:5})}}function st(o,e,l){const t=o.slice();return t[8]=e[l],t}function ot(o,e,l){const t=o.slice();return t[11]=e[l],t}function el(o){let e,l;return{c(){e=K("img"),this.h()},l(t){e=F(t,"IMG",{src:!0,alt:!0}),this.h()},h(){Oe(e.src,l=Bt)||D(e,"src",l),D(e,"alt","keypoints icon")},m(t,n){L(t,e,n)},p:me,d(t){t&&b(e)}}}function rt(o){let e,l,t=he(je),n=[];for(let r=0;r<t.length;r+=1)n[r]=it(st(o,t,r));const s=r=>g(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=pe()},l(r){for(let i=0;i<n.length;i+=1)n[i].l(r);e=pe()},m(r,i){for(let a=0;a<n.length;a+=1)n[a]&&n[a].m(r,i);L(r,e,i),l=!0},p(r,i){if(i&28){t=he(je);let a;for(a=0;a<t.length;a+=1){const u=st(r,t,a);n[a]?(n[a].p(u,i),d(n[a],1)):(n[a]=it(u),n[a].c(),d(n[a],1),n[a].m(e.parentNode,e))}for(ee(),a=t.length;a<n.length;a+=1)s(a);te()}},i(r){if(!l){for(let i=0;i<t.length;i+=1)d(n[i]);l=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)g(n[i]);l=!1},d(r){r&&b(e),ze(n,r)}}}function at(o){let e,l,t;return{c(){e=K("div"),l=K("div"),this.h()},l(n){e=F(n,"DIV",{});var s=U(e);l=F(s,"DIV",{class:!0,style:!0}),U(l).forEach(b),s.forEach(b),this.h()},h(){D(l,"class","w-1 h-1 bg-primary rounded-full absolute"),D(l,"style",t=`top: ${o[11].y*100}%; left: ${o[11].x*100}%; background: ${o[3](o[11],o[8].template_id===o[2])}`)},m(n,s){L(n,e,s),M(e,l)},p(n,s){s&4&&t!==(t=`top: ${n[11].y*100}%; left: ${n[11].x*100}%; background: ${n[3](n[11],n[8].template_id===n[2])}`)&&D(l,"style",t)},d(n){n&&b(e)}}}function tl(o){let e,l=he(o[8].vertices),t=[];for(let n=0;n<l.length;n+=1)t[n]=at(ot(o,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=R()},l(n){for(let s=0;s<t.length;s+=1)t[s].l(n);e=H(n)},m(n,s){for(let r=0;r<t.length;r+=1)t[r]&&t[r].m(n,s);L(n,e,s)},p(n,s){if(s&12){l=he(n[8].vertices);let r;for(r=0;r<l.length;r+=1){const i=ot(n,l,r);t[r]?t[r].p(i,s):(t[r]=at(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=l.length}},d(n){n&&b(e),ze(t,n)}}}function it(o){let e,l;function t(){return o[6](o[8])}return e=new G({props:{tooltipContent:o[8].template_id,selected:o[2]===o[8].template_id,$$slots:{default:[tl]},$$scope:{ctx:o}}}),e.$on("click",t),{c(){T(e.$$.fragment)},l(n){I(e.$$.fragment,n)},m(n,s){w(e,n,s),l=!0},p(n,s){o=n;const r={};s&4&&(r.selected=o[2]===o[8].template_id),s&16388&&(r.$$scope={dirty:s,ctx:o}),e.$set(r)},i(n){l||(d(e.$$.fragment,n),l=!0)},o(n){g(e.$$.fragment,n),l=!1},d(n){k(e,n)}}}function nl(o){var i;let e,l,t,n,s;l=new G({props:{tooltipContent:Mt.name,$$slots:{default:[el]},$$scope:{ctx:o}}}),l.$on("click",o[5]);let r=((i=o[1])==null?void 0:i.type)===B.Keypoint&&rt(o);return{c(){e=K("div"),T(l.$$.fragment),t=R(),r&&r.c(),this.h()},l(a){e=F(a,"DIV",{class:!0});var u=U(e);I(l.$$.fragment,u),t=H(u),r&&r.l(u),u.forEach(b),this.h()},h(){var a;D(e,"class",n=$e("flex items-center gap-4",{"bg-slate-200 rounded-sm":((a=o[1])==null?void 0:a.type)===B.Keypoint}))},m(a,u){L(a,e,u),w(l,e,null),M(e,t),r&&r.m(e,null),s=!0},p(a,[u]){var $,c;const m={};u&16384&&(m.$$scope={dirty:u,ctx:a}),l.$set(m),(($=a[1])==null?void 0:$.type)===B.Keypoint?r?(r.p(a,u),u&2&&d(r,1)):(r=rt(a),r.c(),d(r,1),r.m(e,null)):r&&(ee(),g(r,1,1,()=>{r=null}),te()),(!s||u&2&&n!==(n=$e("flex items-center gap-4",{"bg-slate-200 rounded-sm":((c=a[1])==null?void 0:c.type)===B.Keypoint})))&&D(e,"class",n)},i(a){s||(d(l.$$.fragment,a),d(r),s=!0)},o(a){g(l.$$.fragment,a),g(r),s=!1},d(a){a&&b(e),k(l),r&&r.d()}}}function ll(o,e,l){let t,n;Z(o,_e,$=>l(1,t=$)),Z(o,Te,$=>l(2,n=$));let{selectTool:s}=e;const r=($,c)=>{var _;if((_=$.features)!=null&&_.color)return $.features.color;if(c)return"white"},i=$=>{Te.set($),Ue.set({status:"none"})},a=_e.subscribe($=>{($==null?void 0:$.type)!==B.Keypoint?Te.set(null):Te.set(je[0].template_id)});Ce(a);const u=()=>s(Mt),m=$=>i($.template_id);return o.$$set=$=>{"selectTool"in $&&l(0,s=$.selectTool)},[s,t,n,r,i,u,m]}class sl extends Q{constructor(e){super(),X(this,e,ll,nl,J,{selectTool:0})}}function ol(o){let e,l;return e=new Pn({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function rl(o){let e,l;return e=new Tt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function al(o){let e,l;return{c(){e=K("img"),this.h()},l(t){e=F(t,"IMG",{src:!0,alt:!0}),this.h()},h(){Oe(e.src,l=Ot)||D(e,"src",l),D(e,"alt","polygon icon")},m(t,n){L(t,e,n)},p:me,d(t){t&&b(e)}}}function ft(o){let e,l;return e=new xn({props:{selectTool:o[8],clearFusionHighlighting:o[7]}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},p:me,i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function il(o){let e,l;return e=new zn({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ct(o){var _,S,v;let e,l,t,n,s,r,i,a,u,m,$;e=new G({props:{tooltipContent:o[2].name,selected:((_=o[1])==null?void 0:_.type)===B.PointSelection&&!!o[1].label,$$slots:{default:[fl]},$$scope:{ctx:o}}}),e.$on("click",o[16]),t=new G({props:{tooltipContent:o[3].name,selected:((S=o[1])==null?void 0:S.type)===B.PointSelection&&!o[1].label,$$slots:{default:[cl]},$$scope:{ctx:o}}}),t.$on("click",o[17]),s=new G({props:{tooltipContent:o[4].name,selected:((v=o[1])==null?void 0:v.type)===B.Rectangle&&o[1].isSmart,$$slots:{default:[ul]},$$scope:{ctx:o}}}),s.$on("click",o[18]);let c=o[0]&&o[6].mustValidate&&ut(o);return m=new G({props:{tooltipContent:"Smart segmentation model settings",$$slots:{default:[dl]},$$scope:{ctx:o}}}),m.$on("click",o[20]),{c(){T(e.$$.fragment),l=R(),T(t.$$.fragment),n=R(),T(s.$$.fragment),r=R(),c&&c.c(),i=R(),a=K("div"),u=R(),T(m.$$.fragment),this.h()},l(f){I(e.$$.fragment,f),l=H(f),I(t.$$.fragment,f),n=H(f),I(s.$$.fragment,f),r=H(f),c&&c.l(f),i=H(f),a=F(f,"DIV",{class:!0}),U(a).forEach(b),u=H(f),I(m.$$.fragment,f),this.h()},h(){D(a,"class","w-1 -m-3.5 h-full bg-primary-light")},m(f,p){w(e,f,p),L(f,l,p),w(t,f,p),L(f,n,p),w(s,f,p),L(f,r,p),c&&c.m(f,p),L(f,i,p),L(f,a,p),L(f,u,p),w(m,f,p),$=!0},p(f,p){var E,C,A;const h={};p&4&&(h.tooltipContent=f[2].name),p&2&&(h.selected=((E=f[1])==null?void 0:E.type)===B.PointSelection&&!!f[1].label),p&33554432&&(h.$$scope={dirty:p,ctx:f}),e.$set(h);const N={};p&8&&(N.tooltipContent=f[3].name),p&2&&(N.selected=((C=f[1])==null?void 0:C.type)===B.PointSelection&&!f[1].label),p&33554432&&(N.$$scope={dirty:p,ctx:f}),t.$set(N);const O={};p&16&&(O.tooltipContent=f[4].name),p&2&&(O.selected=((A=f[1])==null?void 0:A.type)===B.Rectangle&&f[1].isSmart),p&33554432&&(O.$$scope={dirty:p,ctx:f}),s.$set(O),f[0]&&f[6].mustValidate?c?(c.p(f,p),p&65&&d(c,1)):(c=ut(f),c.c(),d(c,1),c.m(i.parentNode,i)):c&&(ee(),g(c,1,1,()=>{c=null}),te());const q={};p&33554432&&(q.$$scope={dirty:p,ctx:f}),m.$set(q)},i(f){$||(d(e.$$.fragment,f),d(t.$$.fragment,f),d(s.$$.fragment,f),d(c),d(m.$$.fragment,f),$=!0)},o(f){g(e.$$.fragment,f),g(t.$$.fragment,f),g(s.$$.fragment,f),g(c),g(m.$$.fragment,f),$=!1},d(f){f&&(b(l),b(n),b(r),b(i),b(a),b(u)),k(e,f),k(t,f),k(s,f),c&&c.d(f),k(m,f)}}}function fl(o){let e,l;return e=new Hn({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function cl(o){let e,l;return e=new En({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ul(o){let e,l;return e=new Tt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function ut(o){let e,l,t,n;return e=new G({props:{tooltipContent:"Track",selected:!1,$$slots:{default:[ml]},$$scope:{ctx:o}}}),e.$on("click",o[19]),t=new G({props:{tooltipContent:"Abort tracking (Escape)",selected:!1,$$slots:{default:[$l]},$$scope:{ctx:o}}}),t.$on("click",o[10]),{c(){T(e.$$.fragment),l=R(),T(t.$$.fragment)},l(s){I(e.$$.fragment,s),l=H(s),I(t.$$.fragment,s)},m(s,r){w(e,s,r),L(s,l,r),w(t,s,r),n=!0},p(s,r){const i={};r&33554432&&(i.$$scope={dirty:r,ctx:s}),e.$set(i);const a={};r&33554432&&(a.$$scope={dirty:r,ctx:s}),t.$set(a)},i(s){n||(d(e.$$.fragment,s),d(t.$$.fragment,s),n=!0)},o(s){g(e.$$.fragment,s),g(t.$$.fragment,s),n=!1},d(s){s&&b(l),k(e,s),k(t,s)}}}function ml(o){let e,l;return e=new St({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function $l(o){let e,l;return e=new Vt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function dl(o){let e,l;return e=new qt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function gl(o){var N,O,q;let e,l,t,n,s,r,i,a,u,m,$,c,_,S,v,f;t=new G({props:{tooltipContent:Ee.name,selected:((N=o[1])==null?void 0:N.type)===B.Pan,$$slots:{default:[ol]},$$scope:{ctx:o}}}),t.$on("click",o[13]),s=new G({props:{tooltipContent:Ct.name,selected:((O=o[1])==null?void 0:O.type)===B.Rectangle&&!o[1].isSmart,$$slots:{default:[rl]},$$scope:{ctx:o}}}),s.$on("click",o[14]),i=new G({props:{tooltipContent:Pt.name,selected:((q=o[1])==null?void 0:q.type)===B.Polygon,$$slots:{default:[al]},$$scope:{ctx:o}}}),i.$on("click",o[15]),u=new sl({props:{selectTool:o[8]}});let p=o[0]&&ft(o);_=new G({props:{tooltipContent:"Use a smart segmentation model",$$slots:{default:[il]},$$scope:{ctx:o}}}),_.$on("click",o[9]);let h=o[5]&&ct(o);return{c(){e=K("div"),l=K("div"),T(t.$$.fragment),n=R(),T(s.$$.fragment),r=R(),T(i.$$.fragment),a=R(),T(u.$$.fragment),m=R(),p&&p.c(),$=R(),c=K("div"),T(_.$$.fragment),S=R(),h&&h.c(),this.h()},l(E){e=F(E,"DIV",{class:!0});var C=U(e);l=F(C,"DIV",{class:!0});var A=U(l);I(t.$$.fragment,A),n=H(A),I(s.$$.fragment,A),r=H(A),I(i.$$.fragment,A),a=H(A),I(u.$$.fragment,A),m=H(A),p&&p.l(A),A.forEach(b),$=H(C),c=F(C,"DIV",{class:!0});var P=U(c);I(_.$$.fragment,P),S=H(P),h&&h.l(P),P.forEach(b),C.forEach(b),this.h()},h(){D(l,"class","flex items-center gap-4"),D(c,"class",v=$e("flex items-center gap-4",{"bg-slate-200 rounded-sm":o[5]})),D(e,"class","flex gap-4 z-10")},m(E,C){L(E,e,C),M(e,l),w(t,l,null),M(l,n),w(s,l,null),M(l,r),w(i,l,null),M(l,a),w(u,l,null),M(l,m),p&&p.m(l,null),M(e,$),M(e,c),w(_,c,null),M(c,S),h&&h.m(c,null),f=!0},p(E,[C]){var x,ue,be;const A={};C&2&&(A.selected=((x=E[1])==null?void 0:x.type)===B.Pan),C&33554432&&(A.$$scope={dirty:C,ctx:E}),t.$set(A);const P={};C&2&&(P.selected=((ue=E[1])==null?void 0:ue.type)===B.Rectangle&&!E[1].isSmart),C&33554432&&(P.$$scope={dirty:C,ctx:E}),s.$set(P);const Y={};C&2&&(Y.selected=((be=E[1])==null?void 0:be.type)===B.Polygon),C&33554432&&(Y.$$scope={dirty:C,ctx:E}),i.$set(Y),E[0]?p?(p.p(E,C),C&1&&d(p,1)):(p=ft(E),p.c(),d(p,1),p.m(l,null)):p&&(ee(),g(p,1,1,()=>{p=null}),te());const V={};C&33554432&&(V.$$scope={dirty:C,ctx:E}),_.$set(V),E[5]?h?(h.p(E,C),C&32&&d(h,1)):(h=ct(E),h.c(),d(h,1),h.m(c,null)):h&&(ee(),g(h,1,1,()=>{h=null}),te()),(!f||C&32&&v!==(v=$e("flex items-center gap-4",{"bg-slate-200 rounded-sm":E[5]})))&&D(c,"class",v)},i(E){f||(d(t.$$.fragment,E),d(s.$$.fragment,E),d(i.$$.fragment,E),d(u.$$.fragment,E),d(p),d(_.$$.fragment,E),d(h),f=!0)},o(E){g(t.$$.fragment,E),g(s.$$.fragment,E),g(i.$$.fragment,E),g(u.$$.fragment,E),g(p),g(_.$$.fragment,E),g(h),f=!1},d(E){E&&b(e),k(t),k(s),k(i),k(u),p&&p.d(),k(_),h&&h.d()}}}function _l(o,e,l){let t,n,s,r,i,a;Z(o,_e,P=>l(1,n=P)),Z(o,Wt,P=>l(21,s=P)),Z(o,Kt,P=>l(22,r=P)),Z(o,nt,P=>l(23,i=P)),Z(o,et,P=>l(6,a=P));let{isVideo:u=!1}=e,m=null;const $=()=>{zt(),Nt.set({to_fuse:[],forbids:[]})},c=P=>{P!==n&&($(),_e.set(P))},_=()=>{t?c(Ee):(c(ke),(r&&(i.selectedModelName===""||i.selectedTableName==="")||!r&&s.filter(P=>P.selected).length>0)&&v())},S=()=>{Ue.set({status:"none",shouldReset:!0})},v=()=>{nt.update(P=>({...P,currentModalOpen:"selectModel"}))},f=Xt.subscribe(P=>{P&&(l(2,ke.postProcessor=P,ke),l(3,Se.postProcessor=P,Se),l(4,De.postProcessor=P,De))});Ce(f),kt(()=>{n===void 0&&_e.set(Ee),$()});const p=()=>c(Ee),h=()=>c(Ct),N=()=>c(Pt),O=()=>c(ke),q=()=>c(Se),E=()=>c(De),C=()=>et.set({...a,validated:!0}),A=()=>v();return o.$$set=P=>{"isVideo"in P&&l(0,u=P.isVideo)},o.$$.update=()=>{o.$$.dirty&2&&l(5,t=n&&n.isSmart),o.$$.dirty&4098&&((!(m!=null&&m.isSmart)||!(n!=null&&n.isSmart))&&Ue.set({status:"none"}),l(12,m=n))},[u,n,ke,Se,De,t,a,$,c,_,S,v,m,p,h,N,O,q,E,C,A]}class pl extends Q{constructor(e){super(),X(this,e,_l,gl,J,{isVideo:0})}}function mt(o){let e,l,t,n;const s=[bl,hl],r=[];function i(a,u){return a[1]?0:1}return e=i(o),l=r[e]=s[e](o),{c(){l.c(),t=pe()},l(a){l.l(a),t=pe()},m(a,u){r[e].m(a,u),L(a,t,u),n=!0},p(a,u){let m=e;e=i(a),e===m?r[e].p(a,u):(ee(),g(r[m],1,1,()=>{r[m]=null}),te(),l=r[e],l?l.p(a,u):(l=r[e]=s[e](a),l.c()),d(l,1),l.m(t.parentNode,t))},i(a){n||(d(l),n=!0)},o(a){g(l),n=!1},d(a){a&&b(t),r[e].d(a)}}}function hl(o){let e,l,t,n,s,r,i,a,u,m,$,c,_=o[6]()+"",S,v,f,p;return l=new G({props:{tooltipContent:"Back to Home",$$slots:{default:[vl]},$$scope:{ctx:o}}}),l.$on("click",o[10]),n=new G({props:{tooltipContent:"Back to dataset",$$slots:{default:[kl]},$$scope:{ctx:o}}}),n.$on("click",function(){wt(o[3])&&o[3].apply(this,arguments)}),a=new G({props:{tooltipContent:"Previous item (Shift + Left / Shift + A or Q)",$$slots:{default:[wl]},$$scope:{ctx:o}}}),a.$on("click",o[11]),m=new G({props:{tooltipContent:"Next item (Shift + Right / Shift + D)",$$slots:{default:[Il]},$$scope:{ctx:o}}}),m.$on("click",o[12]),f=new pl({props:{isVideo:o[7].workspace===Ye.VIDEO}}),{c(){e=K("div"),T(l.$$.fragment),t=R(),T(n.$$.fragment),s=R(),r=ae(o[0]),i=R(),T(a.$$.fragment),u=R(),T(m.$$.fragment),$=R(),c=K("span"),S=ae(_),v=R(),T(f.$$.fragment),this.h()},l(h){e=F(h,"DIV",{class:!0});var N=U(e);I(l.$$.fragment,N),t=H(N),I(n.$$.fragment,N),s=H(N),r=re(N,o[0]),i=H(N),I(a.$$.fragment,N),u=H(N),I(m.$$.fragment,N),$=H(N),c=F(N,"SPAN",{});var O=U(c);S=re(O,_),O.forEach(b),N.forEach(b),v=H(h),I(f.$$.fragment,h),this.h()},h(){D(e,"class","flex items-center gap-4")},m(h,N){L(h,e,N),w(l,e,null),M(e,t),w(n,e,null),M(e,s),M(e,r),M(e,i),w(a,e,null),M(e,u),w(m,e,null),M(e,$),M(e,c),M(c,S),L(h,v,N),w(f,h,N),p=!0},p(h,N){o=h;const O={};N&8192&&(O.$$scope={dirty:N,ctx:o}),l.$set(O);const q={};N&8192&&(q.$$scope={dirty:N,ctx:o}),n.$set(q),(!p||N&1)&&de(r,o[0]);const E={};N&8192&&(E.$$scope={dirty:N,ctx:o}),a.$set(E);const C={};N&8192&&(C.$$scope={dirty:N,ctx:o}),m.$set(C),(!p||N&64)&&_!==(_=o[6]()+"")&&de(S,_);const A={};N&128&&(A.isVideo=o[7].workspace===Ye.VIDEO),f.$set(A)},i(h){p||(d(l.$$.fragment,h),d(n.$$.fragment,h),d(a.$$.fragment,h),d(m.$$.fragment,h),d(f.$$.fragment,h),p=!0)},o(h){g(l.$$.fragment,h),g(n.$$.fragment,h),g(a.$$.fragment,h),g(m.$$.fragment,h),g(f.$$.fragment,h),p=!1},d(h){h&&(b(e),b(v)),k(l),k(n),k(a),k(m),k(f,h)}}}function bl(o){let e,l;return e=new Yt({props:{class:"animate-spin"}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},p:me,i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function vl(o){let e,l;return e=new Lt({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function kl(o){let e,l;return e=new an({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function wl(o){let e,l;return e=new mn({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Il(o){let e,l;return e=new _n({}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Tl(o){let e;return{c(){e=ae("Save")},l(l){e=re(l,"Save")},m(l,t){L(l,e,t)},d(l){l&&b(e)}}}function Sl(o){let e,l,t,n,s,r=o[0]&&mt(o);return l=new Dt({props:{disabled:o[8].length===0,brighter:o[8].length>0,$$slots:{default:[Tl]},$$scope:{ctx:o}}}),l.$on("click",function(){wt(o[4])&&o[4].apply(this,arguments)}),{c(){r&&r.c(),e=R(),T(l.$$.fragment)},l(i){r&&r.l(i),e=H(i),I(l.$$.fragment,i)},m(i,a){r&&r.m(i,a),L(i,e,a),w(l,i,a),t=!0,n||(s=Be(window,"keyup",o[9]),n=!0)},p(i,[a]){o=i,o[0]?r?(r.p(o,a),a&1&&d(r,1)):(r=mt(o),r.c(),d(r,1),r.m(e.parentNode,e)):r&&(ee(),g(r,1,1,()=>{r=null}),te());const u={};a&256&&(u.disabled=o[8].length===0),a&256&&(u.brighter=o[8].length>0),a&8192&&(u.$$scope={dirty:a,ctx:o}),l.$set(u)},i(i){t||(d(r),d(l.$$.fragment,i),t=!0)},o(i){g(r),g(l.$$.fragment,i),t=!1},d(i){i&&b(e),r&&r.d(i),k(l,i),n=!1,s()}}}function Dl(o,e,l){let t,n;Z(o,Ne,f=>l(7,t=f)),Z(o,Ke,f=>l(8,n=f));let{currentItemId:s}=e,{isLoading:r}=e,{goToNeighborItem:i}=e,{handleReturnToPreviousPage:a}=e,{handleSave:u}=e,{navigateTo:m}=e,{getDatasetItemDisplayCount:$}=e;const c=async f=>{var h;const p=document.activeElement;if(p instanceof HTMLInputElement||p instanceof HTMLTextAreaElement||(p==null?void 0:p.getAttribute("contenteditable"))==="true"||((h=f.target)==null?void 0:h.tagName)==="INPUT"){f.preventDefault(),f.stopPropagation();return}if(f.shiftKey)switch(f.code){case"ArrowRight":case"KeyD":await i("next");break;case"ArrowLeft":case"KeyA":await i("previous");break}return f.key},_=()=>m("/"),S=()=>i("previous"),v=()=>i("next");return o.$$set=f=>{"currentItemId"in f&&l(0,s=f.currentItemId),"isLoading"in f&&l(1,r=f.isLoading),"goToNeighborItem"in f&&l(2,i=f.goToNeighborItem),"handleReturnToPreviousPage"in f&&l(3,a=f.handleReturnToPreviousPage),"handleSave"in f&&l(4,u=f.handleSave),"navigateTo"in f&&l(5,m=f.navigateTo),"getDatasetItemDisplayCount"in f&&l(6,$=f.getDatasetItemDisplayCount)},[s,r,i,a,u,m,$,t,n,c,_,S,v]}class El extends Q{constructor(e){super(),X(this,e,Dl,Sl,J,{currentItemId:0,isLoading:1,goToNeighborItem:2,handleReturnToPreviousPage:3,handleSave:4,navigateTo:5,getDatasetItemDisplayCount:6})}}const Nl=(o,e,l)=>{const t=o.findIndex(n=>n===l);if(t!==-1){const n=e==="previous"?t-1:t+1;return n===-1?o[o.length-1]:n===o.length?o[0]:o[n]}},Ml=(o,e)=>{const l=o.findIndex(t=>t===e);return Math.floor(l/jt)+1},$t=[{name:"Dashboard",Icon:Lt},{name:"Dataset",Icon:vn}];function dt(o,e,l){const t=o.slice();return t[24]=e[l].name,t[25]=e[l].Icon,t}function Cl(o){let e,l,t,n=o[4]&&gt(o),s=he($t),r=[];for(let a=0;a<s.length;a+=1)r[a]=_t(dt(o,s,a));const i=a=>g(r[a],1,1,()=>{r[a]=null});return{c(){n&&n.c(),e=R(),l=K("div");for(let a=0;a<r.length;a+=1)r[a].c();this.h()},l(a){n&&n.l(a),e=H(a),l=F(a,"DIV",{class:!0});var u=U(l);for(let m=0;m<r.length;m+=1)r[m].l(u);u.forEach(b),this.h()},h(){D(l,"class","flex gap-4")},m(a,u){n&&n.m(a,u),L(a,e,u),L(a,l,u);for(let m=0;m<r.length;m+=1)r[m]&&r[m].m(l,null);t=!0},p(a,u){if(a[4]?n?(n.p(a,u),u&16&&d(n,1)):(n=gt(a),n.c(),d(n,1),n.m(e.parentNode,e)):n&&(ee(),g(n,1,1,()=>{n=null}),te()),u&8209){s=he($t);let m;for(m=0;m<s.length;m+=1){const $=dt(a,s,m);r[m]?(r[m].p($,u),d(r[m],1)):(r[m]=_t($),r[m].c(),d(r[m],1),r[m].m(l,null))}for(ee(),m=s.length;m<r.length;m+=1)i(m);te()}},i(a){if(!t){d(n);for(let u=0;u<s.length;u+=1)d(r[u]);t=!0}},o(a){g(n),r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)g(r[u]);t=!1},d(a){a&&(b(e),b(l)),n&&n.d(a),ze(r,a)}}}function Pl(o){let e,l;return e=new El({props:{currentItemId:o[1],isLoading:o[2],handleSave:o[9],goToNeighborItem:o[8],handleReturnToPreviousPage:o[12],navigateTo:o[13],getDatasetItemDisplayCount:o[7]}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.currentItemId=t[1]),n&4&&(s.isLoading=t[2]),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function gt(o){let e,l,t,n,s,r=o[4].name+"",i,a;return n=new G({props:{tooltipContent:"Back to Home",$$slots:{default:[Ll]},$$scope:{ctx:o}}}),n.$on("click",o[15]),{c(){e=K("div"),l=K("div"),t=K("div"),T(n.$$.fragment),s=R(),i=ae(r),this.h()},l(u){e=F(u,"DIV",{class:!0});var m=U(e);l=F(m,"DIV",{class:!0});var $=U(l);t=F($,"DIV",{class:!0});var c=U(t);I(n.$$.fragment,c),c.forEach(b),s=H($),i=re($,r),$.forEach(b),m.forEach(b),this.h()},h(){D(t,"class","h-10 w-10"),D(l,"class","flex gap-4 items-center font-light"),D(e,"class","h-10 flex items-center font-semibold text-2xl")},m(u,m){L(u,e,m),M(e,l),M(l,t),w(n,t,null),M(l,s),M(l,i),a=!0},p(u,m){const $={};m&268435456&&($.$$scope={dirty:m,ctx:u}),n.$set($),(!a||m&16)&&r!==(r=u[4].name+"")&&de(i,r)},i(u){a||(d(n.$$.fragment,u),a=!0)},o(u){g(n.$$.fragment,u),a=!1},d(u){u&&b(e),k(n)}}}function Ll(o){let e,l;return{c(){e=K("img"),this.h()},l(t){e=F(t,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){Oe(e.src,l=Zt)||D(e,"src",l),D(e,"alt","Logo Pixano"),D(e,"class","w-8 h-8 mx-2")},m(t,n){L(t,e,n)},p:me,d(t){t&&b(e)}}}function Vl(o){let e,l,t,n,s;return e=new o[25]({props:{strokeWidth:1}}),{c(){T(e.$$.fragment),l=R(),t=ae(o[24]),n=R()},l(r){I(e.$$.fragment,r),l=H(r),t=re(r,o[24]),n=H(r)},m(r,i){w(e,r,i),L(r,l,i),L(r,t,i),L(r,n,i),s=!0},p:me,i(r){s||(d(e.$$.fragment,r),s=!0)},o(r){g(e.$$.fragment,r),s=!1},d(r){r&&(b(l),b(t),b(n)),k(e,r)}}}function _t(o){var n;let e,l;function t(){return o[16](o[24])}return e=new Dt({props:{isSelected:(n=o[0])==null?void 0:n.includes(`/${o[24]}`.toLowerCase()),$$slots:{default:[Vl]},$$scope:{ctx:o}}}),e.$on("click",t),{c(){T(e.$$.fragment)},l(s){I(e.$$.fragment,s)},m(s,r){w(e,s,r),l=!0},p(s,r){var a;o=s;const i={};r&1&&(i.isSelected=(a=o[0])==null?void 0:a.includes(`/${o[24]}`.toLowerCase())),r&268435456&&(i.$$scope={dirty:r,ctx:o}),e.$set(i)},i(s){l||(d(e.$$.fragment,s),l=!0)},o(s){g(e.$$.fragment,s),l=!1},d(s){k(e,s)}}}function pt(o){let e,l;return e=new Gt({props:{message:"You have unsaved changes",confirm:"Save and continue",alternativeAction:"Continue without saving"}}),e.$on("confirm",o[10]),e.$on("alternative",o[11]),e.$on("cancel",o[17]),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},p:me,i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Al(o){let e,l,t,n,s,r,i,a;const u=[Pl,Cl],m=[];function $(_,S){return _[5].route.id===_[6]?0:1}l=$(o),t=m[l]=u[l](o);let c=o[3]!=="none"&&pt(o);return{c(){e=K("header"),t.c(),n=R(),c&&c.c(),s=pe(),this.h()},l(_){e=F(_,"HEADER",{class:!0});var S=U(e);t.l(S),S.forEach(b),n=H(_),c&&c.l(_),s=pe(),this.h()},h(){D(e,"class","w-full fixed z-40 font-Montserrat h-20 p-5 flex justify-between items-center shrink-0 bg-white border-b border-slate-200 shadow-sm text-slate-800")},m(_,S){L(_,e,S),m[l].m(e,null),L(_,n,S),c&&c.m(_,S),L(_,s,S),r=!0,i||(a=At(o[14].call(null,e)),i=!0)},p(_,[S]){let v=l;l=$(_),l===v?m[l].p(_,S):(ee(),g(m[v],1,1,()=>{m[v]=null}),te(),t=m[l],t?t.p(_,S):(t=m[l]=u[l](_),t.c()),d(t,1),t.m(e,null)),_[3]!=="none"?c?(c.p(_,S),S&8&&d(c,1)):(c=pt(_),c.c(),d(c,1),c.m(s.parentNode,s)):c&&(ee(),g(c,1,1,()=>{c=null}),te())},i(_){r||(d(t),d(c),r=!0)},o(_){g(t),g(c),r=!1},d(_){_&&(b(e),b(n),b(s)),m[l].d(),c&&c.d(_),i=!1,a()}}}function Hl(o,e,l){let t,n,s,r;Z(o,Ne,V=>l(4,n=V)),Z(o,Re,V=>l(21,s=V)),Z(o,Me,V=>l(5,r=V));let{pageId:i}=e,a,u,m,$="none",c="none";const _="/[dataset]/dataset/[itemId]",S=Le.subscribe(V=>m=V.canSave),v=Ut.subscribe(V=>{l(2,u=V)});Ce(()=>{S(),v(),t()});const f=()=>`${s.indexOf(a)+1} of ${s.length}`,p=async V=>{const x=Nl(s,V,a);if(x){const ue=`/${n.id}/dataset/${x}`;if(m)return c=x,l(3,$=ue);l(1,a=x),await Ae(ue)}},h=()=>{Le.update(V=>({...V,shouldSave:!0}))},N=async()=>{h(),await O()},O=async()=>{c!=="none"&&(l(1,a=c),c="none"),await Ae($),l(3,$="none"),Le.set({canSave:!1,shouldSave:!1})},q=async()=>{a?(It.update(V=>(V.currentPage=Ml(s,a),V)),await E(`/${n.id}/dataset`)):await E("/")},E=async V=>{if(m)return l(3,$=V);await Ae(V)};function C(V){function x(ue){m&&ue.preventDefault()}return window.addEventListener("beforeunload",x),{destroy(){window.removeEventListener("beforeunload",x)}}}const A=()=>E("/"),P=V=>E(`/${n.id}/${V.toLocaleLowerCase()}`),Y=()=>l(3,$="none");return o.$$set=V=>{"pageId"in V&&l(0,i=V.pageId)},t=Me.subscribe(V=>{l(1,a=V.params.itemId)}),[i,a,u,$,n,r,_,f,p,h,N,O,q,E,C,A,P,Y]}class Rl extends Q{constructor(e){super(),X(this,e,Hl,Al,J,{pageId:0})}}const Fl=""+new URL("../assets/pixano_white.BVKPSmmP.png",import.meta.url).href;function ht(o){var be,qe;let e,l,t=((be=o[0])==null?void 0:be.length)+"",n,s,r,i,a=((qe=o[0])==null?void 0:qe.length)>1?"s":"",u,m,$,c,_=o[0].reduce(bt,0)+"",S,v,f,p,h=o[0].reduce(vt,0)>1?"s":"",N,O,q,E,C,A,P,Y,V,x,ue;return{c(){e=K("div"),l=K("span"),n=ae(t),s=R(),r=K("span"),i=ae("dataset"),u=ae(a),m=R(),$=K("div"),c=K("span"),S=ae(_),v=R(),f=K("span"),p=ae("item"),N=ae(h),O=R(),q=K("div"),E=K("div"),C=K("div"),A=K("input"),P=R(),Y=Xe("svg"),V=Xe("path"),this.h()},l(W){e=F(W,"DIV",{class:!0});var y=U(e);l=F(y,"SPAN",{class:!0});var ve=U(l);n=re(ve,t),ve.forEach(b),s=H(y),r=F(y,"SPAN",{class:!0});var ge=U(r);i=re(ge,"dataset"),u=re(ge,a),ge.forEach(b),y.forEach(b),m=H(W),$=F(W,"DIV",{class:!0});var we=U($);c=F(we,"SPAN",{class:!0});var We=U(c);S=re(We,_),We.forEach(b),v=H(we),f=F(we,"SPAN",{class:!0});var Pe=U(f);p=re(Pe,"item"),N=re(Pe,h),Pe.forEach(b),we.forEach(b),O=H(W),q=F(W,"DIV",{class:!0});var Ge=U(q);E=F(Ge,"DIV",{class:!0});var Ze=U(E);C=F(Ze,"DIV",{class:!0});var Ie=U(C);A=F(Ie,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),P=H(Ie),Y=Qe(Ie,"svg",{xmlns:!0,height:!0,viewBox:!0,width:!0,class:!0});var Je=U(Y);V=Qe(Je,"path",{d:!0,fill:!0}),U(V).forEach(b),Je.forEach(b),Ie.forEach(b),Ze.forEach(b),Ge.forEach(b),this.h()},h(){D(l,"class","mr-2 text-4xl font-medium"),D(r,"class","text-xl font-medium"),D(e,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),D(c,"class","mr-2 text-4xl font-medium"),D(f,"class","text-xl font-medium"),D($,"class","my-4 mr-8 p-4 pr-8 border rounded-lg border-primary-foreground"),D(A,"id","search-input"),D(A,"type","text"),D(A,"placeholder","Search datasets"),D(A,"class","h-10 pl-10 pr-4 rounded border border-primary-foreground bg-primary-foreground text-white placeholder-white font-medium focus:outline-none"),A.value=o[1],D(V,"d",yt),D(V,"fill","white"),D(Y,"xmlns","http://www.w3.org/2000/svg"),D(Y,"height","48"),D(Y,"viewBox","0 -960 960 960"),D(Y,"width","48"),D(Y,"class","absolute left-3 h-5 w-5 pointer-events-none"),D(C,"class","h-20 relative flex items-center"),D(E,"class","flex items-center space-x-2"),D(q,"class","grow self-end flex flex-row justify-end items-end")},m(W,y){L(W,e,y),M(e,l),M(l,n),M(e,s),M(e,r),M(r,i),M(r,u),L(W,m,y),L(W,$,y),M($,c),M(c,S),M($,v),M($,f),M(f,p),M(f,N),L(W,O,y),L(W,q,y),M(q,E),M(E,C),M(C,A),M(C,P),M(C,Y),M(Y,V),x||(ue=Be(A,"input",o[2]),x=!0)},p(W,y){var ve,ge;y&1&&t!==(t=((ve=W[0])==null?void 0:ve.length)+"")&&de(n,t),y&1&&a!==(a=((ge=W[0])==null?void 0:ge.length)>1?"s":"")&&de(u,a),y&1&&_!==(_=W[0].reduce(bt,0)+"")&&de(S,_),y&1&&h!==(h=W[0].reduce(vt,0)>1?"s":"")&&de(N,h),y&2&&A.value!==W[1]&&(A.value=W[1])},d(W){W&&(b(e),b(m),b($),b(O),b(q)),x=!1,ue()}}}function Kl(o){let e,l,t=`<img src="${Fl}" alt="Logo Pixano" class="w-7 h-7"/> <span class="text-2xl font-semibold text-slate-50 uppercase">Pixano</span>`,n,s,r=o[0]&&ht(o);return{c(){e=K("header"),l=K("div"),l.innerHTML=t,n=R(),s=K("div"),r&&r.c(),this.h()},l(i){e=F(i,"HEADER",{class:!0});var a=U(e);l=F(a,"DIV",{class:!0,"data-svelte-h":!0}),Ht(l)!=="svelte-1gjs2pg"&&(l.innerHTML=t),n=H(a),s=F(a,"DIV",{class:!0});var u=U(s);r&&r.l(u),u.forEach(b),a.forEach(b),this.h()},h(){D(l,"class","flex gap-4 items-center"),D(s,"class","flex pt-4 h-36 w-full items-center flex-wrap text-slate-50"),D(e,"class","p-4 w-full h-fit pt-8 px-20 xl:px-60 flex flex-col justify-evenly bg-primary font-Montserrat z-10")},m(i,a){L(i,e,a),M(e,l),M(e,n),M(e,s),r&&r.m(s,null)},p(i,[a]){i[0]?r?r.p(i,a):(r=ht(i),r.c(),r.m(s,null)):r&&(r.d(1),r=null)},i:me,o:me,d(i){i&&b(e),r&&r.d()}}}const bt=(o,e)=>o+e.num_items,vt=(o,e)=>o+e.num_items;function jl(o,e,l){let t;Z(o,ye,r=>l(1,t=r));let{datasets:n}=e;const s=r=>{const i=r.currentTarget;ye.set(i.value),Fe.update((a=[])=>a.map(u=>({...u,isFiltered:!u.name.toLocaleLowerCase().includes(i.value.toLocaleLowerCase())})))};return o.$$set=r=>{"datasets"in r&&l(0,n=r.datasets)},[n,t,s]}class Ul extends Q{constructor(e){super(),X(this,e,jl,Kl,J,{datasets:0})}}function Bl(o){let e,l;return e=new Rl({props:{pageId:o[1].route.id}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},p(t,n){const s={};n&2&&(s.pageId=t[1].route.id),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function Ol(o){let e,l;return e=new Ul({props:{datasets:o[0]}}),{c(){T(e.$$.fragment)},l(t){I(e.$$.fragment,t)},m(t,n){w(e,t,n),l=!0},p(t,n){const s={};n&1&&(s.datasets=t[0]),e.$set(s)},i(t){l||(d(e.$$.fragment,t),l=!0)},o(t){g(e.$$.fragment,t),l=!1},d(t){k(e,t)}}}function zl(o){let e,l,t,n,s,r,i,a,u,m;const $=[Ol,Bl],c=[];function _(f,p){return f[1].route.id===He?0:1}s=_(o),r=c[s]=$[s](o);const S=o[5].default,v=ne(S,o,o[4],null);return{c(){e=K("link"),l=K("meta"),t=R(),n=K("div"),r.c(),i=R(),a=K("main"),v&&v.c(),this.h()},l(f){const p=Rt("svelte-8x3pw",document.head);e=F(p,"LINK",{rel:!0,type:!0,href:!0}),l=F(p,"META",{name:!0,content:!0}),p.forEach(b),t=H(f),n=F(f,"DIV",{class:!0});var h=U(n);r.l(h),i=H(h),a=F(h,"MAIN",{class:!0});var N=U(a);v&&v.l(N),N.forEach(b),h.forEach(b),this.h()},h(){D(e,"rel","icon"),D(e,"type","image/svg"),D(e,"href",Zn),document.title="Pixano",D(l,"name","description"),D(l,"content","Pixano app"),D(a,"class",u=$e("bg-slate-50 flex flex-col h-screen",o[1].route.id!==He&&"pt-20")),D(n,"class","app")},m(f,p){M(document.head,e),M(document.head,l),L(f,t,p),L(f,n,p),c[s].m(n,null),M(n,i),M(n,a),v&&v.m(a,null),m=!0},p(f,[p]){let h=s;s=_(f),s===h?c[s].p(f,p):(ee(),g(c[h],1,1,()=>{c[h]=null}),te(),r=c[s],r?r.p(f,p):(r=c[s]=$[s](f),r.c()),d(r,1),r.m(n,i)),v&&v.p&&(!m||p&16)&&le(v,S,f,f[4],m?oe(S,f[4],p,null):se(f[4]),null),(!m||p&2&&u!==(u=$e("bg-slate-50 flex flex-col h-screen",f[1].route.id!==He&&"pt-20")))&&D(a,"class",u)},i(f){m||(d(r),d(v,f),m=!0)},o(f){g(r),g(v,f),m=!1},d(f){f&&(b(t),b(n)),b(e),b(l),c[s].d(),v&&v.d(f)}}}const He="/";function ql(o,e,l){let t,n,s,r,i;Z(o,Fe,_=>l(0,n=_)),Z(o,Ne,_=>l(3,s=_)),Z(o,Re,_=>l(7,r=_)),Z(o,Me,_=>l(1,i=_));let{$$slots:a={},$$scope:u}=e,m;kt(()=>{ln().then(_=>xe.set(_)).catch(()=>xe.set([])),nn().then(_=>{Fe.set(_)}).catch(_=>{console.error(_)})});const $=It.subscribe(_=>{_.where!=null&&Ve.set(r.length)}),c=async _=>{if(_!==void 0)if(r.length===0){const S=await tn(_);Re.set(S),Ve.set(r.length)}else Ve.set(r.length)};return Ce(()=>{$(),t()}),o.$$set=_=>{"$$scope"in _&&l(4,u=_.$$scope)},o.$$.update=()=>{o.$$.dirty&13&&(t=Me.subscribe(_=>{if(l(2,m=_.params.dataset),m&&s==null){const S=n==null?void 0:n.find(v=>v.id===m);S&&Ne.set(S)}})),o.$$.dirty&4&&c(m)},[n,i,m,s,u,a]}class ls extends Q{constructor(e){super(),X(this,e,ql,zl,J,{})}}export{ls as component,ns as universal};
