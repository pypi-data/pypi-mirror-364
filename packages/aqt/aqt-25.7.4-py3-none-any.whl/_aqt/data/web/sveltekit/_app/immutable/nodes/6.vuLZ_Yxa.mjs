var Nn=Object.defineProperty;var Fn=(n,t,a)=>t in n?Nn(n,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[t]=a;var we=(n,t,a)=>Fn(n,typeof t!="symbol"?t+"":t,a);import{L as Vn,M as Hn,N as Bn,O as zn,P as Wn,s as _t,Q as Gn,S as sr,T as Kt,U as ht,V as ut,W as Ss,X as at,Y as bt,Z as Ds,_ as gs,$ as jn,a0 as qn,a1 as Un,a2 as Qn,a3 as Yn,a4 as rr,a5 as Kn,a6 as Xn,a7 as Zn,a8 as Jn,a9 as ea}from"../chunks/DjuHNxzJ.mjs";import{e as ta,f as sa,b as ra}from"../chunks/DHcnq1m1.mjs";import{s as d,bc as zr,g as r,Q as Wr,u as s,C as na,aL as xt,G as nr,F as ar,am as or,bd as aa,as as ir,p as be,e as it,f as ue,c as g,d as xe,aZ as oa,aY as Ms,al as ia,h as ee,i as X,_ as $,r as M,b as W,n as re,j as q,k as w,l as ie,m as T,a as Ye,b7 as St,t as Z,aM as la,be as ua}from"../chunks/3W_oWfQO.mjs";import{d as qe,g as je,v as ca,r as Gr,y as da,z as fa,s as F,x as jr,e as Se,c as qr,o as Ns,t as ga}from"../chunks/BmEJtw2x.mjs";import{c as us}from"../chunks/DuQVUOdf.mjs";import{b as Fs,i as lr,S as va}from"../chunks/D7IilqPv.mjs";import"../chunks/BbkoyQuY.mjs";import{i as Oe}from"../chunks/BlVs9ZMX.mjs";import{b as Mt}from"../chunks/DAG-5t49.mjs";import{p as V,i as Ve,s as Ur}from"../chunks/D_GJ3sV_.mjs";import{e4 as Qr,t as st,e5 as vs,I as G,aw as mt,e6 as $a,cc as Vs,u as pa,e7 as ha,e8 as ma,q as ot,U as Ke,e9 as ya,ea as Ca,eb as wa,ec as _a,ed as ka,ee as Pa,ef as ba,eg as xa,eh as Sa,ei as Oa,ej as Ra,ek as Ta,el as Ia,em as ur,en as Da,eo as cr,ep as Aa,eq as Yr,er as La,es as Ea,et as dr,eu as Ma,ev as Na,ew as Fa,ex as Va,ey as fr,ez as Ha,eA as Ba,eB as za,eC as Wa,eD as Ga,eE as ja,eF as qa,eG as Ua,eH as Qa,eI as Ya,eJ as Ka,eK as Xa,eL as Za,eM as Ja,eN as eo,eO as to,eP as so,eQ as Kr,eR as ro,eS as no,eT as ao,eU as oo,eV as io,eW as lo,eX as uo,eY as co,eZ as fo,e_ as go,e$ as vo,f0 as $o,f1 as po,f2 as ho,f3 as mo,f4 as yo,f5 as Co,f6 as wo,f7 as _o,f8 as ko,f9 as Po,fa as bo,fb as xo,fc as So,fd as Oo,fe as Ro,ff as To,fg as Io,fh as Do,fi as Ao,fj as gr,fk as Lo,fl as Eo,fm as Mo,fn as No,fo as Fo,fp as Vo,fq as Ho,fr as vr,fs as Bo,ft as Xr,fu as Zr,fv as Jr,fw as zo,fx as Wo,fy as Go,fz as jo,fA as qo,fB as Uo,fC as Qo,fD as Yo,fE as Ko,fF as Xo,fG as Zo,fH as Jo,fI as cs,fJ as $r,fK as pr,fL as ei,fM as en,fN as ti,fO as tn,fP as si,fQ as sn,fR as ri,fS as hr,fT as ni,fU as ai,fV as rn,fW as oi,fX as ii,fY as li,fZ as ui,f_ as ci,f$ as di,g0 as fi,g1 as gi,g2 as mr,g3 as vi,g4 as $i,cI as nn,cq as pi,cp as hi,cZ as mi,co as yi,g5 as Ci,g6 as wi,g7 as _i,g8 as ki,g9 as Pi,ga as bi,gb as xi,gc as Si,gd as Oi,ge as Ri,gf as Ti,gg as Ii,gh as Hs,gi as Di,gj as Ai,gk as Li,dC as Ei,gl as Mi,gm as an,gn as on,go as Ni,gp as ln,gq as Fi,gr as Vi,gs as Hi,gt as Bi,gu as zi,gv as un,gw as As,gx as Wi,gy as Gi,gz as ji,gA as qi,gB as Ui,gC as cn,gD as dn,gE as Qi,gF as fn,gG as Yi,gH as Ki,gI as Xi,gJ as Zi,gK as Ji,gL as yr,gM as el,gN as tl,gO as sl,gP as rl,gQ as nl,gR as al,gS as ol,gT as il,gU as ll,gV as ul,gW as cl,gX as dl,gY as fl,gZ as gl,g_ as vl,g$ as $l,h0 as pl,h1 as hl,h2 as ml,V as yl,h3 as Cl,h4 as wl,h5 as _l,h6 as kl,h7 as Pl,h8 as bl,h9 as xl,ha as Sl,hb as gn,hc as Cr,hd as Ol,he as Rl,hf as Tl,hg as Il,hh as Dl,hi as Al,hj as Ll,hk as El,hl as Ml,hm as Nl,hn as Fl,ho as wr,hp as Vl,hq as Hl,hr as Bl,hs as zl,ht as Wl,hu as Gl,hv as jl,hw as _r,hx as ql,hy as Ul,hz as Ql}from"../chunks/hD5IbqNM.mjs";import{b as Je}from"../chunks/CuVdaCGl.mjs";import{a as ye,s as ze,b as vt,m as Ot,d as te,e as Yl}from"../chunks/D-RwVtBd.mjs";import{C as Kl}from"../chunks/DxjO0R9p.mjs";import{e as Zt,i as ms,R as Ue,p as Xl}from"../chunks/GPfGvsFk.mjs";import{c as Ls}from"../chunks/CAnfnSx8.mjs";import{T as lt}from"../chunks/CSzUuxxC.mjs";import{b as et,H as pe,a as $t,M as vn}from"../chunks/Ba97WWzl.mjs";import{d as Jt,M as $n,S as Zl,k as Jl,l as eu,m as tu,p as su,a as pn,W as ru,P as nu,D as Xt}from"../chunks/DA8cmxEo.mjs";import{a as au}from"../chunks/CcaWrs5J.mjs";import{C as Tt,R as es,a as se,S as Xe,E as gt}from"../chunks/D-TNs8mz.mjs";import{c as ts,b as Os}from"../chunks/DIbnkDWM.mjs";import{a as $s,j as ou,I as kr,c as hn,$ as iu}from"../chunks/CeCPCE8A.mjs";import{C as kt}from"../chunks/p4kUX_rs.mjs";import{j as Pr,S as lu,g as br,p as uu}from"../chunks/Be_bRZjR.mjs";import{W as Qe}from"../chunks/BAQ-cuyv.mjs";import{m as mn}from"../chunks/Dbye-yJ_.mjs";import{L as cu,S as du}from"../chunks/CXS4bJp1.mjs";import{I as fu}from"../chunks/DmV3bPah.mjs";import{r as gu}from"../chunks/DWJhixNH.mjs";import{r as ps}from"../chunks/C3iZ-SGe.mjs";import{k as vu}from"../chunks/ByZLrhA1.mjs";import{ac as Bs,y as xr,z as Sr,A as Or,C as $u,B as pu,D as hu,E as mu,H as Rr,F as yu,b as Cu,G as Tr,I as wu,M as _u,L as ku,J as Pu,K as bu,N as xu}from"../chunks/DXgmCf1n.mjs";import{I as Su,i as Ou,c as Ru,C as Tu,T as Iu}from"../chunks/DC2qBT5E.mjs";import{t as Rs,T as ct,c as Du,a as Au,e as Lu}from"../chunks/Cqybio0d.mjs";import{t as Eu}from"../chunks/AidqUCfQ.mjs";import{S as Ir,a as Mu}from"../chunks/DB8w6JNV.mjs";function Nu(n){d(n,n.v+1)}function Fu(n){let t=0,a=na(0),i;return()=>{zr()&&(r(a),Wr(()=>(t===0&&(i=s(()=>n(()=>Nu(a)))),t+=1,()=>{xt().then(()=>{t-=1,t===0&&(i==null||i(),i=void 0)})})))}}function Vu(n,t){var a=or,i=ir,e=n();const o=qe(e,h=>{var p=e!==n(),u,v=ir,c=or;nr(i),ar(a);try{u=aa(()=>{Wr(()=>{const k=n();p&&h(k)})})}finally{nr(v),ar(c)}return p=!0,u});return t?{set:t,update:h=>t(h(n())),subscribe:o.subscribe}:{subscribe:o.subscribe}}function Hu(n){let t;const a=Fu(e=>{let o=!1;const h=n.subscribe(p=>{t=p,o&&e()});return o=!0,h});function i(){return zr()?(a(),t):je(n)}return"set"in n?{get current(){return i()},set current(e){n.set(e)}}:{get current(){return i()}}}const Bu=Object.freeze(Object.defineProperty({__proto__:null,derived:ca,fromStore:Hu,get:je,readable:Gr,readonly:da,toStore:Vu,writable:qe},Symbol.toStringTag,{value:"Module"}));function zu(n,t,...a){return Wu(n,Ou,t,a)}function Wu(n,t,a,i){return function e(o,h){if(h>=i.length)return a(o);const p=new Su,u=i[h++];let v=-1;for(const c of o){const k=u(c,++v,o),y=p.get(k);y?y.push(c):p.set(k,[c])}for(const[c,k]of p)p.set(c,e(k,h));return t(p)}(n,0)}const Gu=Ru("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");function ju(n,t){for(var a=-1,i=n==null?0:n.length,e=Array(i);++a<i;)e[a]=t(n[a],a,n);return e}var Dr=Ir?Ir.prototype:void 0,Ar=Dr?Dr.toString:void 0;function yn(n){if(typeof n=="string")return n;if(Jt(n))return ju(n,yn)+"";if(Bs(n))return Ar?Ar.call(n):"";var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function qu(n){return n}var Uu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Qu=/^\w*$/;function zs(n,t){if(Jt(n))return!1;var a=typeof n;return a=="number"||a=="symbol"||a=="boolean"||n==null||Bs(n)?!0:Qu.test(n)||!Uu.test(n)||t!=null&&n in Object(t)}var Yu="Expected a function";function Ws(n,t){if(typeof n!="function"||t!=null&&typeof t!="function")throw new TypeError(Yu);var a=function(){var i=arguments,e=t?t.apply(this,i):i[0],o=a.cache;if(o.has(e))return o.get(e);var h=n.apply(this,i);return a.cache=o.set(e,h)||o,h};return a.cache=new(Ws.Cache||$n),a}Ws.Cache=$n;var Ku=500;function Xu(n){var t=Ws(n,function(i){return a.size===Ku&&a.clear(),i}),a=t.cache;return t}var Zu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ju=/\\(\\)?/g,ec=Xu(function(n){var t=[];return n.charCodeAt(0)===46&&t.push(""),n.replace(Zu,function(a,i,e,o){t.push(e?o.replace(Ju,"$1"):i||a)}),t});function tc(n){return n==null?"":yn(n)}function Cn(n,t){return Jt(n)?n:zs(n,t)?[n]:ec(tc(n))}function ys(n){if(typeof n=="string"||Bs(n))return n;var t=n+"";return t=="0"&&1/n==-1/0?"-0":t}function wn(n,t){t=Cn(t,n);for(var a=0,i=t.length;n!=null&&a<i;)n=n[ys(t[a++])];return a&&a==i?n:void 0}function sc(n,t,a){var i=n==null?void 0:wn(n,t);return i===void 0?a:i}var rc=1,nc=2;function ac(n,t,a,i){var e=a.length,o=e;if(n==null)return!o;for(n=Object(n);e--;){var h=a[e];if(h[2]?h[1]!==n[h[0]]:!(h[0]in n))return!1}for(;++e<o;){h=a[e];var p=h[0],u=n[p],v=h[1];if(h[2]){if(u===void 0&&!(p in n))return!1}else{var c=new Zl,k;if(!(k===void 0?Fs(v,u,rc|nc,i,c):k))return!1}}return!0}function _n(n){return n===n&&!Mu(n)}function oc(n){for(var t=Jl(n),a=t.length;a--;){var i=t[a],e=n[i];t[a]=[i,e,_n(e)]}return t}function kn(n,t){return function(a){return a==null?!1:a[n]===t&&(t!==void 0||n in Object(a))}}function ic(n){var t=oc(n);return t.length==1&&t[0][2]?kn(t[0][0],t[0][1]):function(a){return a===n||ac(a,n,t)}}function lc(n,t){return n!=null&&t in Object(n)}function uc(n,t,a){t=Cn(t,n);for(var i=-1,e=t.length,o=!1;++i<e;){var h=ys(t[i]);if(!(o=n!=null&&a(n,h)))break;n=n[h]}return o||++i!=e?o:(e=n==null?0:n.length,!!e&&eu(e)&&tu(h,e)&&(Jt(n)||su(n)))}function cc(n,t){return n!=null&&uc(n,t,lc)}var dc=1,fc=2;function gc(n,t){return zs(n)&&_n(t)?kn(ys(n),t):function(a){var i=sc(a,n);return i===void 0&&i===t?cc(a,n):Fs(t,i,dc|fc)}}function vc(n){return function(t){return t==null?void 0:t[n]}}function $c(n){return function(t){return wn(t,n)}}function pc(n){return zs(n)?vc(ys(n)):$c(n)}function hc(n){return typeof n=="function"?n:n==null?qu:typeof n=="object"?Jt(n)?gc(n[0],n[1]):ic(n):pc(n)}function mc(n,t,a){a=typeof a=="function"?a:void 0;var i=a?a(n,t):void 0;return i===void 0?Fs(n,t,void 0,a):!!i}function yc(n,t){for(var a,i=-1,e=n.length;++i<e;){var o=t(n[i]);o!==void 0&&(a=a===void 0?o:a+o)}return a}function Cc(n,t){return n&&n.length?yc(n,hc(t)):0}function Es(){let n;return[new Promise(a=>n=a),n]}class wc{constructor(t,a){we(this,"currentConfig");we(this,"currentAuxData");we(this,"configList");we(this,"cardStateCustomizer");we(this,"currentDeck");we(this,"deckLimits");we(this,"defaults");we(this,"addonComponents");we(this,"newCardsIgnoreReviewLimit");we(this,"applyAllParentLimits");we(this,"fsrs");we(this,"fsrsReschedule",qe(!1));we(this,"fsrsHealthCheck");we(this,"legacyEvaluate");we(this,"daysSinceLastOptimization");we(this,"currentPresetName");we(this,"originalConfigsPromise");we(this,"originalConfigsResolve");we(this,"targetDeckId");we(this,"configs");we(this,"selectedIdx");we(this,"configListSetter");we(this,"modifiedConfigs",new Set);we(this,"removedConfigs",[]);we(this,"schemaModified");we(this,"_presetAssignmentsChanged",!1);we(this,"loadedPresets",new Set);var i,e;this.targetDeckId=t,this.currentDeck=a.currentDeck,this.defaults=a.defaults.config,this.configs=a.allConfig.map(o=>({config:o.config,useCount:o.useCount})),this.selectedIdx=Math.max(0,this.configs.findIndex(o=>o.config.id===this.currentDeck.configId)),this.sortConfigs(),this.cardStateCustomizer=qe(a.cardStateCustomizer),this.deckLimits=qe((e=(i=a.currentDeck)==null?void 0:i.limits)!=null?e:kc()),this.newCardsIgnoreReviewLimit=qe(a.newCardsIgnoreReviewLimit),this.applyAllParentLimits=qe(a.applyAllParentLimits),this.fsrs=qe(a.fsrs),this.fsrsHealthCheck=qe(a.fsrsHealthCheck),this.legacyEvaluate=a.fsrsLegacyEvaluate,this.daysSinceLastOptimization=qe(a.daysSinceLastFsrsOptimize),this.configs[this.selectedIdx].useCount-=1,this.currentConfig=qe(this.getCurrentConfig()),this.currentAuxData=qe(this.getCurrentAuxData()),this.currentPresetName=qe(this.configs[this.selectedIdx].config.name),this.configList=Gr(this.getConfigList(),o=>{this.configListSetter=o}),this.schemaModified=a.schemaModified,this.addonComponents=qe([]),je(this.configList),this.currentConfig.subscribe(o=>this.onCurrentConfigChanged(o)),this.currentAuxData.subscribe(o=>this.onCurrentAuxDataChanged(o)),this.loadedPresets.add(this.configs[this.selectedIdx].config.id),[this.originalConfigsPromise,this.originalConfigsResolve]=Es()}async markCurrentPresetAsLoaded(){const t=this.configs[this.selectedIdx].config.id,a=this.loadedPresets;if(t&&!a.has(t)){a.add(t);const i=await this.originalConfigsPromise,e=i.configs.findIndex(o=>o.id===t);e!==-1&&(i.configs[e]=us(this.configs[this.selectedIdx].config))}}setCurrentIndex(t){this.selectedIdx=t,this._presetAssignmentsChanged=!0,this.updateCurrentConfig(),this.updateConfigList(),xt().then(()=>this.markCurrentPresetAsLoaded())}getCurrentName(){return this.configs[this.selectedIdx].config.name}getCurrentNameForSearch(){return this.getCurrentName().replace(/([\\"])/g,"\\$1")}setCurrentName(t){if(this.configs[this.selectedIdx].config.name===t)return;const a=this.ensureNewNameUnique(t),i=this.configs[this.selectedIdx].config;i.name=a,i.id&&this.modifiedConfigs.add(i.id),this.sortConfigs(),this.updateConfigList()}addConfig(t){this.addConfigFrom(t,this.defaults)}cloneConfig(t){this.addConfigFrom(t,this.configs[this.selectedIdx].config.config)}addConfigFrom(t,a){const i=this.ensureNewNameUnique(t),o={config:new Vn({id:0n,name:i,config:new Hn(us(a))}),useCount:0};this.configs.push(o),this.selectedIdx=this.configs.length-1,this._presetAssignmentsChanged=!0,this.sortConfigs(),this.updateCurrentConfig(),this.updateConfigList()}removalWilLForceFullSync(){return!this.schemaModified&&this.configs[this.selectedIdx].config.id!==0n}defaultConfigSelected(){return this.configs[this.selectedIdx].config.id===1n}removeCurrentConfig(){const t=this.configs[this.selectedIdx].config.id;if(t===1n)throw Error("can't remove default config");t!==0n&&(this.removedConfigs.push(t),this.schemaModified=!0),this.configs.splice(this.selectedIdx,1);const a=Math.max(0,this.selectedIdx-1);this.setCurrentIndex(a)}dataForSaving(t){const i=[...this.configs.map(e=>e.config).filter((e,o)=>o!==this.selectedIdx&&(e.id===0n||this.modifiedConfigs.has(e.id))),this.configs[this.selectedIdx].config];return{targetDeckId:this.targetDeckId,removedConfigIds:this.removedConfigs,configs:i,mode:t,cardStateCustomizer:je(this.cardStateCustomizer),limits:je(this.deckLimits),newCardsIgnoreReviewLimit:je(this.newCardsIgnoreReviewLimit),applyAllParentLimits:je(this.applyAllParentLimits),fsrs:je(this.fsrs),fsrsReschedule:je(this.fsrsReschedule),fsrsHealthCheck:je(this.fsrsHealthCheck)}}presetAssignmentsChanged(){return this._presetAssignmentsChanged}async save(t){await Bn(this.dataForSaving(t))}onCurrentConfigChanged(t){const a=this.configs[this.selectedIdx].config;lr(t,a.config)||(a.config=t,a.id&&this.modifiedConfigs.add(a.id))}onCurrentAuxDataChanged(t){const a=this.getCurrentAuxData();lr(a,t)||this.currentConfig.update(i=>{const e=new TextEncoder().encode(JSON.stringify(t));return i.other=e,i})}ensureNewNameUnique(t){return this.configs.findIndex(i=>i.config.name===t)!==-1?t+(new Date().getTime()/1e3).toFixed(0):t}updateCurrentConfig(){this.currentConfig.set(this.getCurrentConfig()),this.currentAuxData.set(this.getCurrentAuxData())}updateConfigList(){var t;(t=this.configListSetter)==null||t.call(this,this.getConfigList()),this.currentPresetName.set(this.configs[this.selectedIdx].config.name)}getCurrentConfig(){return us(this.configs[this.selectedIdx].config.config)}getCurrentAuxData(){const t=this.configs[this.selectedIdx].config.config;return _c(t.other)}sortConfigs(){const t=this.configs[this.selectedIdx].config.name;this.configs.sort((a,i)=>ta(a.config.name,i.config.name,{sensitivity:"base"})),this.selectedIdx=this.configs.findIndex(a=>a.config.name==t)}getConfigList(){return this.configs.map((a,i)=>{const e=a.useCount+(i===this.selectedIdx?1:0);return{name:a.config.name,current:i===this.selectedIdx,idx:i,useCount:e}})}getAllConfigs(){return us({configs:this.configs.map(t=>t.config),cardStateCustomizer:je(this.cardStateCustomizer),limits:je(this.deckLimits),newCardsIgnoreReviewLimit:je(this.newCardsIgnoreReviewLimit),applyAllParentLimits:je(this.applyAllParentLimits),fsrs:je(this.fsrs),fsrsReschedule:je(this.fsrsReschedule),currentConfig:je(this.currentConfig)})}async isModified(){const t=await this.originalConfigsPromise,a=this.getAllConfigs();return!mc(t,a,(i,e)=>{if(typeof i=="number"&&typeof e=="number")return Math.fround(i)===Math.fround(e)})}resolveOriginalConfigs(){this.originalConfigsResolve(this.getAllConfigs())}}function _c(n){if(!n.length)return{};let t;try{t=JSON.parse(new TextDecoder().decode(n))}catch{return console.log("invalid json in deck config"),{}}return t.constructor!==Object?(console.log("invalid object in deck config"),{}):t}function kc(){return new zn({})}class wt{constructor(t,a,i,e,o){we(this,"title");we(this,"value");we(this,"setter");we(this,"disabledValue");we(this,"startValue");we(this,"initialValue");this.title=t,this.value=this.initialValue=a,this.setter=i,this.disabledValue=e,this.startValue=o}reset(){this.setter(this.initialValue)}disable(){this.setter(this.disabledValue)}enable(t){var a,i;this.value=(i=(a=this.value)!=null?a:this.startValue)!=null?i:t,this.setter(this.value)}setValue(t){this.value=t,this.setter(t)}}async function Gs(){document.activeElement instanceof HTMLElement&&document.activeElement.blur(),await xt()}function ds(n){return n.fsrsParams6?n.fsrsParams6:n.fsrsParams5?n.fsrsParams5:n.fsrsParams4}const Pc=async({params:n})=>{const t=Number(n.deckId),a=BigInt(t),i=await Wn({did:a});return{state:new wc(BigInt(a),i)}},lg=Object.freeze(Object.defineProperty({__proto__:null,load:Pc},Symbol.toStringTag,{value:"Module"}));Qr("svelte",fa);Qr("svelte/store",Bu);function bc(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$components",a),o=()=>ye(u,"$auxData",a);let h=V(t,"state",8);const p=h().addonComponents,u=h().currentAuxData;Oe();var v=it(),c=ue(v);{var k=y=>{lt(y,{title:"Add-ons",children:(m,b)=>{var f=it(),C=ue(f);Zt(C,1,e,ms,(x,R)=>{var S=it(),D=ue(S);Ls(D,()=>r(R).component,(B,j)=>{j(B,Ur(()=>r(R),{get data(){return Ot(),o()},set data(Y){vt(u,Y)},$$legacy:!0}))}),g(x,S)}),g(m,f)},$$slots:{default:!0}})};Ve(c,y=>{e(),s(()=>e().length)&&y(k)})}g(n,v),xe(),i()}function Ts(n,t){let a,i;if(t instanceof Element){if(a=t,i=Array.prototype.indexOf.call(n,a),i<0)return null}else if(typeof t=="string"){const e=n.namedItem(t);if(!e||(a=e,i=Array.prototype.indexOf.call(n,a),i<0))return null}else if(t<0){i=n.length+t;const e=n.item(i);if(!e)return null;a=e}else{i=t;const e=n.item(i);if(!e)return null;a=e}return[a,i]}class xc{constructor(t){we(this,"parent");this.parent=t}insertElement(t,a){const i=Ts(this.parent.children,a);if(!i)return-1;const[e,o]=i;return this.parent.insertBefore(t,e[0]),o}appendElement(t,a){var p;const i=Ts(this.parent.children,a);if(!i)return-1;const[e,o]=i,h=(p=e.nextElementSibling)!=null?p:null;return this.parent.insertBefore(t,h),o+1}updateElement(t,a){const i=Ts(this.parent.children,a);return i?(t(...i),!0):!1}}function Sc(n){return new xc(n)}function Oc(n){return n.nodeType===Node.ELEMENT_NODE}function Rc(n){function t(i){ia(n,i)}return[{get(){return Ms(n)},available(){return oa(n)}},t]}function Tc(n,t,a,i){const e=qe([]);e.subscribe(t);function o(b,f){e.update(C=>(C.splice(b,0,f),C))}const[h,p]=Es(),u=h.then(Sc),v=qe([]);async function c(b,f){const[C,x]=Es(),R=await u,S=n();function D(E){return!b.id||E.id===b.id}async function B(E,A){for(const L of E)for(const O of L.addedNodes){if(!Oc(O)||!D(O))continue;const P=f(O,R);return P>=0&&o(P,S),x(void 0),A.disconnect()}}new MutationObserver(B).observe(R.parent,{childList:!0});const Y={component:b,hostProps:S};return v.update(E=>(E.push(Y),E)),await C,{destroy(){v.update(E=>(au(E,Y),E))}}}async function k(b,f){return(await u).updateElement((x,R)=>{e.update(S=>(S[R]=b(S[R]),S))},f)}const y=i({addComponent:c,updateProps:k});function m(){const b=n();return e.update(f=>(f.push(b),f)),b}return a({getProps:m}),{dynamicSlotted:v,resolveSlotContainer:p,slotsInterface:y}}function Ic(){return{detach:qe(!1)}}function Dc({addComponent:n,updateProps:t}){function a(p,u=0){return n(p,(v,c)=>c.insertElement(v,u))}function i(p,u=-1){return n(p,(v,c)=>c.appendElement(v,u))}function e(p){return t(u=>(u.detach.set(!1),u),p)}function o(p){return t(u=>(u.detach.set(!0),u),p)}function h(p){return t(u=>(u.detach.update(v=>!v),u),p)}return{insert:a,append:i,show:e,hide:o,toggle:h}}const Ac=Symbol("dynamicSlotting"),[Lr,Lc]=Rc(Ac);var Ec=ee('<div class="dynamically-slottable svelte-8in7my"><!> <!></div>');function dt(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(m,"$dynamicSlotted",a);function o(R){return R}let h=V(t,"slotHost",8),p=V(t,"createProps",8,Ic),u=V(t,"updatePropsList",8,o),v=V(t,"setSlotHostContext",8,Lc),c=V(t,"createInterface",8,Dc);const{slotsInterface:k,resolveSlotContainer:y,dynamicSlotted:m}=Tc(p(),u(),v(),c());let b=V(t,"api",8);Object.assign(b(),k),Oe();var f=Ec(),C=X(f);_t(C,t,"default",{});var x=$(C,2);Zt(x,1,e,({component:R,hostProps:S})=>R.id,(R,S)=>{let D=()=>r(S).component,B=()=>r(S).hostProps;var j=it(),Y=ue(j);Ls(Y,h,(E,A)=>{A(E,{get id(){return D(),s(()=>D().id)},get hostProps(){return B()},children:(L,O)=>{var l=it(),P=ue(l);Ls(P,()=>D().component,(Q,z)=>{z(Q,Ur(()=>D().props))}),g(L,l)},$$slots:{default:!0}})}),g(R,j)}),M(f),pn(f,R=>y==null?void 0:y(R)),g(n,f),xe(),i()}var Mc=ee('<div class="item svelte-u5rx4p"><!></div>');function J(n,t){var k;be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$detach",a);let o=V(t,"id",8,void 0),h=V(t,"hostProps",8,void 0);Lr.available()||console.log("Item: should always have a slotHostContext");const{detach:p}=(k=h())!=null?k:Lr.get().getProps();Oe();var u=Mc(),v=X(u);{var c=y=>{var m=it(),b=ue(m);_t(b,t,"default",{}),g(y,m)};Ve(v,y=>{e()||y(c)})}M(u),W(()=>st(u,"id",o())),g(n,u),xe(),i()}var Nc=ee(' <div class="inline-icon svelte-cpy9wq"><!></div>',1);function Rt(n,t){be(t,!1);let a=V(t,"title",8);Oe(),re();var i=Nc(),e=ue(i),o=$(e),h=X(o);$s(h,{get icon(){return ou}}),M(o),W(p=>{var u;F(e,`${(u=a())!=null?u:""} `),st(o,"title",p)},[()=>(w(G),s(()=>vs()))],q),g(n,i),xe()}var Fc=ee('<details><summary><!></summary> <div class="text svelte-pjduvg"><textarea class="card-state-customizer form-control svelte-pjduvg" spellcheck="false" autocapitalize="none"></textarea></div></details>'),Vc=ee('<div class="m-2"><!></div>');function Hc(n,t){let a=V(t,"value",12),i=V(t,"title",8);var e=Vc(),o=X(e);Tt(o,{children:(h,p)=>{var u=Fc(),v=X(u),c=X(v);Rt(c,{get title(){return i()}}),M(v);var k=$(v,2),y=X(k);jr(y),M(k),M(u),ts(y,a),g(h,u)},$$slots:{default:!0,revert:(h,p)=>{es(h,{slot:"revert",defaultValue:"",get value(){return a()},set value(u){a(u)},$$legacy:!0})}}}),M(e),g(n,e)}var Bc=ee('<span class="invisible svelte-xwrhci"> </span>'),zc=ee('<span class="suffix svelte-xwrhci"></span>'),Wc=ee('<div tabindex="-1" role="button"><!></div> <div tabindex="-1" role="button"><!></div>',1),Gc=ee('<div class="spin-box svelte-xwrhci"><input type="number" pattern="[0-9]*" inputmode="numeric" class="svelte-xwrhci"/> <!> <!></div>');function Pn(n,t){be(t,!1);const a=T();let i=V(t,"value",12),e=V(t,"step",8,1),o=V(t,"min",8,1),h=V(t,"max",8,9999),p=V(t,"percentage",8,!1),u=T(),v=V(t,"focused",12,!1),c=T();function k(_){Number.isNaN(_)||i(Math.min(h(),Math.max(o(),_))),xt().then(()=>{St(u,r(u).value=r(m)),S(r(m))})}function y(_){if(Math.floor(_)===_)return 0;const N=_.toString().split(".")[1].length||0,U=p()?N-2:N;return Math.max(0,U)}let m=T();function b(){k(parseFloat(this.value)/r(c))}function f(_){v()&&(k(i()+(_.deltaY<0?e():-e())),_.preventDefault())}function C(_){k(i()+_),r(j)&&setTimeout(()=>C(_),Y)}const x=[1500,1250,1e3,750,500,250];async function R(_){d(j,!0),Y=128,d(E,setTimeout(_,250));for(const N of x)Y=await new Promise(U=>setTimeout(()=>U(r(j)?Y/2:128),N))}function S(_){d(B,$a({pct:_}).replaceAll("%","-%-").split("-"))}function D(){S(r(u).value)}let B=T(),j=T(!1),Y,E=T();ie(()=>w(p()),()=>{d(c,p()?100:1)}),ie(()=>(w(i()),r(c),w(e())),()=>{d(m,(i()*r(c)).toFixed(y(e())))}),ie(()=>r(m),()=>{S(r(m))}),ie(()=>(w(p()),r(B)),()=>{d(a,p()&&!r(B)[0]?"2.2ch":void 0)}),Ye(),Oe();var A=Gc(),L=X(A);mt(L);let O;Mt(L,_=>d(u,_),()=>r(u));var l=$(L,2);{var P=_=>{var N=zc();Zt(N,5,()=>r(B),ms,(U,le)=>{var ae=it(),ve=ue(ae);{var K=de=>{var he=Z("%");g(de,he)},Re=de=>{var he=Bc(),Pe=X(he,!0);M(he),W(()=>F(Pe,r(le))),g(de,he)};Ve(ve,de=>{r(le)=="%"?de(K):de(Re,!1)})}g(U,ae)}),M(N),g(_,N)};Ve(l,_=>{p()&&_(P)})}var Q=$(l,2);{var z=_=>{var N=Wc(),U=ue(N);let le;var ae=X(U);kr(ae,{children:(de,he)=>{$s(de,{get icon(){return hn}})},$$slots:{default:!0}}),M(U);var ve=$(U,2);let K;var Re=X(ve);kr(Re,{children:(de,he)=>{$s(de,{get icon(){return iu}})},$$slots:{default:!0}}),M(ve),W((de,he,Pe,Te)=>{le=ot(U,1,"spinner decrement svelte-xwrhci",null,le,de),st(U,"title",he),K=ot(ve,1,"spinner increment svelte-xwrhci",null,K,Pe),st(ve,"title",Te)},[()=>({active:i()>o()}),()=>(w(G),s(()=>ha())),()=>({active:i()<h()}),()=>(w(G),s(()=>ma()))],q),Se("click",U,()=>{r(u).focus(),i()>o()&&C(-e())}),Se("mousedown",U,()=>R(()=>{i()>o()&&C(-e())})),Se("mouseup",U,()=>{clearTimeout(r(E)),d(j,!1)}),Se("click",ve,()=>{r(u).focus(),i()<h()&&C(e())}),Se("mousedown",ve,()=>R(()=>{i()<h()&&C(e())})),Se("mouseup",ve,()=>{clearTimeout(r(E)),d(j,!1)}),g(_,N)};Ve(Q,_=>{w(Pr),s(Pr)&&_(z)})}M(A),W(()=>{st(L,"min",o()*r(c)),st(L,"max",h()*r(c)),st(L,"step",e()*r(c)),Vs(L,r(m)),O=pa(L,"",O,{"padding-left":r(a)})}),Se("blur",L,b),Se("change",L,b),Se("input",L,D),Se("focusin",L,()=>v(!0)),Se("focusout",L,()=>v(!1)),Se("wheel",A,f),g(n,A),xe()}var jc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),qc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function ft(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8),e=V(t,"min",8,0),o=V(t,"max",8,9999),h=V(t,"step",8,.01),p=V(t,"percentage",8,!1),u=V(t,"focused",12,!1);var v=qc(),c=ue(v);Ke(c,()=>({"--cols":13})),Ue(c.lastChild,{children:(k,y)=>{var m=jc(),b=ue(m);Ke(b,()=>({"--col-size":7})),kt(b.lastChild,{breakpoint:"xs",children:(C,x)=>{var R=it(),S=ue(R);_t(S,t,"default",{}),g(C,R)},$$slots:{default:!0}}),M(b);var f=$(b,2);Ke(f,()=>({"--col-size":6})),kt(f.lastChild,{breakpoint:"xs",children:(C,x)=>{Tt(C,{children:(R,S)=>{Pn(R,{get min(){return e()},get max(){return o()},get step(){return h()},get percentage(){return p()},get value(){return a()},set value(D){a(D)},get focused(){return u()},set focused(D){u(D)},$$legacy:!0})},$$slots:{default:!0,revert:(R,S)=>{es(R,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(D){a(D)},$$legacy:!0})}}})},$$slots:{default:!0}}),M(f),g(k,m)},$$slots:{default:!0}}),M(c),g(n,v)}var Uc=ee("<!> <!>",1),Qc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Yc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function tt(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8),e=V(t,"min",8,0),o=V(t,"max",8,9999);var h=Yc(),p=ue(h);Ke(p,()=>({"--cols":13})),Ue(p.lastChild,{children:(u,v)=>{var c=Qc(),k=ue(c);Ke(k,()=>({"--col-size":7})),kt(k.lastChild,{breakpoint:"xs",children:(m,b)=>{var f=it(),C=ue(f);_t(C,t,"default",{}),g(m,f)},$$slots:{default:!0}}),M(k);var y=$(k,2);Ke(y,()=>({"--col-size":6})),kt(y.lastChild,{breakpoint:"xs",children:(m,b)=>{Ue(m,{class:"flex-grow-1",children:(f,C)=>{var x=Uc(),R=ue(x);_t(R,t,"tabs",{});var S=$(R,2);Tt(S,{children:(D,B)=>{Pn(D,{get min(){return e()},get max(){return o()},get value(){return a()},set value(j){a(j)},$$legacy:!0})},$$slots:{default:!0,revert:(D,B)=>{es(D,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(j){a(j)},$$legacy:!0})}}}),g(f,x)},$$slots:{default:!0}})},$$slots:{default:!0}}),M(y),g(u,c)},$$slots:{default:!0}}),M(p),g(n,h)}var Kc=ee('<input type="date" class="svelte-67zife"/>'),Xc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Zc=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),Jc=ee("<div><!></div>");function ed(n,t){be(t,!1);let a=V(t,"date",12);ie(()=>w(a()),()=>{a(a()?a():"1970-01-01")}),Ye();var i=Jc(),e=X(i);Tt(e,{children:(o,h)=>{var p=Zc(),u=ue(p);Ke(u,()=>({"--cols":13})),Ue(u.lastChild,{children:(v,c)=>{var k=Xc(),y=ue(k);Ke(y,()=>({"--col-size":7})),kt(y.lastChild,{breakpoint:"xs",children:(b,f)=>{var C=it(),x=ue(C);_t(x,t,"default",{}),g(b,C)},$$slots:{default:!0}}),M(y);var m=$(y,2);Ke(m,()=>({"--col-size":6})),kt(m.lastChild,{breakpoint:"xs",children:(b,f)=>{var C=Kc();mt(C),ts(C,a),g(b,C)},$$slots:{default:!0}}),M(m),g(v,k)},$$slots:{default:!0}}),M(u),g(o,p)},$$slots:{default:!0}}),M(i),g(n,i),xe()}var td=ee("<!> <!> <!> <!> <!>",1),sd=ee("<!> <!> <!>",1),rd=ee("<!> <!> <!> <!>",1);function nd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(y,"$config",a),o=()=>ye(f,"$fsrs",a),h=()=>ye(b,"$cardStateCustomizer",a),p=T(),u=T(),v=T();let c=V(t,"state",8),k=V(t,"api",8);const y=c().currentConfig,m=c().defaults,b=c().cardStateCustomizer,f=c().fsrs,C={maximumInterval:{title:Yr(),help:Aa(),url:pe.DeckOptions.maximumInterval},historicalRetention:{title:cr(),help:Da(),sched:et.FSRS},ignoreRevlogsBeforeMs:{title:ur(),help:Ia(),sched:et.FSRS},startingEase:{title:Ta(),help:Ra(),url:pe.DeckOptions.startingEase,sched:et.SM2},easyBonus:{title:Oa(),help:Sa(),url:pe.DeckOptions.easyBonus,sched:et.SM2},intervalModifier:{title:xa(),help:ba(),url:pe.DeckOptions.intervalModifier,sched:et.SM2},hardInterval:{title:Pa(),help:ka(),url:pe.DeckOptions.hardInterval,sched:et.SM2},newInterval:{title:_a(),help:wa(),url:pe.DeckOptions.newInterval,sched:et.SM2},customScheduling:{title:Ca(),help:ya(),url:"https://faqs.ankiweb.net/the-2021-scheduler.html#add-ons-and-custom-scheduling",global:!0}},x=Object.values(C);let R=T(null),S="";function D(P){S!=P&&(j&&P&&P!="1970-01-01"?(S=P,Gn({search:e().paramSearch||`preset:"${c().getCurrentNameForSearch()}" -is:suspended`,ignoreRevlogsBeforeDate:P}).then(Q=>{d(R,Q)})):d(R,null),j=!0)}let B=T(void 0),j=!0;const Y=1e3;let E=T("alert-warning"),A=T(),L=T();function O(P){r(A).show(),r(L).to(P)}ie(()=>e(),()=>{d(p,e().maximumReviewInterval<50?"alert-danger":"alert-warning")}),ie(()=>(e(),G),()=>{d(u,e().maximumReviewInterval<180?La():"")}),ie(()=>(r(B),e()),()=>{clearTimeout(r(B)),d(B,setTimeout(()=>{D(e().ignoreRevlogsBeforeDate)},Y))}),ie(()=>r(R),()=>{r(R)&&(Number(r(R).included)/Number(r(R).total)<.1?d(E,"alert-danger"):r(R).included!=r(R).total?d(E,"alert-warning"):d(E,"alert-info"))}),ie(()=>(r(R),G),()=>{d(v,r(R)?Ea({included:r(R).included.toString(),totalCards:r(R).total.toString()}):"")}),Ye(),Oe();const l=q(()=>(w(G),s(()=>dr())));lt(n,{get title(){return r(l)},children:(P,Q)=>{dt(P,{get slotHost(){return J},get api(){return k()},children:(z,_)=>{var N=rd(),U=ue(N);J(U,{children:(de,he)=>{tt(de,{get defaultValue(){return s(()=>m.maximumReviewInterval)},min:1,max:365*100,get value(){return e().maximumReviewInterval},set value(Pe){te(y,s(e).maximumReviewInterval=Pe,s(e))},children:(Pe,Te)=>{se(Pe,{$$events:{click:()=>O(Object.keys(C).indexOf("maximumInterval"))},children:(oe,_e)=>{re();var He=Z();W(()=>F(He,s(()=>C.maximumInterval.title))),g(oe,He)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=$(U,2);J(le,{children:(de,he)=>{Qe(de,{get warning(){return r(u)},get className(){return r(p)}})},$$slots:{default:!0}});var ae=$(le,2);{var ve=de=>{var he=td(),Pe=ue(he);J(Pe,{children:(Ee,Me)=>{ft(Ee,{get defaultValue(){return s(()=>m.initialEase)},min:1.31,max:5,get value(){return e().initialEase},set value(me){te(y,s(e).initialEase=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>O(Object.keys(C).indexOf("startingEase"))},children:(Ae,Ie)=>{re();var De=Z();W(()=>F(De,s(()=>C.startingEase.title))),g(Ae,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Te=$(Pe,2);J(Te,{children:(Ee,Me)=>{ft(Ee,{get defaultValue(){return s(()=>m.easyMultiplier)},min:1,max:5,get value(){return e().easyMultiplier},set value(me){te(y,s(e).easyMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>O(Object.keys(C).indexOf("easyBonus"))},children:(Ae,Ie)=>{re();var De=Z();W(()=>F(De,s(()=>C.easyBonus.title))),g(Ae,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var oe=$(Te,2);J(oe,{children:(Ee,Me)=>{ft(Ee,{get defaultValue(){return s(()=>m.intervalMultiplier)},min:.5,max:2,get value(){return e().intervalMultiplier},set value(me){te(y,s(e).intervalMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>O(Object.keys(C).indexOf("intervalModifier"))},children:(Ae,Ie)=>{re();var De=Z();W(()=>F(De,s(()=>C.intervalModifier.title))),g(Ae,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var _e=$(oe,2);J(_e,{children:(Ee,Me)=>{ft(Ee,{get defaultValue(){return s(()=>m.hardMultiplier)},min:.5,max:1.3,get value(){return e().hardMultiplier},set value(me){te(y,s(e).hardMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>O(Object.keys(C).indexOf("hardInterval"))},children:(Ae,Ie)=>{re();var De=Z();W(()=>F(De,s(()=>C.hardInterval.title))),g(Ae,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var He=$(_e,2);J(He,{children:(Ee,Me)=>{ft(Ee,{get defaultValue(){return s(()=>m.lapseMultiplier)},max:1,get value(){return e().lapseMultiplier},set value(me){te(y,s(e).lapseMultiplier=me,s(e))},children:(me,ke)=>{se(me,{$$events:{click:()=>O(Object.keys(C).indexOf("newInterval"))},children:(Ae,Ie)=>{re();var De=Z();W(()=>F(De,s(()=>C.newInterval.title))),g(Ae,De)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(de,he)},K=de=>{var he=sd(),Pe=ue(he);ft(Pe,{get defaultValue(){return s(()=>m.historicalRetention)},min:.5,max:1,percentage:!0,get value(){return e().historicalRetention},set value(_e){te(y,s(e).historicalRetention=_e,s(e))},children:(_e,He)=>{se(_e,{$$events:{click:()=>O(Object.keys(C).indexOf("historicalRetention"))},children:(Ee,Me)=>{re();var me=Z();W(ke=>F(me,ke),[()=>(w(G),s(()=>cr()))],q),g(Ee,me)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Te=$(Pe,2);J(Te,{children:(_e,He)=>{ed(_e,{get date(){return e().ignoreRevlogsBeforeDate},set date(Ee){te(y,s(e).ignoreRevlogsBeforeDate=Ee,s(e))},children:(Ee,Me)=>{se(Ee,{$$events:{click:()=>O(Object.keys(C).indexOf("ignoreRevlogsBeforeMs"))},children:(me,ke)=>{re();var Ae=Z();W(Ie=>F(Ae,Ie),[()=>(w(G),s(()=>ur()))],q),g(me,Ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var oe=$(Te,2);J(oe,{children:(_e,He)=>{Qe(_e,{get warning(){return r(v)},get className(){return r(E)}})},$$slots:{default:!0}}),g(de,he)};Ve(ae,de=>{o()?de(K,!1):de(ve)})}var Re=$(ae,2);J(Re,{children:(de,he)=>{Hc(de,{get title(){return s(()=>C.customScheduling.title)},get value(){return Ot(),h()},set value(Pe){vt(b,Pe)},$$events:{click:()=>O(Object.keys(C).indexOf("customScheduling"))},$$legacy:!0})},$$slots:{default:!0}}),g(z,N)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(P,Q)=>{const z=q(()=>(w(G),s(()=>dr())));$t(P,{get title(){return r(z)},get url(){return w(pe),s(()=>pe.DeckOptions.advanced)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return x},$$events:{mount:_=>{d(A,_.detail.modal),d(L,_.detail.carousel)}}})}}}),xe(),i()}var ad=ee("<!> <!>",1);function od(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$config",a);let o=V(t,"state",8),h=V(t,"api",8);const p=o().currentConfig,u=o().defaults,v={disableAutoplay:{title:Va(),help:Fa()},skipQuestionWhenReplaying:{title:Na(),help:Ma()}},c=Object.values(v);let k=T(),y=T();function m(f){r(k).show(),r(y).to(f)}Oe();const b=q(()=>(w(G),s(()=>fr())));lt(n,{get title(){return r(b)},children:(f,C)=>{dt(f,{get slotHost(){return J},get api(){return h()},children:(x,R)=>{var S=ad(),D=ue(S);J(D,{children:(j,Y)=>{Xe(j,{get defaultValue(){return s(()=>u.disableAutoplay)},get value(){return e().disableAutoplay},set value(E){te(p,s(e).disableAutoplay=E,s(e))},children:(E,A)=>{se(E,{$$events:{click:()=>m(Object.keys(v).indexOf("disableAutoplay"))},children:(L,O)=>{re();var l=Z();W(()=>F(l,s(()=>v.disableAutoplay.title))),g(L,l)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var B=$(D,2);J(B,{children:(j,Y)=>{Xe(j,{get defaultValue(){return s(()=>u.skipQuestionWhenReplayingAnswer)},get value(){return e().skipQuestionWhenReplayingAnswer},set value(E){te(p,s(e).skipQuestionWhenReplayingAnswer=E,s(e))},children:(E,A)=>{se(E,{$$events:{click:()=>m(Object.keys(v).indexOf("skipQuestionWhenReplaying"))},children:(L,O)=>{re();var l=Z();W(()=>F(l,s(()=>v.skipQuestionWhenReplaying.title))),g(L,l)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(x,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(f,C)=>{const x=q(()=>(w(G),s(()=>fr())));$t(f,{get title(){return r(x)},get url(){return w(pe),s(()=>pe.DeckOptions.audio)},slot:"tooltip",get helpSections(){return c},$$events:{mount:R=>{d(k,R.detail.modal),d(y,R.detail.carousel)}}})}}}),xe(),i()}function Er(){return[{label:Ua(),value:ht.DECK},{label:Qa(),value:ht.DECK_THEN_RANDOM_NOTES},{label:Ya(),value:ht.LOWEST_POSITION},{label:Ka(),value:ht.HIGHEST_POSITION},{label:Xa(),value:ht.RANDOM_NOTES},{label:Za(),value:ht.RANDOM_CARDS}]}function Mr(){return[{label:Ja(),value:ut.TEMPLATE},{label:eo(),value:ut.NO_SORT},{label:to(),value:ut.TEMPLATE_THEN_RANDOM},{label:so(),value:ut.RANDOM_NOTE_THEN_TEMPLATE},{label:Kr(),value:ut.RANDOM_CARD}]}function hs(n){return[{label:oo(),value:at.DAY},{label:io(),value:at.DAY_THEN_DECK},{label:lo(),value:at.DECK_THEN_DAY},{label:uo(),value:at.INTERVALS_ASCENDING},{label:co(),value:at.INTERVALS_DESCENDING},...id(n),{label:fo(),value:at.RETRIEVABILITY_ASCENDING},{label:go(),value:at.RETRIEVABILITY_DESCENDING},{label:Kr(),value:at.RANDOM},{label:vo(),value:at.ADDED},{label:$o(),value:at.REVERSE_ADDED}]}function fs(){return[{label:ro(),value:Ss.MIX_WITH_REVIEWS},{label:no(),value:Ss.AFTER_REVIEWS},{label:ao(),value:Ss.BEFORE_REVIEWS}]}function Nr(){return[{label:Co(),value:bt.SUSPEND},{label:wo(),value:bt.TAG_ONLY}]}function Fr(){return[{label:_o(),value:Ds.DUE},{label:ko(),value:Ds.RANDOM}]}function Vr(){return[{label:za(),value:Kt.BURY_CARD},{label:Wa(),value:Kt.ANSWER_AGAIN},{label:Ga(),value:Kt.ANSWER_GOOD},{label:ja(),value:Kt.ANSWER_HARD},{label:qa(),value:Kt.SHOW_REMINDER}]}function Hr(){return[{label:Ha(),value:sr.SHOW_ANSWER},{label:Ba(),value:sr.SHOW_REMINDER}]}function id(n){const t=[{label:n?po():ho(),value:at.EASE_ASCENDING},{label:n?mo():yo(),value:at.EASE_DESCENDING}];return n&&t.reverse(),t}var ld=ee("<!> <!> <!> <!> <!>",1);function ud(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$config",a);let o=V(t,"state",8),h=V(t,"api",8);const p=o().currentConfig,u=o().defaults,v={secondsToShowQuestion:{title:Ao(),help:Do()},secondsToShowAnswer:{title:Io(),help:To()},waitForAudio:{title:Ro(),help:Oo()},questionAction:{title:So(),help:xo()},answerAction:{title:bo(),help:Po()}},c=Object.values(v);let k=T(),y=T();function m(f){r(k).show(),r(y).to(f)}Oe();const b=q(()=>(w(G),s(()=>gr())));lt(n,{get title(){return r(b)},children:(f,C)=>{dt(f,{get slotHost(){return J},get api(){return h()},children:(x,R)=>{var S=ld(),D=ue(S);J(D,{children:(A,L)=>{ft(A,{get defaultValue(){return s(()=>u.secondsToShowQuestion)},step:.1,get value(){return e().secondsToShowQuestion},set value(O){te(p,s(e).secondsToShowQuestion=O,s(e))},children:(O,l)=>{se(O,{$$events:{click:()=>m(Object.keys(v).indexOf("secondsToShowQuestion"))},children:(P,Q)=>{re();var z=Z();W(()=>F(z,s(()=>v.secondsToShowQuestion.title))),g(P,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var B=$(D,2);J(B,{children:(A,L)=>{ft(A,{get defaultValue(){return s(()=>u.secondsToShowAnswer)},step:.1,get value(){return e().secondsToShowAnswer},set value(O){te(p,s(e).secondsToShowAnswer=O,s(e))},children:(O,l)=>{se(O,{$$events:{click:()=>m(Object.keys(v).indexOf("secondsToShowAnswer"))},children:(P,Q)=>{re();var z=Z();W(()=>F(z,s(()=>v.secondsToShowAnswer.title))),g(P,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var j=$(B,2);J(j,{children:(A,L)=>{Xe(A,{get defaultValue(){return s(()=>u.waitForAudio)},get value(){return e().waitForAudio},set value(O){te(p,s(e).waitForAudio=O,s(e))},children:(O,l)=>{se(O,{$$events:{click:()=>m(Object.keys(v).indexOf("waitForAudio"))},children:(P,Q)=>{re();var z=Z();W(()=>F(z,s(()=>v.waitForAudio.title))),g(P,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Y=$(j,2);J(Y,{children:(A,L)=>{const O=q(()=>(w(Hr),s(Hr)));gt(A,{get defaultValue(){return s(()=>u.questionAction)},get choices(){return r(O)},get value(){return e().questionAction},set value(l){te(p,s(e).questionAction=l,s(e))},children:(l,P)=>{se(l,{$$events:{click:()=>m(Object.keys(v).indexOf("questionAction"))},children:(Q,z)=>{re();var _=Z();W(()=>F(_,s(()=>v.questionAction.title))),g(Q,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var E=$(Y,2);J(E,{children:(A,L)=>{const O=q(()=>(w(Vr),s(Vr)));gt(A,{get defaultValue(){return s(()=>u.answerAction)},get choices(){return r(O)},get value(){return e().answerAction},set value(l){te(p,s(e).answerAction=l,s(e))},children:(l,P)=>{se(l,{$$events:{click:()=>m(Object.keys(v).indexOf("answerAction"))},children:(Q,z)=>{re();var _=Z();W(()=>F(_,s(()=>v.answerAction.title))),g(Q,_)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(x,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(f,C)=>{const x=q(()=>(w(G),s(()=>gr())));$t(f,{get title(){return r(x)},get url(){return w(pe),s(()=>pe.DeckOptions.autoAdvance)},slot:"tooltip",get helpSections(){return c},$$events:{mount:R=>{d(k,R.detail.modal),d(y,R.detail.carousel)}}})}}}),xe(),i()}var cd=ee("<!> <!> <!>",1);function dd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(p,"$config",a);let o=V(t,"state",8),h=V(t,"api",8);const p=o().currentConfig,u=o().defaults,v=`

`+Lo(),c={buryNewSiblings:{title:Ho(),help:Vo()+v},buryReviewSiblings:{title:Fo(),help:No()+v},buryInterdayLearningSiblings:{title:Mo(),help:Eo()+v}},k=Object.values(c);let y=T(),m=T();function b(C){r(y).show(),r(m).to(C)}Oe();const f=q(()=>(w(G),s(()=>vr())));lt(n,{get title(){return r(f)},children:(C,x)=>{dt(C,{get slotHost(){return J},get api(){return h()},children:(R,S)=>{var D=cd(),B=ue(D);J(B,{children:(E,A)=>{Xe(E,{get defaultValue(){return s(()=>u.buryNew)},get value(){return e().buryNew},set value(L){te(p,s(e).buryNew=L,s(e))},children:(L,O)=>{se(L,{$$events:{click:()=>b(Object.keys(c).indexOf("buryNewSiblings"))},children:(l,P)=>{re();var Q=Z();W(()=>F(Q,s(()=>c.buryNewSiblings.title))),g(l,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var j=$(B,2);J(j,{children:(E,A)=>{Xe(E,{get defaultValue(){return s(()=>u.buryReviews)},get value(){return e().buryReviews},set value(L){te(p,s(e).buryReviews=L,s(e))},children:(L,O)=>{se(L,{$$events:{click:()=>b(Object.keys(c).indexOf("buryReviewSiblings"))},children:(l,P)=>{re();var Q=Z();W(()=>F(Q,s(()=>c.buryReviewSiblings.title))),g(l,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Y=$(j,2);J(Y,{children:(E,A)=>{Xe(E,{get defaultValue(){return s(()=>u.buryInterdayLearning)},get value(){return e().buryInterdayLearning},set value(L){te(p,s(e).buryInterdayLearning=L,s(e))},children:(L,O)=>{se(L,{$$events:{click:()=>b(Object.keys(c).indexOf("buryInterdayLearningSiblings"))},children:(l,P)=>{re();var Q=Z();W(()=>F(Q,s(()=>c.buryInterdayLearningSiblings.title))),g(l,Q)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(R,D)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,x)=>{const R=q(()=>(w(G),s(()=>vr())));$t(C,{get title(){return r(R)},get url(){return w(pe),s(()=>pe.Studying.siblingsAndBurying)},slot:"tooltip",get helpSections(){return k},$$events:{mount:S=>{d(y,S.detail.modal),d(m,S.detail.carousel)}}})}}}),xe(),i()}function fd(){}var gd=ee('<hr class="dropdown-divider"/>');function vd(n){var t=gd();g(n,t)}var $d=ee('<div class="save svelte-ymxw35"> </div>'),pd=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),hd=ee("<!> <!> <!> <!> <!> <!>",1),md=ee('<div class="d-flex"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <!> <!></div>');function yd(n,t){be(t,!1);const a=window.getComputedStyle(document.body).direction=="rtl",i=qr();let e=V(t,"state",8);async function o(){if(await xt(),e().defaultConfigSelected()){alert(Go());return}const b=(e().removalWilLForceFullSync()?jo()+" ":"")+qo({name:e().getCurrentName()});if(confirm(sa(b)))try{e().removeCurrentConfig(),i("remove")}catch(f){alert(f)}}async function h(b){await Gs(),e().save(b)}const p="Control+Enter";let u=T(!1);Oe();var v=md(),c=X(v);const k=q(()=>(w(br),s(()=>br(p))));Ke(c,()=>({"--border-left-radius":a?"0":"var(--border-radius)","--border-right-radius":a?"var(--border-radius)":"0"})),cu(c.lastChild,{primary:!0,get tooltip(){return r(k)},$$events:{click:()=>h(gs.NORMAL)},children:(b,f)=>{var C=$d(),x=X(C,!0);M(C),W(R=>F(x,R),[()=>(w(G),s(()=>Bo()))],q),g(b,C)},$$slots:{default:!0}}),M(c);var y=$(c,2);lu(y,{keyCombination:p,$$events:{action:()=>h(gs.NORMAL)}});var m=$(y,2);ru(m,{get show(){return r(u)},closeOnInsideClick:!0,inline:!0,$$events:{close:()=>d(u,!1)},$$slots:{reference:(b,f)=>{var C=pd(),x=ue(C);Ke(x,()=>({"--border-right-radius":a?"0":"var(--border-radius)","--border-left-radius":a?"var(--border-radius)":"0"})),fu(x.lastChild,{class:"chevron",slot:"reference",iconSize:80,$$events:{click:()=>d(u,!r(u))},children:(R,S)=>{$s(R,{get icon(){return hn}})},$$slots:{default:!0}}),M(x),g(b,C)},floating:(b,f)=>{nu(b,{slot:"floating",children:(C,x)=>{var R=hd(),S=ue(R);Xt(S,{$$events:{click:()=>i("add")},children:(A,L)=>{re();var O=Z();W(l=>F(O,l),[()=>(w(G),s(()=>Xr()))],q),g(A,O)},$$slots:{default:!0}});var D=$(S,2);Xt(D,{$$events:{click:()=>i("clone")},children:(A,L)=>{re();var O=Z();W(l=>F(O,l),[()=>(w(G),s(()=>Zr()))],q),g(A,O)},$$slots:{default:!0}});var B=$(D,2);Xt(B,{$$events:{click:()=>i("rename")},children:(A,L)=>{re();var O=Z();W(l=>F(O,l),[()=>(w(G),s(()=>Jr()))],q),g(A,O)},$$slots:{default:!0}});var j=$(B,2);Xt(j,{$$events:{click:o},children:(A,L)=>{re();var O=Z();W(l=>F(O,l),[()=>(w(G),s(()=>zo()))],q),g(A,O)},$$slots:{default:!0}});var Y=$(j,2);vd(Y);var E=$(Y,2);Xt(E,{$$events:{click:()=>h(gs.APPLY_TO_CHILDREN)},children:(A,L)=>{re();var O=Z();W(l=>F(O,l),[()=>(w(G),s(()=>Wo()))],q),g(A,O)},$$slots:{default:!0}}),g(C,R)},$$slots:{default:!0}})}}}),M(v),g(n,v),xe()}var Cd=ee('<div class="modal fade" tabindex="-1" aria-labelledby="modalLabel" aria-hidden="true"><div class="modal-dialog"><div><div class="modal-header"><h5 class="modal-title" id="modalLabel"> </h5> <button type="button" data-bs-dismiss="modal" aria-label="Close"></button></div> <div class="modal-body"><form><div class="mb-3"><label for="prompt-input" class="col-form-label"> </label> <input id="prompt-input" type="text"/></div></form></div> <div class="modal-footer"><button type="button" class="btn btn-secondary">Cancel</button> <button type="button" class="btn btn-primary">OK</button></div></div></div></div>');function wd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(Xl,"$pageTheme",a),o=T();let h=V(t,"title",8),p=V(t,"prompt",8),u=V(t,"initialValue",8,""),v=V(t,"onOk",8);const c=Math.random().toString(36).substring(2),k=Ms(mn);let y=T(),m,b=T();function f(){v()(r(b).value),m.hide(),d(o,u())}function C(){m.hide(),d(o,u())}function x(){r(b).focus(),S(!0)}function R(){S(!1)}const{set:S,remove:D}=gu(C);Ns(()=>{r(y).addEventListener("shown.bs.modal",x),r(y).addEventListener("hidden.bs.modal",R),m=new vn(r(y),{keyboard:!1}),k.set(c,m)}),ga(()=>{D(),r(y).removeEventListener("shown.bs.modal",x),r(y).removeEventListener("hidden.bs.modal",R)}),ie(()=>w(u()),()=>{d(o,u())}),Ye(),Oe();var B=Cd(),j=X(B),Y=X(j);let E;var A=X(Y),L=X(A),O=X(L,!0);M(L);var l=$(L,2);let P;M(A);var Q=$(A,2),z=X(Q),_=X(z),N=X(_),U=X(N);M(N);var le=$(N,2);mt(le);let ae;Mt(le,he=>d(b,he),()=>r(b)),M(_),M(z),M(Q);var ve=$(Q,2),K=X(ve),Re=$(K,2);M(ve),M(Y),M(j),M(B),Mt(B,he=>d(y,he),()=>r(y)),W((he,Pe,Te)=>{var oe;E=ot(Y,1,"modal-content svelte-18qg9px",null,E,he),F(O,h()),P=ot(l,1,"btn-close svelte-18qg9px",null,P,Pe),F(U,`${(oe=p())!=null?oe:""}:`),ae=ot(le,1,"form-control svelte-18qg9px",null,ae,Te)},[()=>({"default-colors":e().isDark}),()=>({invert:e().isDark}),()=>({nightMode:e().isDark})],q),ts(le,()=>r(o),he=>d(o,he)),Se("submit",z,uu(f)),Se("click",K,C),Se("click",Re,f),g(n,B),Je(t,"modalKey",c);var de=xe({modalKey:c});return i(),de}var _d=ee('<div class="button-bar svelte-1h7iokg"><!> <!></div>'),kd=ee('<!> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function Pd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$configList",a),o=T(),h=T();let p=V(t,"state",8);const u=p().configList,v=qr(),c=()=>v("presetchange");function k(l){const P=Uo({decks:l.useCount});return`${l.name} (${P})`}function y(l){p().setCurrentIndex(l.detail.value),c()}function m(l){const P=l.trim();P.length&&(p().addConfig(P),c())}function b(l){const P=l.trim();P.length&&(p().cloneConfig(P),c())}function f(l){p().setCurrentName(l)}const C=Ms(mn);let x=T(),R=T(""),S=T(""),D=T(fd);function B(){d(S,Xr()),d(D,m),d(R,""),C.get(r(x)).show()}function j(){d(S,Zr()),d(D,b),d(R,p().getCurrentName()),C.get(r(x)).show()}function Y(){d(S,Jr()),d(D,f),d(R,p().getCurrentName()),C.get(r(x)).show()}ie(()=>e(),()=>{d(o,e().findIndex(l=>l.current))}),ie(()=>(e(),r(o)),()=>{d(h,k(e()[r(o)]))}),Ye(),Oe();var E=kd(),A=ue(E);const L=q(()=>(w(G),s(()=>Qo())));wd(A,{get title(){return r(S)},get prompt(){return r(L)},get initialValue(){return r(R)},get onOk(){return r(D)},get modalKey(){return r(x)},set modalKey(l){d(x,l)},$$legacy:!0});var O=$(A,2);Ke(O,()=>({"--gutter-block":"0.5rem","--sticky-borders":"0 0 1px"})),du(O.lastChild,{breakpoint:"sm",children:(l,P)=>{var Q=_d(),z=X(Q);va(z,{class:"flex-grow-1 mr1",get label(){return r(h)},get list(){return e()},parser:N=>({content:k(N),value:N.idx}),get value(){return r(o)},set value(N){d(o,N)},$$events:{change:y},$$legacy:!0});var _=$(z,2);yd(_,{get state(){return p()},$$events:{add:B,clone:j,rename:Y,remove:c}}),M(Q),g(l,Q)},$$slots:{default:!0}}),M(O),g(n,E),xe(),i()}var bd=ee('<li><button class="svelte-11xpnuy"> </button></li>'),xd=ee('<ul class="svelte-11xpnuy"></ul>');function Br(n,t){be(t,!1);let a=V(t,"tabs",8),i=V(t,"value",12),e=T(o());function o(){const v=a().slice().reverse().findIndex(c=>c.value!==null);return v===-1?0:a().length-v-1}function h(v){for(const[c,k]of a().entries())v===c?k.enable(i()):v>c?k.reset():k.disable()}const p=v=>()=>d(e,v);ie(()=>r(e),()=>{h(r(e))}),ie(()=>(w(a()),r(e)),()=>{var v;i((v=a()[r(e)].value)!=null?v:0)}),ie(()=>(w(a()),r(e),w(i())),()=>{a()[r(e)].setValue(i())}),Ye(),Oe();var u=xd();Zt(u,5,a,ms,(v,c,k)=>{var y=bd();let m;var b=X(y),f=la(()=>p(k)),C=X(b,!0);M(b),M(y),W(x=>{m=ot(y,1,"svelte-11xpnuy",null,m,x),F(C,(r(c),s(()=>r(c).title)))},[()=>({active:r(e)===k})],q),Se("click",b,function(...x){var R;(R=r(f))==null||R.apply(this,x)}),g(v,y)}),M(u),g(n,u),xe()}var Sd=ee("<!> <!> <!> <!> <!>",1);function Od(n,t){var _,N,U,le,ae,ve;be(t,!1);const[a,i]=ze(),e=()=>ye(y,"$config",a),o=()=>ye(m,"$limits",a),h=()=>ye(f,"$newCardsIgnoreReviewLimit",a),p=()=>ye(C,"$applyAllParentLimits",a),u=T();let v=V(t,"state",8),c=V(t,"api",8);function k(){St(B,r(B)[0]=new wt(cs(),e().newPerDay,K=>te(y,s(e).newPerDay=K,s(e)),e().newPerDay,null)),St(j,r(j)[0]=new wt(cs(),e().reviewsPerDay,K=>te(y,s(e).reviewsPerDay=K,s(e)),e().reviewsPerDay,null))}const y=v().currentConfig,m=v().deckLimits,b=v().defaults,f=v().newCardsIgnoreReviewLimit,C=v().applyAllParentLimits,x=`

`+Yo()+`

`+Ko(),R=`

`+Xo()+x,S=vs()+`

`+Zo(),D=vs()+`

`+Jo(),B=T([new wt(cs(),e().newPerDay,K=>te(y,s(e).newPerDay=K,s(e)),e().newPerDay,null),new wt($r(),(_=o().new)!=null?_:null,K=>te(m,s(o).new=K!=null?K:void 0,s(o)),null,null),new wt(pr(),o().newTodayActive&&(N=o().newToday)!=null?N:null,K=>te(m,s(o).newToday=K!=null?K:void 0,s(o)),null,(U=o().newToday)!=null?U:null)]),j=T([new wt(cs(),e().reviewsPerDay,K=>te(y,s(e).reviewsPerDay=K,s(e)),e().reviewsPerDay,null),new wt($r(),(le=o().review)!=null?le:null,K=>te(m,s(o).review=K!=null?K:void 0,s(o)),null,null),new wt(pr(),o().reviewTodayActive&&(ae=o().reviewToday)!=null?ae:null,K=>te(m,s(o).reviewToday=K!=null?K:void 0,s(o)),null,(ve=o().reviewToday)!=null?ve:null)]);let Y=T(0),E=T(0);const A={newLimit:{title:sn(),help:si()+x,url:pe.DeckOptions.newCardsday},reviewLimit:{title:tn(),help:ti()+R,url:pe.DeckOptions.maximumReviewsday},newCardsIgnoreReviewLimit:{title:en(),help:S,url:pe.DeckOptions.newCardsday,global:!0},applyAllParentLimits:{title:ei(),help:D,url:pe.DeckOptions.newCardsday,global:!0}},L=Object.values(A);let O=T(),l=T();function P(K){r(O).show(),r(l).to(K)}ie(()=>(r(Y),r(E),G),()=>{d(u,Math.min(9999,r(Y)*10)>r(E)?ri({cards:r(Y),expected:Math.min(9999,r(Y)*10)}):"")}),Ye(),Oe();const Q=q(()=>(w(G),s(()=>hr())));lt(n,{get title(){return r(Q)},children:(K,Re)=>{dt(K,{get slotHost(){return J},get api(){return c()},children:(de,he)=>{var Pe=Sd(),Te=ue(Pe);J(Te,{children:(Me,me)=>{tt(Me,{get defaultValue(){return s(()=>b.newPerDay)},get value(){return r(Y)},set value(ke){d(Y,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>P(Object.keys(A).indexOf("newLimit"))},children:(Ie,De)=>{re();var rt=Z();W(()=>F(rt,s(()=>A.newLimit.title))),g(Ie,rt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ke,Ae)=>{Br(ke,{slot:"tabs",get tabs(){return r(B)},get value(){return r(Y)},set value(Ie){d(Y,Ie)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var oe=$(Te,2);J(oe,{children:(Me,me)=>{tt(Me,{get defaultValue(){return s(()=>b.reviewsPerDay)},get value(){return r(E)},set value(ke){d(E,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>P(Object.keys(A).indexOf("reviewLimit"))},children:(Ie,De)=>{re();var rt=Z();W(()=>F(rt,s(()=>A.reviewLimit.title))),g(Ie,rt)},$$slots:{default:!0}})},$$slots:{default:!0,tabs:(ke,Ae)=>{Br(ke,{slot:"tabs",get tabs(){return r(j)},get value(){return r(E)},set value(Ie){d(E,Ie)},$$legacy:!0})}},$$legacy:!0})},$$slots:{default:!0}});var _e=$(oe,2);J(_e,{children:(Me,me)=>{Qe(Me,{get warning(){return r(u)}})},$$slots:{default:!0}});var He=$(_e,2);J(He,{children:(Me,me)=>{Xe(Me,{defaultValue:!1,get value(){return Ot(),h()},set value(ke){vt(f,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>P(Object.keys(A).indexOf("newCardsIgnoreReviewLimit"))},children:(Ie,De)=>{Rt(Ie,{get title(){return s(()=>A.newCardsIgnoreReviewLimit.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Ee=$(He,2);J(Ee,{children:(Me,me)=>{Xe(Me,{defaultValue:!1,get value(){return Ot(),p()},set value(ke){vt(C,ke)},children:(ke,Ae)=>{se(ke,{$$events:{click:()=>P(Object.keys(A).indexOf("applyAllParentLimits"))},children:(Ie,De)=>{Rt(Ie,{get title(){return s(()=>A.applyAllParentLimits.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(de,Pe)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(K,Re)=>{const de=q(()=>(w(G),s(()=>hr())));$t(K,{get title(){return r(de)},get url(){return w(pe),s(()=>pe.DeckOptions.dailyLimits)},slot:"tooltip",get helpSections(){return L},$$events:{mount:he=>{d(O,he.detail.modal),d(l,he.detail.carousel)}}})}}}),Je(t,"onPresetChange",k);var z=xe({onPresetChange:k});return i(),z}var Rd=ee("<!> <!> <!> <!> <!>",1);function Td(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$config",a),o=()=>ye(c,"$fsrs",a);let h=V(t,"state",8),p=V(t,"api",8);const u=h().currentConfig,v=h().defaults,c=h().fsrs,k=`

`+ni();let y=T([]);const m={newGatherPriority:{title:gi(),help:fi()+k},newCardSortOrder:{title:di(),help:ci()+k},newReviewPriority:{title:ui(),help:li()+k},interdayStepPriority:{title:ii(),help:oi()+k},reviewSortOrder:{title:rn(),help:ai()+k}},b=Object.values(m);let f=T(),C=T();function x(S){r(f).show(),r(C).to(S)}ie(()=>(e(),r(y),ht),()=>{switch(e().newCardGatherPriority){case ht.RANDOM_NOTES:d(y,[ut.TEMPLATE_THEN_RANDOM,ut.RANDOM_NOTE_THEN_TEMPLATE]);break;case ht.RANDOM_CARDS:d(y,[ut.TEMPLATE_THEN_RANDOM,ut.RANDOM_NOTE_THEN_TEMPLATE,ut.RANDOM_CARD]);break;default:d(y,[]);break}r(y).includes(e().newCardSortOrder)&&te(u,s(e).newCardSortOrder=0,s(e)),e().newCardSortOrder in ut||te(u,s(e).newCardSortOrder=0,s(e))}),Ye(),Oe();const R=q(()=>(w(G),s(()=>mr())));lt(n,{get title(){return r(R)},children:(S,D)=>{dt(S,{get slotHost(){return J},get api(){return p()},children:(B,j)=>{var Y=Rd(),E=ue(Y);J(E,{children:(P,Q)=>{const z=q(()=>(w(Er),s(Er)));gt(P,{get defaultValue(){return s(()=>v.newCardGatherPriority)},get choices(){return r(z)},get value(){return e().newCardGatherPriority},set value(_){te(u,s(e).newCardGatherPriority=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>x(Object.keys(m).indexOf("newGatherPriority"))},children:(U,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>m.newGatherPriority.title))),g(U,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var A=$(E,2);J(A,{children:(P,Q)=>{const z=q(()=>(w(Mr),s(Mr)));gt(P,{get defaultValue(){return s(()=>v.newCardSortOrder)},get choices(){return r(z)},get disabledChoices(){return r(y)},get value(){return e().newCardSortOrder},set value(_){te(u,s(e).newCardSortOrder=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>x(Object.keys(m).indexOf("newCardSortOrder"))},children:(U,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>m.newCardSortOrder.title))),g(U,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var L=$(A,2);J(L,{children:(P,Q)=>{const z=q(()=>(w(fs),s(fs)));gt(P,{get defaultValue(){return s(()=>v.newMix)},get choices(){return r(z)},get value(){return e().newMix},set value(_){te(u,s(e).newMix=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>x(Object.keys(m).indexOf("newReviewPriority"))},children:(U,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>m.newReviewPriority.title))),g(U,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var O=$(L,2);J(O,{children:(P,Q)=>{const z=q(()=>(w(fs),s(fs)));gt(P,{get defaultValue(){return s(()=>v.interdayLearningMix)},get choices(){return r(z)},get value(){return e().interdayLearningMix},set value(_){te(u,s(e).interdayLearningMix=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>x(Object.keys(m).indexOf("interdayStepPriority"))},children:(U,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>m.interdayStepPriority.title))),g(U,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var l=$(O,2);J(l,{children:(P,Q)=>{const z=q(()=>(w(hs),o(),s(()=>hs(o()))));gt(P,{get defaultValue(){return s(()=>v.reviewOrder)},get choices(){return r(z)},get value(){return e().reviewOrder},set value(_){te(u,s(e).reviewOrder=_,s(e))},children:(_,N)=>{se(_,{$$events:{click:()=>x(Object.keys(m).indexOf("reviewSortOrder"))},children:(U,le)=>{re();var ae=Z();W(()=>F(ae,s(()=>m.reviewSortOrder.title))),g(U,ae)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(B,Y)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(S,D)=>{const B=q(()=>(w(G),s(()=>mr())));$t(S,{get title(){return r(B)},get url(){return w(pe),s(()=>pe.DeckOptions.displayOrder)},slot:"tooltip",get helpSections(){return b},$$events:{mount:j=>{d(f,j.detail.modal),d(C,j.detail.carousel)}}})}}}),xe(),i()}var Id=ee('<textarea class="w-100 svelte-29jwoy"></textarea>');function Dd(n,t){be(t,!1);let a=V(t,"value",12),i=V(t,"defaults",8),e=T(),o=T();function h(){r(o)&&(St(o,r(o).style.height="auto"),St(o,r(o).style.height=`${r(o).scrollHeight+2}px`))}function p(k){return k.map(y=>y.toFixed(4)).join(", ")}const u=[0,17,19,21];function v(k){const y=k.target,m=y.value.replace(/ /g,"").split(",").filter(b=>b).map(b=>Number(b));u.includes(m.length)?a(m):(alert(vi()),y.value=r(e))}ie(()=>(w(a()),xt),()=>{d(e,p(a())),xt().then(h)}),Ye(),Oe();var c=Id();Se("resize",ua,h),jr(c),Mt(c,k=>d(o,k),()=>r(o)),W(k=>{Vs(c,r(e)),st(c,"placeholder",k)},[()=>(w(i()),s(()=>p(i())))],q),Se("blur",c,v),g(n,c),xe()}var Ad=ee("<!> <!>",1);function Ld(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8),e=V(t,"defaults",8);var o=Ad(),h=ue(o);_t(h,t,"default",{});var p=$(h,2);Tt(p,{children:(u,v)=>{Dd(u,{get defaults(){return e()},get value(){return a()},set value(c){a(c)},$$legacy:!0})},$$slots:{default:!0,revert:(u,v)=>{es(u,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(c){a(c)},$$legacy:!0})}}}),g(n,o)}var Ed=ee('<input type="text" class="w-100 mb-1"/>');function Md(n,t){let a=V(t,"value",12),i=V(t,"placeholder",8);Tt(n,{children:(e,o)=>{var h=Ed();mt(h),W(()=>st(h,"placeholder",i())),ts(h,a),g(e,h)},$$slots:{default:!0}})}var Be=(n=>(n[n.time=0]="time",n[n.count=1]="count",n[n.memorized=2]="memorized",n))(Be||{});function Is(n,t,a,i){const e=xr(n);if(e.selectAll(".lines").remove(),e.selectAll(".hover-columns").remove(),e.selectAll(".focus-line").remove(),e.selectAll(".legend").remove(),a.length==0)return Sr(e,!1),[];const o=e.transition().duration(600),h=new Date,p=a.map(l=>({...l,date:new Date(h.getTime()+l.x*24*60*60*1e3)})),u=h,v=Or(p,l=>l.date),c=Eu().domain([u,v]).range([t.marginLeft,t.width-t.marginRight]);e.select(".x-ticks").call(l=>l.transition(o).call($u(c).ticks(7).tickSizeOuter(0))).attr("direction","ltr");const k=l=>i==0?Rs(l,!0):l.toString(),y={1:p.map(l=>({...l,y:l.count})),0:p.map(l=>({...l,y:l.timeCost})),2:p.map(l=>({...l,y:l.memorized}))}[i],m=Or(y,l=>l.y),b=pu().range([t.height-t.marginBottom,t.marginTop]).domain([0,m]).nice();e.select(".y-ticks").call(l=>l.transition(o).call(hu(b).ticks(t.height/50).tickSizeOuter(0).tickFormat(k))).attr("direction","ltr"),e.select(".y-ticks .y-axis-title").remove(),e.select(".y-ticks").append("text").attr("class","y-axis-title").attr("transform","rotate(-90)").attr("y",0-t.marginLeft).attr("x",0-t.height/2).attr("font-size","1rem").attr("dy","1.1em").attr("fill","currentColor");const f=y.map(l=>[c(l.date),b(l.y),l.label]),C=zu(f,l=>Object.assign(l,{z:l[0][2]}),l=>l[2]),x=Gu;e.append("g").attr("class","lines").attr("fill","none").attr("stroke-width",1.5).attr("stroke-linejoin","round").attr("stroke-linecap","round").selectAll("path").data(Array.from(C.entries())).join("path").attr("vector-effect","non-scaling-stroke").attr("stroke",(l,P)=>x[P%x.length]).attr("d",l=>mu()(l[1].map(P=>[P[0],P[1]]))).attr("data-group",l=>l[0]);const R=e.append("line").attr("class","focus-line").attr("y1",t.marginTop).attr("y2",t.height-t.marginBottom).attr("stroke","black").attr("stroke-width",1).style("opacity",0),S=Array.from(C.values()).reduce((l,P)=>l.length>P.length?l:P),D=t.width/S.length;e.append("g").attr("class","hover-columns").selectAll("rect").data(S).join("rect").attr("x",l=>l[0]-D/2).attr("y",t.marginTop).attr("width",D).attr("height",t.height-t.marginTop-t.marginBottom).attr("fill","transparent").on("mousemove",j).on("mouseout",()=>{R.style("opacity",0),Rr()});const B={0:Rs,1:l=>nn({reviews:Math.round(l)}),2:l=>$i({memorized:Math.round(l).toFixed(0)})}[i];function j(l,P){yu(l,document.body);const Q=c.invert(P[0]),z={};C.forEach((U,le)=>{const ae=Cu(Re=>c.invert(Re[0])).left,ve=ae(U,Q),K=U[ve];K&&(z[le]=b.invert(K[1]))}),R.attr("x1",P[0]).attr("x2",P[0]).style("opacity",1);const _=+((Q.getTime()-Date.now())/(60*60*24*1e3)).toFixed();let N=`Date: ${ra(Q)}<br>In ${_} Days<br>`;for(const[U,le]of Object.entries(z))e.select(`path[data-group="${U}"]`).classed("hidden")||(N+=`<span style="color:${x[(parseInt(U)-1)%x.length]}">■</span> #${U}: ${B(le)}<br>`);Tr(N,l.pageX,l.pageY)}const Y=e.append("g").attr("class","legend").attr("font-family","sans-serif").attr("font-size",10).attr("text-anchor","start").selectAll("g").data(Array.from(C.keys())).join("g").attr("transform",(l,P)=>`translate(0,${P*20})`).attr("cursor","pointer").on("click",(l,P)=>L(l,P)).on("mousemove",A).on("mouseout",Rr),E={1:mi,0:({count:l})=>Rs(l),2:hi}[i];function A(l,P){const Q=y.filter(N=>N.label==P),z=i==2?Q[Q.length-1].memorized-Q[0].memorized:Cc(Q,N=>N.y),_=z/((Q==null?void 0:Q.length)||1);Tr(`#${P}:<br/>
                ${pi()}: ${E({count:_})}<br/>
                ${yi()}: ${B(z)}`,l.pageX,l.pageY)}Y.append("rect").attr("x",t.width-t.marginRight+36).attr("width",12).attr("height",12).attr("fill",(l,P)=>x[P%x.length]),Y.append("text").attr("x",t.width-t.marginRight+52).attr("y",7).attr("dy","0.3em").attr("fill","currentColor").text(l=>`#${l}`);const L=(l,P)=>{const Q=P,z=e.select(`path[data-group="${Q}"]`),_=z.classed("hidden"),N=l.currentTarget;z.classed("hidden",!_),z.style("display",()=>_?null:"none"),xr(N).select("rect").style("opacity",_?1:.5)};return Sr(e,!0),[]}var Nd=ee('<span class="day svelte-4k9s7n"> </span> <div class="input-container svelte-4k9s7n"><input type="range" list="easy_day_steplist" class="svelte-4k9s7n"/></div>',1),Fd=ee('<div class="container svelte-4k9s7n"><div class="easy-days-settings svelte-4k9s7n"><span class="svelte-4k9s7n"></span> <span class="header min-col svelte-4k9s7n"> </span> <span class="header svelte-4k9s7n"> </span> <span class="header normal-col svelte-4k9s7n"> </span> <!></div></div>');function bn(n,t){be(t,!1);const a=[Ci(),wi(),_i(),ki(),Pi(),bi(),xi()];let i=V(t,"values",28,()=>[0,0,0,0,0,0,0]);Oe(),J(n,{children:(e,o)=>{var h=Fd(),p=X(h),u=$(X(p),2),v=X(u,!0);M(u);var c=$(u,2),k=X(c,!0);M(c);var y=$(c,2),m=X(y,!0);M(y);var b=$(y,2);Zt(b,1,()=>a,ms,(f,C,x)=>{var R=Nd(),S=ue(R),D=X(S,!0);M(S);var B=$(S,2),j=X(B);mt(j),st(j,"step",.5),st(j,"max",1),st(j,"min",0),M(B),W(()=>F(D,r(C))),ts(j,()=>i()[x],Y=>i(i()[x]=Y,!0)),g(f,R)}),M(p),M(h),W((f,C,x)=>{F(v,f),F(k,C),F(m,x)},[()=>(w(G),s(()=>Si())),()=>(w(G),s(()=>Oi())),()=>(w(G),s(()=>Ri()))],q),g(e,h)},$$slots:{default:!0}}),xe()}var Vd=ee(" <!>",1),Hd=ee("<div> </div>"),Bd=ee('<label><input type="radio"/> </label> <label><input type="radio"/> </label> <label><input type="radio"/> </label>',1),zd=ee('<div class="radio-group svelte-18vh0ci"><!></div> <div class="svg-container svelte-18vh0ci"><svg class="svelte-18vh0ci"><!><!><!><!></svg></div> <!>',1),Wd=ee('<div class="modal svelte-18vh0ci" tabindex="-1"><div class="modal-dialog modal-xl"><div class="modal-content"><div class="modal-header svelte-18vh0ci"><h5 class="modal-title"> </h5> <button type="button" class="btn-close" aria-label="Close"></button></div> <div class="modal-body"><!> <!> <!> <!> <!> <details><summary class="svelte-18vh0ci"> </summary> <!></details> <details><summary class="svelte-18vh0ci"> </summary> <!> <!> <!> <!> <!> <!></details> <div style="display:none;"><details><summary class="svelte-18vh0ci"> </summary> <button><!></button> <!> <!></details></div> <button> </button> <button> </button> <button> </button> <!> <!></div></div></div></div>');function Gd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(S,"$config",a),o=()=>ye(Y,"$fsrs",a),h=()=>ye(l,"$newCardsIgnoreReviewLimit",a),p=T(),u=T(),v=T(),c=T(),k=T(),y=T(),m=[];let b=V(t,"state",8),f=V(t,"simulateFsrsRequest",12),C=V(t,"computing",8),x=V(t,"openHelpModal",8),R=V(t,"onPresetChange",8);const S=b().currentConfig;let D=T(Be.count),B=T([]),j=T(!1);const Y=b().fsrs,E=bu();let A=T(null),L=0,O=T([]);const l=b().newCardsIgnoreReviewLimit;let P=T(!0),Q=T(e().leechAction==bt.SUSPEND),z=T(e().leechThreshold),_=T(null),N=T(!1),U=T(void 0);function le(I,ce){const ne=[];for(let Ce=0;Ce<I.length;Ce++){let fe=0,$e=0;for(let Fe=Math.max(0,Ce-ce+1);Fe<=Ce;Fe++)fe+=I[Fe],$e++;ne.push(fe/$e)}return ne}function ae(I,ce){return I.map((ne,Ce)=>ne+ce[Ce])}function ve(I){return I?ji({num:I.toFixed(2)}):""}function K(){f(f().daysToSimulate=r(p),!0),f(f().deckSize=r(u),!0),f(f().suspendAfterLapseCount=r(Q)?r(z):void 0,!0),f(f().easyDaysPercentages=r(y),!0)}function Re(I){return I?zi({count:I.current}):""}async function de(){let I;K();try{await ps(async()=>{d(N,!0),I=await jn(f())},ce=>{ce.value.case==="computeRetention"&&d(U,ce.value.value)})}finally{d(N,!1),I&&d(_,I.optimalRetention)}}async function he(){let I;K();try{await ps(async()=>{d(j,!0),I=await qn(f())},()=>{})}finally{if(d(j,!1),I){L+=1;const ce=ae(I.dailyReviewCount,I.dailyNewCount),ne=I.accumulatedKnowledgeAcquisition;d(O,r(O).concat(I.dailyTimeCost.map((Ce,fe)=>({x:fe,timeCost:Ce,count:ce[fe],memorized:ne[fe],label:L})))),d(B,Is(r(A),E,r(O),r(D)))}}}function Pe(){d(O,r(O).filter(I=>I.label!==L)),L=Math.max(0,L-1),d(B,Is(r(A),E,r(O),r(D)))}let Te=V(t,"modal",12,null);function oe(I){return Te(new vn(I)),{destroy(){var ce;(ce=Te())==null||ce.dispose(),Te(null)}}}ie(()=>{},()=>{d(p,365)}),ie(()=>{},()=>{d(u,0)}),ie(()=>r(p),()=>{d(v,Math.ceil(r(p)/365))}),ie(()=>(r(j),r(N)),()=>{d(c,r(j)||r(N))}),ie(()=>r(U),()=>{d(k,Re(r(U)))}),ie(()=>(r(A),r(O),r(P),r(v),r(D)),()=>{if(r(A)){let I=r(O);if(r(P)){const ce=r(O).reduce((ne,Ce)=>(ne[Ce.label]=ne[Ce.label]||[],ne[Ce.label].push(Ce),ne),{});I=Object.values(ce).flatMap(ne=>{const Ce=le(ne.map(Fe=>Fe.timeCost),r(v)),fe=le(ne.map(Fe=>Fe.count),r(v)),$e=le(ne.map(Fe=>Fe.memorized),r(v));return ne.map((Fe,Et)=>({...Fe,timeCost:Ce[Et],count:fe[Et],memorized:$e[Et]}))})}d(B,Is(r(A),E,I,r(D)))}}),ie(()=>e(),()=>{d(y,[...e().easyDaysPercentages])}),Ye(),Oe();var _e=Wd(),He=X(_e),Ee=X(He),Me=X(Ee),me=X(Me),ke=X(me,!0);M(me);var Ae=$(me,2);M(Me);var Ie=$(Me,2),De=X(Ie);tt(De,{defaultValue:365,min:1,max:3650,get value(){return r(p)},set value(I){d(p,I)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Ti()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var rt=$(De,2);tt(rt,{defaultValue:0,min:0,max:1e5,get value(){return r(u)},set value(I){d(u,I)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Ii()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Nt=$(rt,2);ft(Nt,{get defaultValue(){return e(),s(()=>e().desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return f().desiredRetention},set value(I){f(f().desiredRetention=I,!0)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("desiredRetention")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Hs()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=$(Nt,2);tt(Ft,{get defaultValue(){return e(),s(()=>e().newPerDay)},min:0,max:9999,get value(){return f().newLimit},set value(I){f(f().newLimit=I,!0)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("newLimit")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>sn()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Vt=$(Ft,2);tt(Vt,{get defaultValue(){return e(),s(()=>e().reviewsPerDay)},min:0,max:9999,get value(){return f().reviewLimit},set value(I){f(f().reviewLimit=I,!0)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("reviewLimit")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>tn()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var It=$(Vt,2),Ht=X(It),ss=X(Ht,!0);M(Ht);var yt=$(Ht,2);vu(yt,()=>r(y),I=>{bn(I,{get values(){return r(y)},set values(ce){d(y,ce)},$$legacy:!0})}),M(It);var Bt=$(It,2),zt=X(Bt),Cs=X(zt,!0);M(zt);var Wt=$(zt,2);tt(Wt,{get defaultValue(){return e(),s(()=>e().maximumReviewInterval)},min:1,max:36500,get value(){return f().maxInterval},set value(I){f(f().maxInterval=I,!0)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("maximumInterval")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Yr()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var rs=$(Wt,2);const ns=q(()=>(w(hs),o(),s(()=>hs(o()))));gt(rs,{get defaultValue(){return e(),s(()=>e().reviewOrder)},get choices(){return r(ns)},get value(){return f().reviewOrder},set value(I){f(f().reviewOrder=I,!0)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("reviewSortOrder")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>rn()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var as=$(rs,2);Xe(as,{get defaultValue(){return h()},get value(){return f().newCardsIgnoreReviewLimit},set value(I){f(f().newCardsIgnoreReviewLimit=I,!0)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("newCardsIgnoreReviewLimit")},children:(ne,Ce)=>{const fe=q(()=>(w(G),s(()=>en())));Rt(ne,{get title(){return r(fe)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var os=$(as,2);Xe(os,{defaultValue:!0,get value(){return r(P)},set value(I){d(P,I)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("simulateFsrsReview")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Di()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var is=$(os,2);const Gt=q(()=>(e(),w(bt),s(()=>e().leechAction==bt.SUSPEND)));Xe(is,{get defaultValue(){return r(Gt)},get value(){return r(Q)},set value(I){d(Q,I)},children:(I,ce)=>{se(I,{$$events:{click:()=>x()("leechAction")},children:(ne,Ce)=>{re();var fe=Z();W($e=>F(fe,$e),[()=>(w(G),s(()=>Ai()))],q),g(ne,fe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var ls=$(is,2);{var jt=I=>{tt(I,{get defaultValue(){return e(),s(()=>e().leechThreshold)},min:1,max:9999,get value(){return r(z)},set value(ce){d(z,ce)},children:(ce,ne)=>{se(ce,{$$events:{click:()=>x()("leechThreshold")},children:(Ce,fe)=>{re();var $e=Z();W(Fe=>F($e,Fe),[()=>(w(G),s(()=>un()))],q),g(Ce,$e)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})};Ve(ls,I=>{r(Q)&&I(jt)})}M(Bt);var qt=$(Bt,2),Dt=X(qt),Pt=X(Dt),ws=X(Pt,!0);M(Pt);var Ct=$(Pt,2),H=X(Ct);{var ge=I=>{var ce=Z();W(ne=>F(ce,ne),[()=>(w(G),s(()=>As()))],q),g(I,ce)},Ne=I=>{var ce=Z();W(ne=>F(ce,ne),[()=>(w(G),s(()=>Wi()))],q),g(I,ce)};Ve(H,I=>{r(N)?I(ge):I(Ne,!1)})}M(Ct);var We=$(Ct,2);{var Le=I=>{var ce=Vd(),ne=ue(ce),Ce=$(ne);{var fe=$e=>{const Fe=q(()=>(w(G),s(()=>qi())));Qe($e,{get warning(){return r(Fe)},className:"alert-warning"})};Ve(Ce,$e=>{r(_),e(),s(()=>r(_)-e().desiredRetention>=.01)&&$e(fe)})}W($e=>F(ne,`${$e!=null?$e:""} `),[()=>(r(_),s(()=>ve(r(_))))],q),g(I,ce)};Ve(We,I=>{r(_)&&I(Le)})}var Ge=$(We,2);{var Ze=I=>{var ce=Hd(),ne=X(ce,!0);M(ce),W(()=>F(ne,r(k))),g(I,ce)};Ve(Ge,I=>{r(N)&&I(Ze)})}M(Dt),M(qt);var nt=$(qt,2),Sn=X(nt,!0);M(nt);var At=$(nt,2),On=X(At,!0);M(At);var Lt=$(At,2),Rn=X(Lt,!0);M(Lt);var js=$(Lt,2);{var Tn=I=>{var ce=Z();W(ne=>F(ce,ne),[()=>(w(G),s(()=>Gi()))],q),g(I,ce)};Ve(js,I=>{r(c)&&I(Tn)})}var In=$(js,2);wu(In,{children:(I,ce)=>{var ne=zd(),Ce=ue(ne),fe=X(Ce);_u(fe,{children:(_s,kf)=>{var Qs=Bd(),ks=ue(Qs),Ut=X(ks);mt(Ut);var Ys,Ln=$(Ut);M(ks);var Ps=$(ks,2),Qt=X(Ps);mt(Qt);var Ks,En=$(Qt);M(Ps);var Xs=$(Ps,2),Yt=X(Xs);mt(Yt);var Zs,Mn=$(Yt);M(Xs),W((pt,bs,xs)=>{var Js,er,tr;Ys!==(Ys=(w(Be),s(()=>Be.count)))&&(Ut.value=(Js=Ut.__value=(w(Be),s(()=>Be.count)))!=null?Js:""),F(Ln,` ${pt!=null?pt:""}`),Ks!==(Ks=(w(Be),s(()=>Be.time)))&&(Qt.value=(er=Qt.__value=(w(Be),s(()=>Be.time)))!=null?er:""),F(En,` ${bs!=null?bs:""}`),Zs!==(Zs=(w(Be),s(()=>Be.memorized)))&&(Yt.value=(tr=Yt.__value=(w(Be),s(()=>Be.memorized)))!=null?tr:""),F(Mn,` ${xs!=null?xs:""}`)},[()=>(w(G),s(()=>Li())),()=>(w(G),s(()=>Ei())),()=>(w(G),s(()=>Mi()))],q),Os(m,[],Ut,()=>(w(Be),s(()=>Be.count),r(D)),pt=>d(D,pt)),Os(m,[],Qt,()=>(w(Be),s(()=>Be.time),r(D)),pt=>d(D,pt)),Os(m,[],Yt,()=>(w(Be),s(()=>Be.memorized),r(D)),pt=>d(D,pt)),g(_s,Qs)},$$slots:{default:!0}}),M(Ce);var $e=$(Ce,2),Fe=X($e),Et=X(Fe);Tu(Et);var qs=$(Et);ku(qs);var Us=$(qs);Pu(Us,{get bounds(){return E}});var Dn=$(Us);xu(Dn,{get bounds(){return E}}),M(Fe),Mt(Fe,_s=>d(A,_s),()=>r(A)),M($e);var An=$($e,2);Iu(An,{get tableData(){return r(B)}}),W(()=>st(Fe,"viewBox",s(()=>`0 0 ${E.width} ${E.height}`))),g(I,ne)},$$slots:{default:!0}}),M(Ie),M(Ee),M(He),M(_e),pn(_e,I=>oe==null?void 0:oe(I)),W((I,ce,ne,Ce,fe,$e,Fe)=>{F(ke,I),F(ss,ce),F(Cs,ne),F(ws,Ce),ot(Ct,1,`btn ${r(N)?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),Ct.disabled=!r(N)&&C(),ot(nt,1,`btn ${C()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),nt.disabled=C(),F(Sn,fe),ot(At,1,`btn ${C()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),At.disabled=C(),F(On,$e),ot(Lt,1,`btn ${C()?"btn-warning":"btn-primary"}`,"svelte-18vh0ci"),Lt.disabled=C(),F(Rn,Fe)},[()=>(w(G),s(()=>an())),()=>(w(G),s(()=>on())),()=>(w(G),s(()=>Ni())),()=>(w(G),s(()=>ln())),()=>(w(G),s(()=>Fi())),()=>(w(G),s(()=>Vi())),()=>(w(G),s(()=>Hi()))],q),Se("click",Ae,()=>{var I;return(I=Te())==null?void 0:I.hide()}),Se("click",Ct,()=>de()),Se("click",nt,he),Se("click",At,Pe),Se("click",Lt,()=>{confirm(Bi())&&(te(S,s(e).newPerDay=f().newLimit,s(e)),te(S,s(e).reviewsPerDay=f().reviewLimit,s(e)),te(S,s(e).maximumReviewInterval=f().maxInterval,s(e)),te(S,s(e).desiredRetention=f().desiredRetention,s(e)),vt(l,f().newCardsIgnoreReviewLimit),te(S,s(e).reviewOrder=f().reviewOrder,s(e)),te(S,s(e).leechAction=r(Q)?bt.SUSPEND:bt.TAG_ONLY,s(e)),te(S,s(e).leechThreshold=r(z),s(e)),te(S,s(e).easyDaysPercentages=[...r(y)],s(e)),R()())}),g(n,_e),xe(),i()}var jd=ee("<button><!></button>"),qd=ee('<!> <!> <!> <div class="ms-1 me-1"><!> <!> <!> <!> <!> <button><!></button> <!> <div><!></div></div> <div class="m-1"><!> <button class="btn btn-primary svelte-1oyy9sz"> </button></div> <hr class="svelte-1oyy9sz"/> <div class="m-1"><button class="btn btn-primary svelte-1oyy9sz"> </button></div> <!>',1);function Ud(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(O,"$daysSinceLastOptimization",a),o=()=>ye(E,"$config",a),h=()=>ye(r(C),"$newCardsIgnoreReviewLimit",a),p=()=>ye(le,"$healthCheck",a),u=()=>ye(L,"$fsrsReschedule",a),v=T(),c=T(),k=T(),y=T(),m=T(),b=T(),f=T(),C=T(),x=T(),R=T(),S=T();let D=V(t,"state",8),B=V(t,"openHelpModal",8),j=V(t,"onPresetChange",8),Y=V(t,"newlyEnabled",8,!1);const E=D().currentConfig,A=D().defaults,L=D().fsrsReschedule,O=D().daysSinceLastOptimization;let l=T(!1),P=T(!1),Q=T(!1);const z=o().desiredRetention.toFixed(2);let _=T(),N=T(!1),U=T(!1);const le=D().fsrsHealthCheck;let ae=T(void 0);const ve=100;let K=T("");const Re=.8,de=.95;function he(H){return H<Re?Ki():H>de?Xi():""}async function Pe(H,ge){if(+z==r(m)){d(K,Zi());return}const Ne=new Qn({w:ge,search:r(y),before:+z,after:H}),We=await Yn(Ne);d(K,Ji({factor:We.factor.toFixed(2),previousDr:(+z*100).toString()}))}function Te(H){return H<.7||H>.97?"alert-danger":H<Re||H>de?"alert-warning":"alert-info"}function oe(){return BigInt(o().ignoreRevlogsBeforeDate?new Date(o().ignoreRevlogsBeforeDate).getTime():0)}async function _e(){if(r(N)){await rr({});return}if(D().presetAssignmentsChanged()){alert(yr());return}d(N,!0),d(_,void 0);try{await ps(async()=>{const H=ds(o()),ge=o().relearnSteps;let Ne=0,We=0;for(let Ze=0;Ze<ge.length&&(We+=ge[Ze],!(We>=1440));Ze++)Ne++;const Le=await Kn({search:o().paramSearch?o().paramSearch:r(y),ignoreRevlogsBeforeMs:oe(),currentParams:H,numOfRelearningSteps:Ne,healthCheck:p()}),Ge=H.length&&H.every((Ze,nt)=>Ze.toFixed(4)===Le.params[nt].toFixed(4))||Le.params.length===0;if(Le.healthCheckPassed!==void 0)Le.healthCheckPassed?setTimeout(()=>alert(el()),200):setTimeout(()=>alert(tl()),200);else if(Ge){const Ze=Le.fsrsItems?sl():rl();setTimeout(()=>alert(Ze),200)}Ge||(te(E,s(o).fsrsParams6=Le.params,s(o)),setTimeout(()=>{d(Q,!0)},201)),r(_)&&St(_,r(_).current=r(_).total)},H=>{H.value.case==="computeParams"&&d(_,H.value.value)})}finally{d(N,!1)}}async function He(){if(r(U)){await rr({});return}if(D().presetAssignmentsChanged()){alert(yr());return}d(U,!0),d(_,void 0);try{await ps(async()=>{const H=o().paramSearch?o().paramSearch:r(y),ge=await Zn({search:H,ignoreRevlogsBeforeMs:oe(),params:ds(o())});r(_)&&St(_,r(_).current=r(_).total),setTimeout(()=>alert(`Log loss: ${ge.logLoss.toFixed(4)}, RMSE(bins): ${(ge.rmseBins*100).toFixed(2)}%. ${ll()}`),200)},H=>{H.value.case==="computeParams"&&d(_,H.value.value)})}finally{d(U,!1)}}function Ee(H){if(!H||!H.total)return"";const ge=(H.current/H.total*100).toFixed(1);return H instanceof Xn?`${ge}%`:H.current===H.total?nl():al({pct:ge,reviews:H.reviews})}async function Me(){await Gs(),D().save(gs.COMPUTE_ALL_PARAMS)}let me=T();ie(()=>(e(),G),()=>{d(v,e()>30?Ui():"")}),ie(()=>r(l),()=>{r(l)&&d(P,!0)}),ie(()=>(w(Y()),r(P),r(Q)),()=>{d(c,Y()||r(P)||r(Q))}),ie(()=>(r(N),r(U)),()=>{d(k,r(N)||r(U))}),ie(()=>w(D()),()=>{d(y,`preset:"${D().getCurrentNameForSearch()}" -is:suspended`)}),ie(()=>o(),()=>{d(m,Number(o().desiredRetention.toFixed(2)))}),ie(()=>r(m),()=>{d(b,he(r(m)))}),ie(()=>(r(ae),r(c),r(m),o()),()=>{clearTimeout(r(ae)),r(c)?d(ae,setTimeout(()=>{Pe(r(m),ds(o()))},ve)):d(K,"")}),ie(()=>r(m),()=>{d(f,Te(r(m)))}),ie(()=>w(D()),()=>{Yl(d(C,D().newCardsIgnoreReviewLimit),"$newCardsIgnoreReviewLimit",a)}),ie(()=>(o(),w(D()),h()),()=>{d(x,new Un({params:ds(o()),desiredRetention:o().desiredRetention,newLimit:o().newPerDay,reviewLimit:o().reviewsPerDay,maxInterval:o().maximumReviewInterval,search:`preset:"${D().getCurrentNameForSearch()}" -is:suspended`,newCardsIgnoreReviewLimit:h(),easyDaysPercentages:o().easyDaysPercentages,reviewOrder:o().reviewOrder,historicalRetention:o().historicalRetention}))}),ie(()=>r(_),()=>{d(R,Ee(r(_)))}),ie(()=>r(_),()=>{var H,ge;d(S,(ge=(H=r(_))==null?void 0:H.reviews)!=null?ge:void 0)}),Ye(),Oe();var ke=qd(),Ae=ue(ke);ft(Ae,{get defaultValue(){return s(()=>A.desiredRetention)},min:.7,max:.99,percentage:!0,get value(){return o().desiredRetention},set value(H){te(E,s(o).desiredRetention=H,s(o))},get focused(){return r(l)},set focused(H){d(l,H)},children:(H,ge)=>{se(H,{$$events:{click:()=>B()("desiredRetention")},children:(Ne,We)=>{re();var Le=Z();W(Ge=>F(Le,Ge),[()=>(w(G),s(()=>Hs()))],q),g(Ne,Le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ie=$(Ae,2);Qe(Ie,{get warning(){return r(K)},className:"alert-info two-line"});var De=$(Ie,2);Qe(De,{get warning(){return r(b)},get className(){return r(f)}});var rt=$(De,2),Nt=X(rt);Ld(Nt,{defaultValue:[],get defaults(){return s(()=>A.fsrsParams6)},get value(){return o().fsrsParams6},set value(H){te(E,s(o).fsrsParams6=H,s(o))},children:(H,ge)=>{se(H,{$$events:{click:()=>B()("modelParams")},children:(Ne,We)=>{re();var Le=Z();W(Ge=>F(Le,Ge),[()=>(w(G),s(()=>cn()))],q),g(Ne,Le)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var Ft=$(Nt,2);Md(Ft,{get placeholder(){return r(y)},get value(){return o().paramSearch},set value(H){te(E,s(o).paramSearch=H,s(o))},$$legacy:!0});var Vt=$(Ft,2);Xe(Vt,{defaultValue:!1,get value(){return Ot(),u()},set value(H){vt(L,H)},children:(H,ge)=>{se(H,{$$events:{click:()=>B()("rescheduleCardsOnChange")},children:(Ne,We)=>{const Le=q(()=>(w(G),s(()=>dn())));Rt(Ne,{get title(){return r(Le)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var It=$(Vt,2);{var Ht=H=>{const ge=q(()=>(w(G),s(()=>il())));Qe(H,{get warning(){return r(ge)}})};Ve(It,H=>{u()&&H(Ht)})}var ss=$(It,2);Xe(ss,{defaultValue:!1,get value(){return Ot(),p()},set value(H){vt(le,H)},children:(H,ge)=>{se(H,{$$events:{click:()=>B()("healthCheck")},children:(Ne,We)=>{const Le=q(()=>(w(G),s(()=>Qi({text:fn()}))));Rt(Ne,{get title(){return r(Le)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0});var yt=$(ss,2),Bt=X(yt);{var zt=H=>{var ge=Z();W(Ne=>F(ge,Ne),[()=>(w(G),s(()=>As()))],q),g(H,ge)},Cs=H=>{var ge=Z();W(Ne=>F(ge,Ne),[()=>(w(G),s(()=>ol()))],q),g(H,ge)};Ve(Bt,H=>{r(N)?H(zt):H(Cs,!1)})}M(yt);var Wt=$(yt,2);{var rs=H=>{var ge=jd(),Ne=X(ge);{var We=Ge=>{var Ze=Z();W(nt=>F(Ze,nt),[()=>(w(G),s(()=>As()))],q),g(Ge,Ze)},Le=Ge=>{var Ze=Z();W(nt=>F(Ze,nt),[()=>(w(G),s(()=>ul()))],q),g(Ge,Ze)};Ve(Ne,Ge=>{r(U)?Ge(We):Ge(Le,!1)})}M(ge),W(()=>{ot(ge,1,`btn ${r(U)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),ge.disabled=!r(U)&&r(k)}),Se("click",ge,()=>He()),g(H,ge)};Ve(Wt,H=>{w(D()),s(()=>D().legacyEvaluate)&&H(rs)})}var ns=$(Wt,2),as=X(ns);{var os=H=>{var ge=Z();W(()=>F(ge,r(R))),g(H,ge)},is=(H,ge)=>{{var Ne=We=>{var Le=Z();W(Ge=>F(Le,Ge),[()=>(w(G),r(S),s(()=>nn({reviews:r(S)})))],q),g(We,Le)};Ve(H,We=>{r(S)!==void 0&&We(Ne)},ge)}};Ve(as,H=>{r(N)||r(U)?H(os):H(is,!1)})}M(ns),M(rt);var Gt=$(rt,2),ls=X(Gt);Qe(ls,{get warning(){return r(v)},className:"alert-warning"});var jt=$(ls,2),qt=X(jt,!0);M(jt),M(Gt);var Dt=$(Gt,4),Pt=X(Dt),ws=X(Pt,!0);M(Pt),M(Dt);var Ct=$(Dt,2);Gd(Ct,{get state(){return D()},get simulateFsrsRequest(){return r(x)},get computing(){return r(k)},get openHelpModal(){return B()},get onPresetChange(){return j()},get modal(){return r(me)},set modal(H){d(me,H)},$$legacy:!0}),W((H,ge)=>{ot(yt,1,`btn ${r(N)?"btn-warning":"btn-primary"}`,"svelte-1oyy9sz"),yt.disabled=!r(N)&&r(k),F(qt,H),F(ws,ge)},[()=>(w(G),s(()=>Yi())),()=>(w(G),s(()=>an()))],q),Se("click",yt,()=>_e()),Se("click",jt,()=>Me()),Se("click",Pt,()=>{var H;return(H=r(me))==null?void 0:H.show()}),g(n,ke),xe(),i()}var Qd=ee("<!> <!>",1);function Yd(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$fsrs",a);let o=V(t,"state",8),h=V(t,"api",8),p=V(t,"onPresetChange",8);const u=o().fsrs;let v=T(!1);const c={fsrs:{title:"FSRS",help:ml(),url:pe.DeckOptions.fsrs,global:!0},desiredRetention:{title:Hs(),help:pl()+`

`+hl(),sched:et.FSRS},modelParams:{title:cn(),help:vl()+`

`+$l(),sched:et.FSRS},rescheduleCardsOnChange:{title:dn(),help:gl(),sched:et.FSRS,global:!0},computeOptimalRetention:{title:ln(),help:fl(),sched:et.FSRS},healthCheck:{title:fn(),help:vs()+`

`+cl()+`

`+dl(),sched:et.FSRS,global:!0}},k=Object.values(c);let y=T(),m=T();function b(f){r(y).show(),r(m).to(f)}ie(()=>e(),()=>{e()||d(v,!0)}),Ye(),Oe(),lt(n,{title:"FSRS",children:(f,C)=>{dt(f,{get slotHost(){return J},get api(){return h()},children:(x,R)=>{var S=Qd(),D=ue(S);J(D,{children:(Y,E)=>{Xe(Y,{defaultValue:!1,get value(){return Ot(),e()},set value(A){vt(u,A)},children:(A,L)=>{se(A,{$$events:{click:()=>b(Object.keys(c).indexOf("fsrs"))},children:(O,l)=>{Rt(O,{get title(){return s(()=>c.fsrs.title)}})},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var B=$(D,2);{var j=Y=>{Ud(Y,{get state(){return o()},get newlyEnabled(){return r(v)},openHelpModal:E=>b(Object.keys(c).indexOf(E)),get onPresetChange(){return p()}})};Ve(B,Y=>{e()&&Y(j)})}g(x,S)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(f,C)=>{$t(f,{title:"FSRS",get url(){return w(pe),s(()=>pe.DeckOptions.fsrs)},slot:"tooltip",get fsrs(){return e()},get helpSections(){return k},$$events:{mount:x=>{d(y,x.detail.modal),d(m,x.detail.carousel)}}})}}}),xe(),i()}function Kd(n,t){be(t,!1);let a=V(t,"html",8),i=V(t,"mounted",8);Ns(i()),Oe();var e=it(),o=ue(e);yl(o,a),g(n,e),xe()}function Xd(n){switch(n){case ct.Seconds:return"s";case ct.Minutes:return"m";case ct.Hours:return"h";case ct.Days:return"d";default:return""}}function Zd(n){switch(n){case"s":return ct.Seconds;case"h":return ct.Hours;case"d":return ct.Days;default:return ct.Minutes}}function Jd(n){const t=n*60;let a=Du(t);return[ct.Months,ct.Years].includes(a)&&(a=ct.Days),`${Math.round(Au(a,t))}${Xd(a)}`}function ef(n){const t=n.match(/(\d+)(.*)/);if(t){const[a,i,e]=t,o=Zd(e),h=Lu(o)*parseInt(i,10);return Math.min(h,2**31)/60}else return 0}function tf(n){return n.map(Jd).join(" ")}function sf(n){return n.split(" ").map(ef).filter(t=>t)}var rf=ee('<input type="text" class="svelte-f5c9s0"/>');function nf(n,t){be(t,!1);let a=V(t,"value",12),i=T();function e(){a(sf(this.value))}ie(()=>w(a()),()=>{d(i,tf(a()))}),Ye(),Oe();var o=rf();mt(o),W(()=>Vs(o,r(i))),Se("blur",o,e),g(n,o),xe()}var af=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper> <svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1),of=ee('<svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper>',1);function xn(n,t){let a=V(t,"value",12),i=V(t,"defaultValue",8);var e=of(),o=ue(e);Ke(o,()=>({"--cols":13})),Ue(o.lastChild,{children:(h,p)=>{var u=af(),v=ue(u);Ke(v,()=>({"--col-size":7})),kt(v.lastChild,{breakpoint:"xs",children:(k,y)=>{var m=it(),b=ue(m);_t(b,t,"default",{}),g(k,m)},$$slots:{default:!0}}),M(v);var c=$(v,2);Ke(c,()=>({"--col-size":6})),kt(c.lastChild,{breakpoint:"xs",children:(k,y)=>{Tt(k,{children:(m,b)=>{nf(m,{get value(){return a()},set value(f){a(f)},$$legacy:!0})},$$slots:{default:!0,revert:(m,b)=>{es(m,{slot:"revert",get defaultValue(){return i()},get value(){return a()},set value(f){a(f)},$$legacy:!0})}}})},$$slots:{default:!0}}),M(c),g(h,u)},$$slots:{default:!0}}),M(o),g(n,e)}var lf=ee("<!> <!> <!> <!> <!> <!>",1);function uf(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$config",a),o=()=>ye(c,"$fsrs",a);let h=V(t,"state",8),p=V(t,"api",24,()=>({}));const u=h().currentConfig,v=h().defaults,c=h().fsrs;let k=T(),y=T();const m={relearningSteps:{title:xl(),help:bl(),url:pe.DeckOptions.relearningSteps},minimumInterval:{title:Pl(),help:kl(),url:pe.DeckOptions.minimumInterval,sched:et.SM2},leechThreshold:{title:un(),help:_l(),url:pe.Leeches.leeches},leechAction:{title:wl(),help:Cl(),url:pe.Leeches.waiting}},b=Object.values(m);let f=T(),C=T();function x(S){r(f).show(),r(C).to(S)}ie(()=>(e(),o(),G),()=>{const S=e().relearnSteps.length?e().relearnSteps[e().relearnSteps.length-1]/60/24:0;d(k,!o()&&S>e().minimumLapseInterval?Sl():""),d(y,o()&&S>=1?gn():"")}),Ye(),Oe();const R=q(()=>(w(G),s(()=>Cr())));lt(n,{get title(){return r(R)},children:(S,D)=>{dt(S,{get slotHost(){return J},get api(){return p()},children:(B,j)=>{var Y=lf(),E=ue(Y);J(E,{children:(z,_)=>{xn(z,{get defaultValue(){return s(()=>v.relearnSteps)},get value(){return e().relearnSteps},set value(N){te(u,s(e).relearnSteps=N,s(e))},children:(N,U)=>{se(N,{$$events:{click:()=>x(Object.keys(m).indexOf("relearningSteps"))},children:(le,ae)=>{re();var ve=Z();W(()=>F(ve,s(()=>m.relearningSteps.title))),g(le,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var A=$(E,2);J(A,{children:(z,_)=>{Qe(z,{get warning(){return r(y)}})},$$slots:{default:!0}});var L=$(A,2);{var O=z=>{J(z,{children:(_,N)=>{tt(_,{get defaultValue(){return s(()=>v.minimumLapseInterval)},min:1,get value(){return e().minimumLapseInterval},set value(U){te(u,s(e).minimumLapseInterval=U,s(e))},children:(U,le)=>{se(U,{$$events:{click:()=>x(Object.keys(m).indexOf("minimumInterval"))},children:(ae,ve)=>{re();var K=Z();W(()=>F(K,s(()=>m.minimumInterval.title))),g(ae,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}})};Ve(L,z=>{o()||z(O)})}var l=$(L,2);J(l,{children:(z,_)=>{Qe(z,{get warning(){return r(k)}})},$$slots:{default:!0}});var P=$(l,2);J(P,{children:(z,_)=>{tt(z,{get defaultValue(){return s(()=>v.leechThreshold)},min:1,get value(){return e().leechThreshold},set value(N){te(u,s(e).leechThreshold=N,s(e))},children:(N,U)=>{se(N,{$$events:{click:()=>x(Object.keys(m).indexOf("leechThreshold"))},children:(le,ae)=>{re();var ve=Z();W(()=>F(ve,s(()=>m.leechThreshold.title))),g(le,ve)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var Q=$(P,2);J(Q,{children:(z,_)=>{const N=q(()=>(w(Nr),s(Nr)));gt(z,{get defaultValue(){return s(()=>v.leechAction)},get choices(){return r(N)},breakpoint:"md",get value(){return e().leechAction},set value(U){te(u,s(e).leechAction=U,s(e))},children:(U,le)=>{se(U,{$$events:{click:()=>x(Object.keys(m).indexOf("leechAction"))},children:(ae,ve)=>{re();var K=Z();W(()=>F(K,s(()=>m.leechAction.title))),g(ae,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}}),g(B,Y)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(S,D)=>{const B=q(()=>(w(G),s(()=>Cr())));$t(S,{get title(){return r(B)},get url(){return w(pe),s(()=>pe.DeckOptions.lapses)},slot:"tooltip",get fsrs(){return o()},get helpSections(){return b},$$events:{mount:j=>{d(f,j.detail.modal),d(C,j.detail.carousel)}}})}}}),xe(),i()}var cf=ee("<!> <!> <!> <!>",1),df=ee("<!> <!> <!> <!> <!>",1);function ff(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(c,"$config",a),o=()=>ye(y,"$fsrs",a),h=T(),p=T();let u=V(t,"state",8),v=V(t,"api",24,()=>({}));const c=u().currentConfig,k=u().defaults,y=u().fsrs;let m=T(),b=T();const f={learningSteps:{title:El(),help:Ll(),url:pe.DeckOptions.learningSteps},graduatingInterval:{title:Al(),help:Dl(),url:pe.DeckOptions.graduatingInterval,sched:et.SM2},easyInterval:{title:Il(),help:Tl(),url:pe.DeckOptions.easyInterval,sched:et.SM2},insertionOrder:{title:Rl(),help:Ol(),url:pe.DeckOptions.insertionOrder}},C=Object.values(f);let x=T(),R=T();function S(B){r(x).show(),r(R).to(B)}ie(()=>(e(),o()),()=>{const B=e().learnSteps.length?e().learnSteps[e().learnSteps.length-1]/60/24:0;d(m,B>e().graduatingIntervalGood?Ml():""),d(b,o()&&B>=1?gn():"")}),ie(()=>(e(),G),()=>{d(h,e().graduatingIntervalGood>e().graduatingIntervalEasy?Nl():"")}),ie(()=>(e(),G),()=>{d(p,e().newCardInsertOrder==Ds.RANDOM?Fl():"")}),Ye(),Oe();const D=q(()=>(w(G),s(()=>wr())));lt(n,{get title(){return r(D)},children:(B,j)=>{dt(B,{get slotHost(){return J},get api(){return v()},children:(Y,E)=>{var A=df(),L=ue(A);J(L,{children:(_,N)=>{xn(_,{get defaultValue(){return s(()=>k.learnSteps)},get value(){return e().learnSteps},set value(U){te(c,s(e).learnSteps=U,s(e))},children:(U,le)=>{se(U,{$$events:{click:()=>S(Object.keys(f).indexOf("learningSteps"))},children:(ae,ve)=>{re();var K=Z();W(()=>F(K,s(()=>f.learningSteps.title))),g(ae,K)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var O=$(L,2);J(O,{children:(_,N)=>{Qe(_,{get warning(){return r(b)}})},$$slots:{default:!0}});var l=$(O,2);{var P=_=>{var N=cf(),U=ue(N);J(U,{children:(K,Re)=>{tt(K,{get defaultValue(){return s(()=>k.graduatingIntervalGood)},get value(){return e().graduatingIntervalGood},set value(de){te(c,s(e).graduatingIntervalGood=de,s(e))},children:(de,he)=>{se(de,{$$events:{click:()=>S(Object.keys(f).indexOf("graduatingInterval"))},children:(Pe,Te)=>{re();var oe=Z();W(()=>F(oe,s(()=>f.graduatingInterval.title))),g(Pe,oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var le=$(U,2);J(le,{children:(K,Re)=>{Qe(K,{get warning(){return r(m)}})},$$slots:{default:!0}});var ae=$(le,2);J(ae,{children:(K,Re)=>{tt(K,{get defaultValue(){return s(()=>k.graduatingIntervalEasy)},get value(){return e().graduatingIntervalEasy},set value(de){te(c,s(e).graduatingIntervalEasy=de,s(e))},children:(de,he)=>{se(de,{$$events:{click:()=>S(Object.keys(f).indexOf("easyInterval"))},children:(Pe,Te)=>{re();var oe=Z();W(()=>F(oe,s(()=>f.easyInterval.title))),g(Pe,oe)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var ve=$(ae,2);J(ve,{children:(K,Re)=>{Qe(K,{get warning(){return r(h)}})},$$slots:{default:!0}}),g(_,N)};Ve(l,_=>{o()||_(P)})}var Q=$(l,2);J(Q,{children:(_,N)=>{const U=q(()=>(w(Fr),s(Fr)));gt(_,{get defaultValue(){return s(()=>k.newCardInsertOrder)},get choices(){return r(U)},breakpoint:"md",get value(){return e().newCardInsertOrder},set value(le){te(c,s(e).newCardInsertOrder=le,s(e))},children:(le,ae)=>{se(le,{$$events:{click:()=>S(Object.keys(f).indexOf("insertionOrder"))},children:(ve,K)=>{re();var Re=Z();W(()=>F(Re,s(()=>f.insertionOrder.title))),g(ve,Re)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var z=$(Q,2);J(z,{children:(_,N)=>{Qe(_,{get warning(){return r(p)}})},$$slots:{default:!0}}),g(Y,A)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(B,j)=>{const Y=q(()=>(w(G),s(()=>wr())));$t(B,{get title(){return r(Y)},get url(){return w(pe),s(()=>pe.DeckOptions.newCards)},slot:"tooltip",get helpSections(){return C},get fsrs(){return o()},$$events:{mount:E=>{d(x,E.detail.modal),d(R,E.detail.carousel)}}})}}}),xe(),i()}var gf=ee('<div class="show-timer-switch" style="display: contents;"><!></div>'),vf=ee('<div class="show-timer-switch" style="display: contents;"><!></div>'),$f=ee("<!> <!> <!> <!>",1);function pf(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(u,"$config",a),o=T();let h=V(t,"state",8),p=V(t,"api",8);const u=h().currentConfig,v=h().defaults,c={maximumAnswerSecs:{title:Gl(),help:Wl()},showAnswerTimer:{title:zl(),help:Bl()},stopTimerOnAnswer:{title:Hl(),help:Vl()}},k=Object.values(c);let y=T(),m=T();function b(C){r(y).show(),r(m).to(C)}ie(()=>(e(),G),()=>{d(o,e().capAnswerTimeToSecs>600?jl():"")}),Ye(),Oe();const f=q(()=>(w(G),s(()=>_r())));lt(n,{get title(){return r(f)},children:(C,x)=>{dt(C,{get slotHost(){return J},get api(){return p()},children:(R,S)=>{var D=$f(),B=ue(D);J(B,{children:(A,L)=>{tt(A,{get defaultValue(){return s(()=>v.capAnswerTimeToSecs)},min:1,max:7200,get value(){return e().capAnswerTimeToSecs},set value(O){te(u,s(e).capAnswerTimeToSecs=O,s(e))},children:(O,l)=>{se(O,{$$events:{click:()=>b(Object.keys(c).indexOf("maximumAnswerSecs"))},children:(P,Q)=>{re();var z=Z();W(()=>F(z,s(()=>c.maximumAnswerSecs.title))),g(P,z)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0})},$$slots:{default:!0}});var j=$(B,2);J(j,{children:(A,L)=>{Qe(A,{get warning(){return r(o)}})},$$slots:{default:!0}});var Y=$(j,2);J(Y,{children:(A,L)=>{var O=gf(),l=X(O);Xe(l,{get defaultValue(){return s(()=>v.showTimer)},get value(){return e().showTimer},set value(P){te(u,s(e).showTimer=P,s(e))},children:(P,Q)=>{se(P,{$$events:{click:()=>b(Object.keys(c).indexOf("showAnswerTimer"))},children:(z,_)=>{re();var N=Z();W(()=>F(N,s(()=>c.showAnswerTimer.title))),g(z,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),M(O),g(A,O)},$$slots:{default:!0}});var E=$(Y,2);J(E,{children:(A,L)=>{var O=vf(),l=X(O);Xe(l,{get defaultValue(){return s(()=>v.stopTimerOnAnswer)},get value(){return e().stopTimerOnAnswer},set value(P){te(u,s(e).stopTimerOnAnswer=P,s(e))},children:(P,Q)=>{se(P,{$$events:{click:()=>b(Object.keys(c).indexOf("stopTimerOnAnswer"))},children:(z,_)=>{re();var N=Z();W(()=>F(N,s(()=>c.stopTimerOnAnswer.title))),g(z,N)},$$slots:{default:!0}})},$$slots:{default:!0},$$legacy:!0}),M(O),g(A,O)},$$slots:{default:!0}}),g(R,D)},$$slots:{default:!0}})},$$slots:{default:!0,tooltip:(C,x)=>{const R=q(()=>(w(G),s(()=>_r())));$t(C,{get title(){return r(R)},get url(){return w(pe),s(()=>pe.DeckOptions.timer)},slot:"tooltip",get helpSections(){return k},$$events:{mount:S=>{d(y,S.detail.modal),d(m,S.detail.carousel)}}})}}}),xe(),i()}var hf=ee("<!> <!> <!>",1),mf=ee('<datalist id="easy_day_steplist"><option>0.5</option></datalist> <!>',1);function yf(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(b,"$config",a),o=()=>ye(y,"$fsrsEnabled",a),h=()=>ye(m,"$reschedule",a),p=T(),u=T(),v=T();let c=V(t,"state",8),k=V(t,"api",8);const y=c().fsrs,m=c().fsrsReschedule,b=c().currentConfig,f=c().defaults,C=e().easyDaysPercentages.slice();ie(()=>e(),()=>{e().easyDaysPercentages.length!==7&&te(b,s(e).easyDaysPercentages=f.easyDaysPercentages.slice(),s(e))}),ie(()=>e(),()=>{d(p,e().easyDaysPercentages.some((D,B)=>D!==C[B]))}),ie(()=>(e(),G),()=>{d(u,e().easyDaysPercentages.some(D=>D===1)?"":ql())}),ie(()=>(r(p),o(),h(),G),()=>{d(v,r(p)&&!(o()&&h())?Ul():"")}),Ye(),Oe();var x=mf(),R=$(ue(x),2);const S=q(()=>(w(G),s(()=>on())));lt(R,{get title(){return r(S)},children:(D,B)=>{dt(D,{get slotHost(){return J},get api(){return k()},children:(j,Y)=>{var E=hf(),A=ue(E);bn(A,{get values(){return e().easyDaysPercentages},set values(l){te(b,s(e).easyDaysPercentages=l,s(e))},$$legacy:!0});var L=$(A,2);J(L,{children:(l,P)=>{Qe(l,{get warning(){return r(u)}})},$$slots:{default:!0}});var O=$(L,2);J(O,{children:(l,P)=>{Qe(l,{get warning(){return r(v)}})},$$slots:{default:!0}}),g(j,E)},$$slots:{default:!0}})},$$slots:{default:!0}}),g(n,x),xe(),i()}var Cf=ee("<div><!> <!> <!> <!> <!></div> <div><!> <!> <!> <!> <!> <!> <!></div>",1),wf=ee('<!> <div class="deck-options-page svelte-htbfcn"><svelte-css-wrapper style="display: contents"><!></svelte-css-wrapper></div>',1);function _f(n,t){be(t,!1);const[a,i]=ze(),e=()=>ye(h,"$addons",a);let o=V(t,"state",8);const h=o().addonComponents;function p(){return o().currentAuxData}function u(L){vt(h,[...e(),L])}function v(L,O){vt(h,[...e(),{component:Kd,html:L,mounted:O}])}const c={},k={},y={},m={},b={},f={},C={},x={},R={},S={};let D=T();Oe();var B=wf(),j=ue(B);Pd(j,{get state(){return o()},$$events:{presetchange(...L){var O;(O=r(D))==null||O.apply(this,L)}}});var Y=$(j,2),E=X(Y);Ke(E,()=>({"--gutter-inline":"0.25rem","--gutter-block":"0.75rem"})),Kl(E.lastChild,{breakpoint:"sm",class:"container-columns",children:(L,O)=>{var l=Cf(),P=ue(l),Q=X(P);Ue(Q,{class:"row-columns",children:(oe,_e)=>{Od(oe,{get state(){return o()},get api(){return k},get onPresetChange(){return r(D)},set onPresetChange(He){d(D,He)},$$legacy:!0})},$$slots:{default:!0}});var z=$(Q,2);Ue(z,{class:"row-columns",children:(oe,_e)=>{ff(oe,{get state(){return o()},get api(){return y}})},$$slots:{default:!0}});var _=$(z,2);Ue(_,{class:"row-columns",children:(oe,_e)=>{uf(oe,{get state(){return o()},get api(){return m}})},$$slots:{default:!0}});var N=$(_,2);Ue(N,{class:"row-columns",children:(oe,_e)=>{Td(oe,{get state(){return o()},get api(){return f}})},$$slots:{default:!0}});var U=$(N,2);Ue(U,{class:"row-columns",children:(oe,_e)=>{Yd(oe,{get state(){return o()},api:{},get onPresetChange(){return r(D)},set onPresetChange(He){d(D,He)},$$legacy:!0})},$$slots:{default:!0}}),M(P);var le=$(P,2),ae=X(le);Ue(ae,{class:"row-columns",children:(oe,_e)=>{dd(oe,{get state(){return o()},get api(){return b}})},$$slots:{default:!0}});var ve=$(ae,2);Ue(ve,{class:"row-columns",children:(oe,_e)=>{od(oe,{get state(){return o()},get api(){return x}})},$$slots:{default:!0}});var K=$(ve,2);Ue(K,{class:"row-columns",children:(oe,_e)=>{pf(oe,{get state(){return o()},get api(){return C}})},$$slots:{default:!0}});var Re=$(K,2);Ue(Re,{class:"row-columns",children:(oe,_e)=>{ud(oe,{get state(){return o()},get api(){return C}})},$$slots:{default:!0}});var de=$(Re,2);{var he=oe=>{Ue(oe,{class:"row-columns",children:(_e,He)=>{bc(_e,{get state(){return o()}})},$$slots:{default:!0}})};Ve(de,oe=>{e(),s(()=>e().length)&&oe(he)})}var Pe=$(de,2);Ue(Pe,{class:"row-columns",children:(oe,_e)=>{yf(oe,{get state(){return o()},get api(){return S}})},$$slots:{default:!0}});var Te=$(Pe,2);Ue(Te,{class:"row-columns",children:(oe,_e)=>{nd(oe,{get state(){return o()},get api(){return R}})},$$slots:{default:!0}}),M(le),g(L,l)},$$slots:{default:!0}}),M(E),M(Y),g(n,B),Je(t,"auxData",p),Je(t,"addSvelteAddon",u),Je(t,"addHtmlAddon",v),Je(t,"options",c),Je(t,"dailyLimits",k),Je(t,"newOptions",y),Je(t,"lapseOptions",m),Je(t,"buryOptions",b),Je(t,"displayOrder",f),Je(t,"timerOptions",C),Je(t,"audioOptions",x),Je(t,"advancedOptions",R),Je(t,"easyDays",S);var A=xe({auxData:p,addSvelteAddon:u,addHtmlAddon:v,options:c,dailyLimits:k,newOptions:y,lapseOptions:m,buryOptions:b,displayOrder:f,timerOptions:C,audioOptions:x,advancedOptions:R,easyDays:S});return i(),A}function ug(n,t){be(t,!1);let a=V(t,"data",8),i=T();globalThis.anki||(globalThis.anki={}),globalThis.anki.deckOptionsPendingChanges=async()=>{await Gs(),(!await a().state.isModified()||confirm(Ql()))&&Jn({})},Ns(()=>{globalThis.$deckOptions=new Promise((e,o)=>{e(r(i))}),a().state.resolveOriginalConfigs(),ea({})}),Oe(),Mt(_f(n,{get state(){return w(a()),s(()=>a().state)},$$legacy:!0}),e=>d(i,e),()=>r(i)),xe()}export{ug as component,lg as universal};
