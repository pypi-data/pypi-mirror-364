# ğŸ“¦ `ErisPulse.__main__` æ¨¡å—

*è‡ªåŠ¨ç”Ÿæˆäº 2025-07-22 16:35:31*

---

## æ¨¡å—æ¦‚è¿°

ErisPulse SDK å‘½ä»¤è¡Œå·¥å…·

æä¾›ErisPulseç”Ÿæ€ç³»ç»Ÿçš„åŒ…ç®¡ç†ã€æ¨¡å—æ§åˆ¶å’Œå¼€å‘å·¥å…·åŠŸèƒ½ã€‚

ğŸ’¡ **æç¤º**ï¼š

1. éœ€è¦Python 3.8+ç¯å¢ƒ
2. Windowså¹³å°éœ€è¦coloramaæ”¯æŒANSIé¢œè‰²

---

## ğŸ› ï¸ å‡½æ•°

### `main`

CLIå…¥å£ç‚¹

ğŸ’¡ **æç¤º**ï¼š

1. åˆ›å»ºCLIå®ä¾‹å¹¶è¿è¡Œ
2. å¤„ç†å…¨å±€å¼‚å¸¸

---

## ğŸ›ï¸ ç±»

### `CommandHighlighter`

é«˜äº®CLIå‘½ä»¤å’Œå‚æ•°

ğŸ’¡ **æç¤º**ï¼š

ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…å‘½ä»¤è¡Œå‚æ•°å’Œé€‰é¡¹


### `PackageManager`

ErisPulseåŒ…ç®¡ç†å™¨

æä¾›åŒ…å®‰è£…ã€å¸è½½ã€å‡çº§å’ŒæŸ¥è¯¢åŠŸèƒ½

ğŸ’¡ **æç¤º**ï¼š

1. æ”¯æŒæœ¬åœ°å’Œè¿œç¨‹åŒ…ç®¡ç†
2. åŒ…å«1å°æ—¶ç¼“å­˜æœºåˆ¶


#### ğŸ§° æ–¹æ³•

##### `__init__`

åˆå§‹åŒ–åŒ…ç®¡ç†å™¨

---

##### ğŸ”¹ `async` `_fetch_remote_packages`

ä»æŒ‡å®šURLè·å–è¿œç¨‹åŒ…æ•°æ®

:param url: è¿œç¨‹åŒ…æ•°æ®URL
:return: è§£æåçš„JSONæ•°æ®ï¼Œå¤±è´¥è¿”å›None

âš ï¸ **å¯èƒ½æŠ›å‡º**: `ClientError` - ç½‘ç»œè¯·æ±‚å¤±è´¥æ—¶æŠ›å‡º
âš ï¸ **å¯èƒ½æŠ›å‡º**: `JSONDecodeError` - JSONè§£æå¤±è´¥æ—¶æŠ›å‡º

---

##### ğŸ”¹ `async` `get_remote_packages`

è·å–è¿œç¨‹åŒ…åˆ—è¡¨ï¼Œå¸¦ç¼“å­˜æœºåˆ¶

:param force_refresh: æ˜¯å¦å¼ºåˆ¶åˆ·æ–°ç¼“å­˜
:return: åŒ…å«æ¨¡å—å’Œé€‚é…å™¨çš„å­—å…¸

:return:
    dict: {
        "modules": {æ¨¡å—å: æ¨¡å—ä¿¡æ¯},
        "adapters": {é€‚é…å™¨å: é€‚é…å™¨ä¿¡æ¯},
        "cli_extensions": {æ‰©å±•å: æ‰©å±•ä¿¡æ¯}
    }

---

##### `get_installed_packages`

è·å–å·²å®‰è£…çš„åŒ…ä¿¡æ¯

:return: å·²å®‰è£…åŒ…å­—å…¸ï¼ŒåŒ…å«æ¨¡å—ã€é€‚é…å™¨å’ŒCLIæ‰©å±•

:return:
    dict: {
        "modules": {æ¨¡å—å: æ¨¡å—ä¿¡æ¯},
        "adapters": {é€‚é…å™¨å: é€‚é…å™¨ä¿¡æ¯},
        "cli_extensions": {æ‰©å±•å: æ‰©å±•ä¿¡æ¯}
    }

---

##### `_is_module_enabled`

æ£€æŸ¥æ¨¡å—æ˜¯å¦å¯ç”¨

:param module_name: æ¨¡å—åç§°
:return: æ¨¡å—æ˜¯å¦å¯ç”¨

âš ï¸ **å¯èƒ½æŠ›å‡º**: `ImportError` - æ ¸å¿ƒæ¨¡å—ä¸å¯ç”¨æ—¶æŠ›å‡º

---

##### `_run_pip_command`

æ‰§è¡Œpipå‘½ä»¤

:param args: pipå‘½ä»¤å‚æ•°åˆ—è¡¨
:param description: è¿›åº¦æ¡æè¿°
:return: å‘½ä»¤æ˜¯å¦æˆåŠŸæ‰§è¡Œ

---

##### `install_package`

å®‰è£…æŒ‡å®šåŒ…

:param package_name: è¦å®‰è£…çš„åŒ…å
:param upgrade: æ˜¯å¦å‡çº§å·²å®‰è£…çš„åŒ…
:return: å®‰è£…æ˜¯å¦æˆåŠŸ

---

##### `uninstall_package`

å¸è½½æŒ‡å®šåŒ…

:param package_name: è¦å¸è½½çš„åŒ…å
:return: å¸è½½æ˜¯å¦æˆåŠŸ

---

##### `upgrade_all`

å‡çº§æ‰€æœ‰å·²å®‰è£…çš„ErisPulseåŒ…

:return: å‡çº§æ˜¯å¦æˆåŠŸ

âš ï¸ **å¯èƒ½æŠ›å‡º**: `KeyboardInterrupt` - ç”¨æˆ·å–æ¶ˆæ“ä½œæ—¶æŠ›å‡º

---

### `ReloadHandler`

æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶å¤„ç†å™¨

å®ç°çƒ­é‡è½½åŠŸèƒ½ï¼Œç›‘æ§æ–‡ä»¶å˜åŒ–å¹¶é‡å¯è¿›ç¨‹

ğŸ’¡ **æç¤º**ï¼š

1. æ”¯æŒ.pyæ–‡ä»¶ä¿®æ”¹é‡è½½
2. æ”¯æŒé…ç½®æ–‡ä»¶ä¿®æ”¹é‡è½½


#### ğŸ§° æ–¹æ³•

##### `__init__`

åˆå§‹åŒ–å¤„ç†å™¨

:param script_path: è¦ç›‘æ§çš„è„šæœ¬è·¯å¾„
:param reload_mode: æ˜¯å¦å¯ç”¨é‡è½½æ¨¡å¼

---

##### `start_process`

å¯åŠ¨ç›‘æ§è¿›ç¨‹

---

##### `_terminate_process`

ç»ˆæ­¢å½“å‰è¿›ç¨‹

:raises subprocess.TimeoutExpired: è¿›ç¨‹ç»ˆæ­¢è¶…æ—¶æ—¶æŠ›å‡º

---

##### `on_modified`

æ–‡ä»¶ä¿®æ”¹äº‹ä»¶å¤„ç†

:param event: æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶

---

##### `_handle_reload`

å¤„ç†é‡è½½é€»è¾‘

:param event: æ–‡ä»¶ç³»ç»Ÿäº‹ä»¶
:param reason: é‡è½½åŸå› æè¿°

---

### `CLI`

ErisPulseå‘½ä»¤è¡Œæ¥å£

æä¾›å®Œæ•´çš„å‘½ä»¤è¡Œäº¤äº’åŠŸèƒ½

ğŸ’¡ **æç¤º**ï¼š

1. æ”¯æŒåŠ¨æ€åŠ è½½ç¬¬ä¸‰æ–¹å‘½ä»¤
2. æ”¯æŒæ¨¡å—åŒ–å­å‘½ä»¤ç³»ç»Ÿ


#### ğŸ§° æ–¹æ³•

##### `__init__`

åˆå§‹åŒ–CLI

---

##### `_create_parser`

åˆ›å»ºå‘½ä»¤è¡Œå‚æ•°è§£æå™¨

:return: é…ç½®å¥½çš„ArgumentParserå®ä¾‹

---

##### `_load_external_commands`

åŠ è½½ç¬¬ä¸‰æ–¹CLIå‘½ä»¤

:param subparsers: å­å‘½ä»¤è§£æå™¨

âš ï¸ **å¯èƒ½æŠ›å‡º**: `ImportError` - åŠ è½½å‘½ä»¤å¤±è´¥æ—¶æŠ›å‡º

---

##### `_print_version`

æ‰“å°ç‰ˆæœ¬ä¿¡æ¯

---

##### `_print_installed_packages`

æ‰“å°å·²å®‰è£…åŒ…ä¿¡æ¯

:param pkg_type: åŒ…ç±»å‹ (modules/adapters/cli/all)
:param outdated_only: æ˜¯å¦åªæ˜¾ç¤ºå¯å‡çº§çš„åŒ…

---

##### `_print_remote_packages`

æ‰“å°è¿œç¨‹åŒ…ä¿¡æ¯

:param pkg_type: åŒ…ç±»å‹ (modules/adapters/cli/all)

---

##### `_is_package_outdated`

æ£€æŸ¥åŒ…æ˜¯å¦è¿‡æ—¶

:param package_name: åŒ…å
:param current_version: å½“å‰ç‰ˆæœ¬
:return: æ˜¯å¦æœ‰æ–°ç‰ˆæœ¬å¯ç”¨

---

##### `_resolve_package_name`

è§£æç®€ç§°åˆ°å®Œæ•´åŒ…å

:param short_name: æ¨¡å—/é€‚é…å™¨ç®€ç§°
:return: å®Œæ•´åŒ…åï¼Œæœªæ‰¾åˆ°è¿”å›None

---

##### `_setup_watchdog`

è®¾ç½®æ–‡ä»¶ç›‘æ§

:param script_path: è¦ç›‘æ§çš„è„šæœ¬è·¯å¾„
:param reload_mode: æ˜¯å¦å¯ç”¨é‡è½½æ¨¡å¼

---

##### `_cleanup`

æ¸…ç†èµ„æº

---

##### `run`

è¿è¡ŒCLI

âš ï¸ **å¯èƒ½æŠ›å‡º**: `KeyboardInterrupt` - ç”¨æˆ·ä¸­æ–­æ—¶æŠ›å‡º
âš ï¸ **å¯èƒ½æŠ›å‡º**: `Exception` - å‘½ä»¤æ‰§è¡Œå¤±è´¥æ—¶æŠ›å‡º

---


*æ–‡æ¡£æœ€åæ›´æ–°äº 2025-07-22 16:35:31*