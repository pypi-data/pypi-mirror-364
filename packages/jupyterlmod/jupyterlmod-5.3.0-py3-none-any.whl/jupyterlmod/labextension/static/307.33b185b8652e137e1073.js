"use strict";(self.webpackChunk_cmd_ntrf_jupyterlab_lmod=self.webpackChunk_cmd_ntrf_jupyterlab_lmod||[]).push([[307,688],{688:(e,t,r)=>{r.r(t),r.d(t,{default:()=>g});var o=r(607),n=r(246),a=r(907),s=r(931),i=r(213),l=r(748);const c="server-proxy",d=Object.freeze(["allow-same-origin","allow-scripts","allow-popups","allow-forms","allow-downloads","allow-modals"]),u=Object.freeze({type:"object",properties:{id:{type:"string"},title:{type:"string"},url:{type:"string",format:"uri"},newBrowserTab:{type:"boolean"}}});var p;!function(e){e.open=`${c}:open`}(p||(p={}));const f=a.PageConfig.getBaseUrl(),w=a.PageConfig.getOption("notebookPage"),b="tree"===w,m=!!w;function y(e){const{new_browser_tab:t,launcher_entry:r,name:o}=e,n=t&&!m?" [â†—]":"";return{url:`${f}${r.path_info}`,title:`${r.title}${n}`,newBrowserTab:t,id:`${c}:${o}`}}const g={id:"@jupyterhub/jupyter-server-proxy:add-launcher-entries",autoStart:!0,requires:[],optional:[i.ILauncher,o.ILayoutRestorer,n.IToolbarWidgetRegistry,s.IDefaultFileBrowser],activate:async function(e,t,r,o,s){if(m&&!b)return;const i=l.ServerConnection.makeSettings(),w=a.URLExt.join(f,`${c}/servers-info`),g=await l.ServerConnection.makeRequest(w,{},i);if(!g.ok)return console.warn("Could not fetch metadata about registered servers. Make sure jupyter-server-proxy is installed."),void console.warn(g);const v=await g.json(),_=new n.WidgetTracker({namespace:c});r&&r.restore(_,{command:p.open,args:e=>({url:e.content.url,title:e.content.title.label,newBrowserTab:!1,id:e.content.id}),name:e=>e.content.id});const{commands:h,shell:k}=e;if(h.addCommand(p.open,{label:e=>e.title,describedBy:async()=>({args:u}),execute:e=>{const{id:t,title:r,url:o,newBrowserTab:a}=e;if(a)return void window.open(o,"_blank");let s=_.find((e=>e.content.id===t));return s||(s=function(e,t,r){const o=new n.IFrame({sandbox:d});o.title.label=r,o.title.closable=!0,o.url=t,o.addClass("jp-ServerProxy"),o.id=e;const a=new n.MainAreaWidget({content:o});return a.addClass("jp-ServerProxy"),a}(t,o,r)),_.has(s)||_.add(s),s.isAttached?k.activateById(s.id):k.add(s),s}}),t)for(let e of v.server_processes){const{launcher_entry:r}=e;r.enabled&&t.add({command:p.open,args:y(e),category:"Notebook",kernelIconUrl:r.icon_url||void 0})}if(b&&o&&s){const{toolbar:e}=s,t=(e.layout||{}).widgets;if(t&&t.length)for(const e of t)if(e&&e.menus){const t=e.menus[0];t.addItem({type:"separator"});for(const e of v.server_processes){let r={...y(e),newBrowserTab:!0};t.addItem({command:p.open,args:r})}}}}}}}]);