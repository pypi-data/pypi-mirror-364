"use strict";(self.webpackChunk_cmd_ntrf_jupyterlab_lmod=self.webpackChunk_cmd_ntrf_jupyterlab_lmod||[]).push([[980],{456:(e,t)=>{class n{constructor(e){var t;this.url=e+"module",this._xsrf=("_xsrf",(t=document.cookie.match("\\b_xsrf=([^;]*)\\b"))?t[1]:void 0),this._head_auth={"X-XSRFToken":this._xsrf},this._head_auth_json={"Content-Type":"application/json","X-XSRFToken":this._xsrf}}async system(){const e=await fetch(this.url+"/system",{headers:this._head_auth});if(200==e.status)return e.json()}async avail(){const e=await fetch(this.url+"/modules",{headers:this._head_auth});if(200==e.status)return e.json()}async list(e=!1){let t=this.url;e&&(t+="?all=true");const n=await fetch(t,{headers:this._head_auth});if(200==n.status)return n.json()}async load(e){const t={modules:e};return(await fetch(this.url,{method:"POST",headers:this._head_auth_json,body:JSON.stringify(t)})).json()}async restore(e){const t={name:e};return(await fetch(this.url+"/collections",{method:"PATCH",headers:this._head_auth_json,body:JSON.stringify(t)})).json()}async save(e){const t={name:e};return(await fetch(this.url+"/collections",{method:"POST",headers:this._head_auth_json,body:JSON.stringify(t)})).json()}async savelist(){const e=await fetch(this.url+"/collections",{headers:this._head_auth});if(200==e.status)return e.json()}async show(e){const t=await fetch(this.url+"/modules/"+e,{headers:this._head_auth});if(200==t.status)return t.json()}async freeze(){const e=await fetch(this.url+"?lang=python",{headers:this._head_auth});if(200==e.status)return e.json()}async unload(e){const t={modules:e};return(await fetch(this.url,{method:"DELETE",headers:this._head_auth_json,body:JSON.stringify(t)})).json()}async paths(){const e=await fetch(this.url+"/paths",{headers:this._head_auth});if(200==e.status)return e.json()}async folders(e){const t=await fetch(this.url+"/folders/"+e,{headers:this._head_auth});if(200==t.status)return t.json()}async use(e,t=!1){const n={paths:e,append:t};return(await fetch(this.url+"/paths",{method:"POST",headers:this._head_auth_json,body:JSON.stringify(n)})).json()}async unuse(e){const t={paths:e};return(await fetch(this.url+"/paths",{method:"DELETE",headers:this._head_auth_json,body:JSON.stringify(t)})).json()}}e.exports={Module:n};try{t.Module=n}catch(e){}},980:function(e,t,n){var s=this&&this.__createBinding||(Object.create?function(e,t,n,s){void 0===s&&(s=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,s,o)}:function(e,t,n,s){void 0===s&&(s=n),e[s]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&s(t,e,n);return o(t,e),t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.jplmodIcons=void 0;const l=n(607),d=n(246),c=n(256),r=n(213),u=n(907),h=n(456),p=a(n(66)),m=n(346),f=i(n(841)),g=i(n(337));function w(e,t){const n=document.createElement("li"),s=document.createElement("span"),o=document.createElement("button");return n.append(s),n.append(o),n.setAttribute("class","jp-Module-item"),s.setAttribute("class","jp-Module-itemLabel"),s.innerText=e,o.setAttribute("class","jp-Module-itemButton jp-mod-styled"),o.innerHTML=t,n}t.jplmodIcons={lmod:new m.LabIcon({name:"jupyter_lmod:lmod_logo",svgstr:f.default}),tmod:new m.LabIcon({name:"jupyter_lmod:tmod_logo",svgstr:g.default})};const y=new h.Module(u.PageConfig.getBaseUrl());var v=null,k=null,b={},_={};async function j(){const e=await y.freeze();(0,d.showDialog)({title:"Export modules",body:new T("Add this in a notebook to load the same modules :",e),buttons:[d.Dialog.okButton()]})}function x(e){return(0,d.showDialog)({title:"Save collection",body:new E,buttons:[d.Dialog.cancelButton(),d.Dialog.okButton({label:"Save"})]}).then((e=>{if("Save"===e.button.label){let t=e.value;y.save(t||"default")}}))}class M extends c.Widget{constructor(e){super(),this.id="module-jupyterlab",this.title.caption="Software Modules",this.addClass("jp-Module"),this.module_map=e;const t=document.createElement("div"),n=document.createElement("div");this.searchInput=document.createElement("input"),t.setAttribute("class","jp-Module-search"),n.setAttribute("class","jp-Module-search-wrapper"),this.searchInput.setAttribute("id","modules"),this.searchInput.setAttribute("class","jp-Module-input"),this.searchInput.setAttribute("placeholder","Filter available modules..."),t.appendChild(n),n.appendChild(this.searchInput),this.node.insertAdjacentElement("afterbegin",t),this.node.insertAdjacentHTML("beforeend",'<div id="module" class="jp-Module-content">\n          <div class="jp-Module-section">\n              <div class="jp-Module-sectionHeader"><H2>Loaded Modules</H2>\n                  <button\n                    title="Create collection"\n                    class="jp-Module-collectionButton jp-mod-styled jp-AddIcon"\n                    id="save-button"\n                  ></button>\n                  <button\n                    title="Restore collection"\n                    class="jp-Module-collectionButton jp-mod-styled jp-UndoIcon"\n                    id="restore-button"\n                  ></button>\n                  <button\n                    title="Generate Python code"\n                    class="jp-Module-collectionButton jp-mod-styled jp-CopyIcon"\n                    id="export-button"\n                  ></button>\n              </div>\n              <div class="jp-Module-sectionContainer">\n                  <ul class="jp-Module-sectionList" id="module_loaded_list">\n                  </ul>\n              </div>\n          </div>\n          <div class="jp-Module-section">\n              <div class="jp-Module-sectionHeader">\n                <h2 id="module_avail_header">Available Modules</h2>\n              </div>\n              <div class="jp-Module-sectionContainer">\n                <ul class="jp-Module-sectionList" id="module_avail_list">\n                </ul>\n              </div>\n          </div>\n      </div>'),this.loadedUList=this.node.querySelector("#module_loaded_list"),this.availUList=this.node.querySelector("#module_avail_list"),this.availHeader=this.node.querySelector("#module_avail_header"),this.loadedUList.addEventListener("click",this.onClickModuleList.bind(this)),this.availUList.addEventListener("click",this.onClickModuleList.bind(this));const s=this.node.getElementsByClassName("jp-Module-collectionButton");s["save-button"].addEventListener("click",x),s["restore-button"].addEventListener("click",this.restore.bind(this)),s["export-button"].addEventListener("click",j),this.searchInput.addEventListener("keyup",this.updateAvail.bind(this))}setIcon(){Promise.all([y.system()]).then((e=>{const n=e[0];console.log("Module system found:",n),this.title.icon=t.jplmodIcons[n]}))}async onClickModuleList(e){const t=e.target;if("SPAN"==t.tagName)!async function(e){const t=(await y.show(e)).split("\n"),n=t.slice(3).join("\n").trim(),s=t[1].slice(0,-1);(0,d.showDialog)({title:e,body:new T(s,n),buttons:[d.Dialog.okButton()]})}(t.innerText);else if("BUTTON"==t.tagName){const n=e.target.closest("li"),s=n.querySelector("span").innerText;"Load"==t.innerText?(t.innerText="Loading...",t.style.visibility="visible",t.style.backgroundColor="#99b644",n.style.backgroundColor="#dde6c0",await async function(e){const t=await y.load([e]);null!=t&&(0,d.showDialog)({title:"Module warning",body:new T("Warning",t),buttons:[d.Dialog.okButton()]})}(s)):"Unload"==t.innerText&&(t.innerText="Unloading...",t.style.visibility="visible",t.style.backgroundColor="#ee8b44",n.style.backgroundColor="#fad7c0",await y.unload([s])),this.update()}}update(){Promise.all([y.avail(),y.list()]).then((e=>{const t=new Set(e[0]),n=e[1],s=n.map((e=>w(e,"Unload")));this.loadedUList.innerText="",this.loadedUList.append(...s),n.map((e=>t.delete(e))),this.searchSource=Array.from(t),this.updateAvail(),function(e,t){var n;for(let s in b)(null!==(n=t[s])&&void 0!==n?n:[s]).some((t=>e.some((e=>e.toLowerCase().startsWith(t)))))?_.hasOwnProperty(s)||(_[s]=v.add(b[s])):_.hasOwnProperty(s)&&(_[s].dispose(),delete _[s])}(n,this.module_map)})),k.refreshSpecs()}updateAvail(){const e=this.searchInput.value;this.availUList.innerText="";const t=this.searchSource.filter((t=>t.toUpperCase().includes(e.toUpperCase()))),n=t.map((e=>w(e,"Load")));this.availUList.append(...n),this.availHeader.innerText=`Available Modules (${t.length})`}restore(e){return(0,d.showDialog)({title:"Restore collection",body:new S,buttons:[d.Dialog.cancelButton(),d.Dialog.okButton({label:"Restore"})]}).then((e=>{if("Restore"===e.button.label){const t=e.value;y.restore(t).then((()=>this.update()))}}))}}class L{constructor(e){this.launcher_pins=e}add(e){let t=e.args.id.split(":")[1];this.launcher_pins.includes(t.toLowerCase())?v.add(e):b[t]=e}}const C={id:"jupyterlab_lmod",autoStart:!0,requires:[d.ICommandPalette,l.ILayoutRestorer,r.ILauncher],activate:async function(e,t,n,s){v=s,k=e.serviceManager.kernelspecs;const o=await async function(e,t){let n,s=[];const o=await fetch(u.PageConfig.getBaseUrl()+"module/launcher-pins",{headers:y._head_auth});o.ok?s=(await o.json()).launcher_pins.map((e=>e.toLowerCase())):console.log("jupyter-{lmod/tmod}: could not communicate with jupyter-{lmod/tmod} API.");const a=await fetch(u.PageConfig.getBaseUrl()+"module/launcher-module-map",{headers:y._head_auth});a.ok?n=(await a.json()).launcher_module_map:(console.log("jupyter-{lmod/tmod}: could not communicate with jupyter-{lmod/tmod} API."),n={});let i=new L(s);return p.default.activate(e,i,t),n}(e,n),a=new M(o);a.setIcon(),n.add(a,"module-sessions"),e.shell.add(a,"left",{rank:1e3}),a.update(),console.log("JupyterFrontEnd extension lmod/tmod is activated!")}};class E extends c.Widget{constructor(){let e=document.createElement("div"),t=document.createElement("label");t.innerHTML="Enter a new collection name:",e.appendChild(t);let n=document.createElement("input");n.placeholder="default",e.appendChild(n),super({node:e})}getValue(){return this.node.querySelector("input").value}}class S extends c.Widget{constructor(){let e=document.createElement("div"),t=document.createElement("label");t.innerHTML="Select a collection to restore :",e.appendChild(t);let n=document.createElement("select");y.savelist().then((e=>{e.map(((e,t)=>{let s=document.createElement("option");s.value=e,s.text=e,n.add(s)}))})),e.appendChild(n),super({node:e})}getValue(){return this.node.querySelector("select").value}}class T extends c.Widget{constructor(e,t){let n=document.createElement("div"),s=document.createElement("label");s.innerHTML=e,n.appendChild(s);let o=document.createElement("div");o.classList.add("jp-JSONEditor-host"),o.setAttribute("style","min-height:inherit;");let a=document.createElement("pre");a.setAttribute("style","margin:10px 10px; white-space:pre-wrap;"),a.innerHTML=t,o.appendChild(a),n.appendChild(o),super({node:n})}}t.default=C},841:e=>{e.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n\x3c!-- Created with Inkscape (http://www.inkscape.org/) --\x3e\n\n<svg\n   width="32"\n   height="32"\n   viewBox="0 0 8.4666662 8.4666662"\n   version="1.1"\n   id="svg1"\n   xml:space="preserve"\n   inkscape:version="1.3.2 (091e20ef0f, 2023-11-25)"\n   sodipodi:docname="jupyter-lmod.svg"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:svg="http://www.w3.org/2000/svg"><sodipodi:namedview\n     id="namedview1"\n     pagecolor="#ffffff"\n     bordercolor="#999999"\n     borderopacity="1"\n     inkscape:showpageshadow="2"\n     inkscape:pageopacity="0"\n     inkscape:pagecheckerboard="0"\n     inkscape:deskcolor="#d1d1d1"\n     inkscape:document-units="mm"\n     inkscape:zoom="19.591506"\n     inkscape:cx="14.904418"\n     inkscape:cy="12.91376"\n     inkscape:window-width="1920"\n     inkscape:window-height="1058"\n     inkscape:window-x="0"\n     inkscape:window-y="0"\n     inkscape:window-maximized="1"\n     inkscape:current-layer="layer1" /><defs\n     id="defs1" /><g\n     inkscape:label="Layer 1"\n     inkscape:groupmode="layer"\n     id="layer1"><g\n       id="g4"\n       transform="matrix(0.24730928,0,0,0.24730928,-26.765244,-33.966451)"><path\n         class="jp-icon3"\n         fill="#616161"\n         d="m 118.11607,166.56894 -6.68073,-3.88946 v -7.88349 l 0.003,-8.06636 3.44022,2.05874 3.21172,1.87586 0.1345,-0.1345 0.1345,-0.1345 -3.36355,-1.97774 -3.36355,-1.97775 0.62905,-0.39459 0.62904,-0.39459 5.9021,-3.47511 6.27167,-3.76158 6.70067,4.00073 6.8158,3.99888 -3.47863,2.06258 -3.32009,1.93863 0.12917,0.12918 0.12918,0.12917 3.17746,-1.88026 3.49831,-2.07884 -0.0294,8.10972 v 7.91114 l -6.51079,3.73052 c -2.31449,1.39679 -7.00686,4.04399 -7.00686,4.04399 l -0.0161,-7.78361 -0.29063,-0.007 -0.0103,7.78269 z m 10.04152,-6.37887 2.98921,-1.80369 0.0726,-3.68642 0.0726,-3.68641 -2.96326,-1.83004 -3.27093,-2.08598 -3.26386,2.08598 -2.96327,1.83004 0.0726,3.68684 0.0726,3.68685 2.91041,1.78278 3.02513,1.85175 0.214,0.006 z"\n         id="path1"\n         sodipodi:nodetypes="cccccccccccccccccccccccccccccccccccccccccccc" /><path\n         class="jp-icon3"\n         style="fill:none;stroke:#616161;stroke-width:0.352778;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:1.05833, 1.05833;stroke-dashoffset:0;stroke-opacity:1"\n         d="m 125.10228,154.76809 -6.29921,3.63685"\n         id="path2"\n         sodipodi:nodetypes="cc" /><path\n         class="jp-icon3"\n         style="fill:none;stroke:#616161;stroke-width:0.352778;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:1.05833, 1.05833;stroke-dashoffset:0;stroke-opacity:1"\n         d="m 125.08161,154.74026 6.43769,3.7168"\n         id="path3" /><path\n         class="jp-icon3"\n         style="fill:none;stroke:#616161;stroke-width:0.352778;stroke-linecap:butt;stroke-linejoin:miter;stroke-dasharray:1.05833, 1.05833;stroke-dashoffset:1.5875;stroke-opacity:1"\n         d="m 125.12079,146.8656 v 7.9136"\n         id="path4" /></g></g></svg>\n'},337:e=>{e.exports='<?xml version="1.0" encoding="UTF-8" standalone="no"?>\n<svg\n   inkscape:version="1.3.2 (091e20ef0f, 2023-11-25)"\n   sodipodi:docname="tmod_logo.svg"\n   viewBox="0 0 32 32"\n   height="32"\n   width="32"\n   xml:space="preserve"\n   id="svg2"\n   version="1.1"\n   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"\n   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"\n   xmlns="http://www.w3.org/2000/svg"\n   xmlns:svg="http://www.w3.org/2000/svg"\n   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"\n   xmlns:cc="http://creativecommons.org/ns#"\n   xmlns:dc="http://purl.org/dc/elements/1.1/"><metadata\n     id="metadata8"><rdf:RDF><cc:Work\n         rdf:about=""><dc:format>image/svg+xml</dc:format><dc:type\n           rdf:resource="http://purl.org/dc/dcmitype/StillImage" /></cc:Work></rdf:RDF></metadata><defs\n     id="defs6" /><sodipodi:namedview\n     inkscape:current-layer="g10"\n     inkscape:window-maximized="1"\n     inkscape:window-y="0"\n     inkscape:window-x="0"\n     inkscape:cy="16.772384"\n     inkscape:cx="22.87972"\n     inkscape:zoom="10.970414"\n     showgrid="false"\n     id="namedview4"\n     inkscape:window-height="1058"\n     inkscape:window-width="1920"\n     inkscape:pageshadow="2"\n     inkscape:pageopacity="0"\n     guidetolerance="10"\n     gridtolerance="10"\n     objecttolerance="10"\n     borderopacity="1"\n     bordercolor="#666666"\n     pagecolor="#ffffff"\n     inkscape:showpageshadow="2"\n     inkscape:pagecheckerboard="0"\n     inkscape:deskcolor="#d1d1d1" /><g\n     transform="matrix(1.3333333,0,0,-1.3333333,0,264)"\n     inkscape:label="ink_ext_XXXXXX"\n     inkscape:groupmode="layer"\n     id="g10"><g\n       transform="matrix(0.0114067,0,0,0.0114067,1.8675227,174.70757)"\n       id="g12"\n       style="fill:#000000"><path\n         inkscape:connector-curvature="0"\n         id="path18"\n         class="jp-icon3"\n         fill="#616161"\n         style="fill-opacity:1;fill-rule:evenodd;stroke:none"\n         d="m 881.828,1427.73 1.856,-1.02 c 104.457,60.06 207.326,118.83 311.786,178.88 38.04,21.19 49.7,21.68 85.15,2.13 L 1566,1449.19 c 40.36,-25.33 53.15,-42.77 56.44,-82.68 v -82.74 l -0.58,-26.21 c -3.56,-185.02 -3.77,-371.185 -2.09,-555.576 1.29,-139.664 -4.77,-140.656 -142.13,-220.269 -62.5,-36.238 -111.64,-63.567 -174.16,-99.805 -31.32,-17.191 -63.99,0.895 -63.99,46.856 l -0.31,373.578 -357.352,-206.25 -357.348,206.25 -0.312,-373.578 c 0,-45.961 -32.668,-64.047 -63.992,-46.856 -62.516,36.238 -111.656,63.567 -174.16,99.805 -137.352,79.613 -143.418,80.605 -142.129,220.269 1.687,184.391 1.476,370.556 -2.082,555.576 l -0.582,26.21 v 82.74 c 3.289,39.91 16.074,57.35 56.437,82.68 l 285.379,158.53 c 35.445,19.55 47.109,19.06 85.152,-2.13 104.457,-60.05 207.325,-118.82 311.782,-178.88 z m 0.199,-396.5 295.413,164.75 -293.245,161.7 -1.871,-1.05 -0.496,0.28 -0.496,-0.28 -1.871,1.05 -293.242,-161.7 z M 523.191,1230.5 822.727,1391.65 524.922,1560.23 232.613,1399.66 Z m 717.279,0 -299.54,161.15 297.81,168.58 292.31,-160.57 -290.58,-169.16" /><path\n         inkscape:connector-curvature="0"\n         id="path20"\n         class="jp-icon3"\n         fill="#616161"\n         style="fill-opacity:1;fill-rule:evenodd;stroke:none"\n         d="m 882.098,596.25 -0.27,-0.156 -357.348,206.25 -0.312,-373.578 c 0,-45.961 -32.668,-64.047 -63.992,-46.856 -62.516,36.238 -111.656,63.567 -174.16,99.805 l -18.993,11.015 c -68.285,49.633 -100.839,66.809 -115.695,101.594 -7.398,24.547 -7.91,56.973 -7.441,107.66 1.687,184.391 1.476,370.556 -2.082,555.576 l -0.582,26.21 v 82.74 c 1.375,16.75 4.437,29.55 10.504,40.63 -7.997,-21.97 7.582,-43.39 31.121,-55.22 26.578,-13.33 658.203,-370.326 658.203,-370.326 4.449,-2.766 17.844,-11.938 41.047,-13.309 V 596.25" /><path\n         inkscape:connector-curvature="0"\n         id="path22"\n         class="jp-icon3"\n         fill="#616161"\n         style="fill-opacity:1;fill-rule:nonzero;stroke:none"\n         d="m 2.59375,1283.78 c -5.23047,206.16 -14.62505,203.38 193.97625,321.76 175.309,99.42 351.95,200.42 524.493,305.23 143.687,87.3 173.847,87.3 317.537,0 172.54,-104.81 349.19,-205.81 524.49,-305.23 208.61,-118.38 199.21,-115.6 193.98,-321.76 -5.15,-204.66 -3.55,-408.913 -2.89,-612.339 0.56,-175.82 -25.26,-200.011 -179,-289.406 L 1006.47,51.375 c -109.263,-63.5391 -144.017,-63.5391 -253.275,0 L 184.48,382.035 C 30.7422,471.43 4.91797,495.621 5.48438,671.441 6.13672,874.867 7.73828,1079.12 2.59375,1283.78 Z M 756.242,1863.7 C 582.973,1759.68 404.266,1654.59 228.262,1554.83 46.0195,1451.53 59.2031,1476.18 62.8867,1284.57 66.8008,1080.88 67.0391,875.918 65.168,672.898 63.7539,519.133 70.4414,518.055 221.656,430.395 L 775.813,109.133 c 102.175,-59.2189 105.859,-59.2189 208.035,0 l 554.162,321.262 c 151.21,87.66 157.9,88.738 156.48,242.503 -1.87,203.02 -1.63,407.982 2.28,611.672 3.69,191.61 16.87,166.96 -165.37,270.26 -176,99.76 -354.71,204.85 -527.98,308.87 -113.514,68.15 -133.666,68.15 -247.178,0" /></g></g></svg>\n'}}]);