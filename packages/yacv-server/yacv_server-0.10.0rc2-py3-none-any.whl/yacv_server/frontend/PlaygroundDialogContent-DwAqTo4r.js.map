{"version":3,"file":"PlaygroundDialogContent-DwAqTo4r.js","sources":["../../frontend/tools/monaco.ts","../../node_modules/js-base64/base64.mjs","../../frontend/tools/PlaygroundStartup.py?raw","../../frontend/tools/PlaygroundDialogContent.vue"],"sourcesContent":["import {loader} from \"@guolao/vue-monaco-editor\"\n\nimport * as monaco from \"monaco-editor\"\n//@ts-ignore\nimport editorWorker from \"monaco-editor/esm/vs/editor/editor.worker?worker\"\n//@ts-ignore\nimport jsonWorker from \"monaco-editor/esm/vs/language/json/json.worker?worker\"\n//@ts-ignore\nimport cssWorker from \"monaco-editor/esm/vs/language/css/css.worker?worker\"\n//@ts-ignore\nimport htmlWorker from \"monaco-editor/esm/vs/language/html/html.worker?worker\"\n//@ts-ignore\nimport tsWorker from \"monaco-editor/esm/vs/language/typescript/ts.worker?worker\"\n\nself.MonacoEnvironment = {\n    getWorker(_, label) {\n        if (label === \"json\") {\n            return new jsonWorker()\n        }\n        if (label === \"css\" || label === \"scss\" || label === \"less\") {\n            return new cssWorker()\n        }\n        if (label === \"html\" || label === \"handlebars\" || label === \"razor\") {\n            return new htmlWorker()\n        }\n        if (label === \"typescript\" || label === \"javascript\") {\n            return new tsWorker()\n        }\n        return new editorWorker()\n    }\n}\n\nexport function setupMonaco() {\n    loader.config({monaco})\n}\n","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.7';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = typeof btoa === 'function' ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 ยง5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 ยง5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = typeof atob === 'function' ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","export default \"import micropip\\n\\n# Prioritize the OCP.wasm package repository for finding the ported dependencies.\\nmicropip.set_index_urls([\\\"https://yeicor.github.io/OCP.wasm\\\", \\\"https://pypi.org/simple\\\"])\\n\\n# For build123d < 0.10.0, we need to install the mock the py-lib3mf package (before the main install).\\nawait micropip.install(\\\"lib3mf\\\")\\nmicropip.add_mock_package(\\\"py-lib3mf\\\", \\\"2.4.1\\\", modules={\\\"py_lib3mf\\\": 'from lib3mf import *'})\\n\\n# Install the yacv_server package, which is the main server for the OCP.wasm playground; and also preinstalls build123d.\\nawait micropip.install(\\\"yacv_server\\\", pre=True)\\n\\n# Preimport the yacv_server package to ensure it is available in the global scope, and mock the ocp_vscode package.\\nfrom yacv_server import *\\nmicropip.add_mock_package(\\\"ocp-vscode\\\", \\\"2.8.9\\\", modules={\\\"ocp_vscode\\\": 'from yacv_server import *'})\\nshow_object = show\\n\\n# Preinstall a font to avoid issues with no font being available.\\ndef install_font_to_ocp(font_url, font_name=None):\\n    # noinspection PyUnresolvedReferences\\n    from pyodide.http import pyfetch\\n    from OCP.Font import Font_FontMgr, Font_SystemFont, Font_FA_Regular\\n    from OCP.TCollection import TCollection_AsciiString\\n    import os, asyncio\\n\\n    font_name = font_name if font_name is not None else font_url.split(\\\"/\\\")[-1]\\n\\n    # Choose a \\\"system-like\\\" font directory\\n    font_path = os.path.join(\\\"/tmp\\\", font_name)\\n    os.makedirs(os.path.dirname(font_path), exist_ok=True)\\n\\n    # Download the font using pyfetch\\n    loop = asyncio.get_event_loop()\\n    response = loop.run_until_complete(pyfetch(font_url))\\n    font_data = loop.run_until_complete(response.bytes())\\n\\n    # Save it to the system-like folder\\n    with open(font_path, \\\"wb\\\") as f:\\n        f.write(font_data)\\n\\n    mgr = Font_FontMgr.GetInstance_s()\\n    font_t = Font_SystemFont(TCollection_AsciiString(font_path))\\n    font_t.SetFontPath(Font_FA_Regular, TCollection_AsciiString(font_path))\\n    assert mgr.RegisterFont(font_t, False)\\n    #print(f\\\"โ Font installed at: {font_path}\\\")\\n    return font_path\\n\\n\\n# Make sure there is at least one font installed, so that the tests can run\\ninstall_font_to_ocp(\\\"https://raw.githubusercontent.com/xbmc/xbmc/d3a7f95f3f017b8e861d5d95cc4b33eef4286ce2/media/Fonts/arial.ttf\\\")\\n\"","<script setup lang=\"ts\">\nimport {setupMonaco} from \"./monaco.ts\";\nimport {VueMonacoEditor} from '@guolao/vue-monaco-editor'\nimport {nextTick, onMounted, ref, shallowRef} from \"vue\";\nimport Loading from \"../misc/Loading.vue\";\nimport {newPyodideWorker} from \"./pyodide-worker-api.ts\";\nimport {mdiCircleOpacity, mdiClose, mdiContentSave, mdiFolderOpen, mdiPlay, mdiReload, mdiShare} from \"@mdi/js\";\nimport {VBtn, VCard, VCardText, VSlider, VSpacer, VToolbar, VToolbarTitle, VTooltip} from \"vuetify/components\";\n// @ts-expect-error\nimport SvgIcon from '@jamescoyle/vue-icon';\nimport {version as pyodideVersion} from \"pyodide\";\nimport {gzip} from 'pako';\nimport {b66Encode} from \"./b66.ts\";\nimport {Base64} from 'js-base64'; // More compatible with binary data from python...\nimport {NetworkUpdateEvent, NetworkUpdateEventModel} from \"../misc/network.ts\";\nimport {settings} from \"../misc/settings.ts\";\n// @ts-expect-error\nimport playgroundStartupCode from './PlaygroundStartup.py?raw';\n\nconst props = defineProps<{ initialCode: string }>();\nconst emit = defineEmits<{ close: [], updateModel: [NetworkUpdateEvent] }>()\n\n// ============ LOAD MONACO EDITOR ============\nsetupMonaco() // Must be called before using the editor\n\nconst code = ref((import.meta as any)?.hot?.data?.code || props.initialCode);\nconst outputText = ref(``);\n\nfunction output(text: string) {\n  outputText.value += text; // Append to output\n  // Avoid too much output, keep it reasonable\n  let max_output = 10000; // 10k characters\n  if (outputText.value.length > max_output) {\n    outputText.value = outputText.value.slice(-max_output); // Keep only the last 10k characters\n  }\n  console.log(text); // Also log to console\n  nextTick(() => { // Scroll to bottom\n    const consoleElement = document.querySelector('.playground-console');\n    if (consoleElement) {\n      consoleElement.scrollTop = consoleElement.scrollHeight;\n    }\n  })\n}\n\nconst MONACO_EDITOR_OPTIONS = {\n  automaticLayout: true,\n  formatOnType: true,\n  formatOnPaste: true,\n}\n\nconst editorTheme = window.matchMedia(\"(prefers-color-scheme: dark)\").matches ? `vs-dark` : `vs`\nconst editor = shallowRef()\nconst handleMount = (editorInstance: typeof VueMonacoEditor) => (editor.value = editorInstance)\nconst opacity = ref(0.9); // Opacity for the editor\n\n// ============ LOAD PYODIDE (ASYNC) ============\nlet pyodideWorker: ReturnType<typeof newPyodideWorker> | null = (import.meta as any).hot?.data?.pyodideWorker || null;\nconst running = ref(true);\n\nasync function setupPyodide() {\n  running.value = true;\n  if (opacity.value == 0.0) opacity.value = 0.9; // User doesn't know how to show code again, reset after reopening\n  if (pyodideWorker === null) {\n    output(\"Creating new Pyodide worker...\\n\");\n    pyodideWorker = newPyodideWorker({\n      indexURL: `https://cdn.jsdelivr.net/pyodide/v${pyodideVersion}/full/`, // FIXME: Local deployment?\n      packages: [\"micropip\", \"sqlite3\"], // Faster load if done here\n    });\n    if ((import.meta as any).hot) (import.meta as any).hot.data.pyodideWorker = pyodideWorker\n  } else {\n    output(\"Reusing existing Pyodide instance...\\n\");\n  }\n  output(\"Preloading packages...\\n\");\n  await pyodideWorker.asyncRun(playgroundStartupCode, output, output); // Also import yacv_server and mock ocp_vscode here for faster custom code execution\n  running.value = false; // Indicate that Pyodide is ready\n  output(\"Pyodide worker initialized.\\n\");\n}\n\nasync function runCode() {\n  if (pyodideWorker === null) {\n    output(\"Pyodide worker is not initialized. Please wait...\\n\");\n    return;\n  }\n  if (running.value) {\n    output(\"Pyodide is already running. Please wait...\\n\");\n    return;\n  }\n  output(\"Running code...\\n\");\n  try {\n    running.value = true;\n    if ((import.meta as any).hot) (import.meta as any).hot.data.code = code.value; // Save code for hot reload\n    await pyodideWorker.asyncRun(code.value, output, (msg: string) => {\n      // Detect models printed to console (since http server is not available in pyodide)\n      if (msg.startsWith(yacvServerModelPrefix)) {\n        const modelData = msg.slice(yacvServerModelPrefix.length);\n        onModelData(modelData);\n      } else {\n        output(msg); // Print other messages directly\n      }\n    });\n  } catch (e) {\n    output(`Error running initial code: ${e}\\n`);\n  } finally {\n    running.value = false; // Indicate that Pyodide is ready\n  }\n}\n\nconst yacvServerModelPrefix = \"yacv_server://model/\";\n\nfunction onModelData(modelData: string) {\n  output(`Model data detected... ${modelData.length}B\\n`);\n  // Decode the model data and emit the event for the interface to handle\n  // - Start by finding the end of the initial json object by looking for brackets.\n  let i = 0;\n  let openBrackets = 0;\n  for (; i < modelData.length; i++) {\n    if (modelData[i] === '{') openBrackets++;\n    else if (modelData[i] === '}') openBrackets--;\n    if (openBrackets === 0) break; // Found the end of the JSON object\n  }\n  if (openBrackets !== 0) throw `Error: Invalid model data received: ${modelData}\\n`\n  const jsonData = modelData.slice(0, i + 1); // Extract the JSON part and parse it into the proper class\n  let modelMetadataRaw = JSON.parse(jsonData);\n  const modelMetadata: any = new NetworkUpdateEventModel(modelMetadataRaw.name, \"\", modelMetadataRaw.hash, modelMetadataRaw.is_remove)\n  // console.debug(`Model metadata:`, modelMetadata);\n  output(`Model metadata: ${JSON.stringify(modelMetadata)}\\n`);\n  // - Now decode the rest of the model data which is a single base64 encoded glb file (or an empty string)\n  if (!modelMetadata.isRemove) {\n    const binaryData = Base64.toUint8Array(modelData.slice(i + 1)); // Extract the base64 part\n    console.assert(binaryData.slice(0, 4).toString() == \"103,108,84,70\", // Ugly...\n        \"Invalid GLTF binary data received: \" + binaryData.slice(0, 4).toString());\n    // - Create a Blob from the binary data to be used as a URL\n    const blob = new Blob([binaryData], {type: 'model/gltf-binary'});\n    modelMetadata.url = URL.createObjectURL(blob); // Set the hacked URL in the model metadata\n  }\n  // - Emit the event with the model metadata and URL\n  let networkUpdateEvent = new NetworkUpdateEvent([modelMetadata], () => {\n  });\n  emit('updateModel', networkUpdateEvent);\n}\n\nfunction resetWorker() {\n  if (pyodideWorker) {\n    pyodideWorker.terminate(); // Terminate existing worker\n    pyodideWorker = null; // Reset worker reference\n  }\n  outputText.value = ``; // Clear output text\n  setupPyodide(); // Reinitialize Pyodide\n}\n\nfunction shareLink() {\n  const baseUrl = window.location\n  const urlParams = new URLSearchParams(baseUrl.hash.slice(1)); // Keep all previous URL parameters\n  urlParams.set('pg_code', b66Encode(gzip(code.value, {level: 9}))); // Compress and encode the code\n  const shareUrl = `${baseUrl.origin}${baseUrl.pathname}${baseUrl.search}#${urlParams.toString()}`; // Prefer hash to GET (bigger limits)\n  output(`Share link ready: ${shareUrl}\\n`)\n  if (!navigator.clipboard) {\n    output(\"Clipboard API not available. Please copy the link manually.\\n\");\n    return;\n  } else {\n    navigator.clipboard.writeText(shareUrl)\n        .then(() => output(\"Link copied to clipboard!\\n\"))\n        .catch(err => output(`Failed to copy link: ${err}\\n`));\n  }\n}\n\nfunction saveSnapshot() {\n  throw new Error(\"Not implemented yet!\"); // TODO: Implement snapshot saving\n}\n\nfunction loadSnapshot() {\n  throw new Error(\"Not implemented yet!\"); // TODO: Implement snapshot loading\n}\n\nconst reused = (import.meta as any).hot?.data?.pyodideWorker !== undefined;\n(async () => {\n  const sett = await settings()\n  if (!reused) opacity.value = sett.pg_opacity_loading\n  await setupPyodide()\n  if (props.initialCode != \"\" && !reused) await runCode();\n  if (!reused) opacity.value = sett.pg_opacity_loaded\n})()\n\n// Add keyboard shortcuts\nconst editorRef = ref<HTMLElement | null>(null);\nonMounted(() => {\n  if (editorRef.value) {\n    console.log(editorRef.value)\n    editorRef.value.addEventListener('keydown', (event: Event) => {\n      if (!(event instanceof KeyboardEvent)) return; // Ensure event is a KeyboardEvent\n      if (event.key === 'Enter' && event.ctrlKey) {\n        event.preventDefault(); // Prevent default behavior of Enter key\n        runCode(); // Run code on Ctrl+Enter\n      } else if (event.key === 'Escape') {\n        emit('close'); // Close on Escape key\n      }\n    });\n  }\n});\n</script>\n\n<template>\n  <v-card class=\"popup-card\"\n          :style=\"opacity == 0 ? `position: absolute; top: calc(-50vh + 24px); width: calc(100vw - 64px);` : ``\">\n    <v-toolbar class=\"popup\">\n      <v-toolbar-title style=\"flex: 0 1 auto\">Playground</v-toolbar-title>\n      <v-spacer></v-spacer>\n\n      <span style=\"display: inline-flex; margin-right: 16px;\">\n        <svg-icon :path=\"mdiCircleOpacity\" type=\"mdi\" style=\"height: 32px\"></svg-icon>\n        <v-slider v-model=\"opacity\" :max=\"1\" :min=\"0\" :step=\"0.1\"\n                  style=\"width: 100px; height: 32px\">\n        </v-slider>\n        <v-tooltip activator=\"parent\"\n                   location=\"bottom\">Opacity of the editor (0 = hidden, 1 = fully visible)</v-tooltip>\n      </span>\n\n      <span style=\"margin-right: -8px;\"><!-- This span is only needed to force tooltip to work while button is disabled -->\n        <v-btn icon disabled @click=\"saveSnapshot()\">\n          <svg-icon :path=\"mdiContentSave\" type=\"mdi\"/>\n        </v-btn>\n        <v-tooltip activator=\"parent\"\n                   location=\"bottom\">Save current state to a snapshot for fast startup (WIP)</v-tooltip>\n      </span>\n      <span style=\"margin-left: -8px\"><!-- This span is only needed to force tooltip to work while button is disabled -->\n        <v-btn icon disabled @click=\"loadSnapshot()\">\n          <svg-icon :path=\"mdiFolderOpen\" type=\"mdi\"/>\n        </v-btn>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Load snapshot for fast startup (WIP)</v-tooltip>\n      </span>\n\n      <v-btn icon @click=\"resetWorker()\">\n        <svg-icon :path=\"mdiReload\" type=\"mdi\"/>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Reset Pyodide worker (this forgets all previous state and will\n          take a little while)\n        </v-tooltip>\n      </v-btn>\n\n      <v-btn icon @click=\"runCode()\" :disabled=\"running\">\n        <svg-icon :path=\"mdiPlay\" type=\"mdi\"/>\n        <Loading v-if=\"running\" style=\"position: absolute; top: -16%; left: -16%\"/><!-- Ugly positioning -->\n        <v-tooltip activator=\"parent\" location=\"bottom\">Run code</v-tooltip>\n      </v-btn>\n\n      <v-btn icon @click=\"shareLink()\">\n        <svg-icon :path=\"mdiShare\" type=\"mdi\"/>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Share link that auto-runs the code</v-tooltip>\n      </v-btn>\n\n      <v-btn icon @click=\"emit('close')\">\n        <svg-icon :path=\"mdiClose\" type=\"mdi\"/>\n        <v-tooltip activator=\"parent\" location=\"bottom\">Close (Pyodide remains loaded)</v-tooltip>\n      </v-btn>\n    </v-toolbar>\n    <v-card-text class=\"popup-card-text\" :style=\"opacity == 0 ? `display: none` : ``\">\n      <!-- Only show content if opacity is greater than 0 -->\n      <div class=\"playground-container\">\n        <div class=\"playground-editor\" ref=\"editorRef\">\n          <VueMonacoEditor v-model:value=\"code\" :theme=\"editorTheme\" :options=\"MONACO_EDITOR_OPTIONS\"\n                           language=\"python\" @mount=\"handleMount\"/>\n        </div>\n        <div class=\"playground-console\">\n          <h3>Console Output</h3>\n          <pre>{{ outputText }}</pre> <!-- Placeholder for console output -->\n          <Loading v-if=\"running\"/>\n        </div>\n      </div>\n    </v-card-text>\n  </v-card>\n</template>\n\n<style scoped>\n.popup-card {\n  background-color: #00000000; /* Transparent background */\n}\n\n.v-toolbar.popup > * {\n  overflow-x: auto;\n}\n\n.popup-card-text {\n  background-color: #1e1e1e; /* Matches the Monaco editor background */\n  opacity: v-bind(opacity);\n}\n\n.playground-container {\n  display: flex;\n  flex-direction: row;\n}\n\n.playground-editor {\n  flex: 1;\n  height: calc(100vh - 150px);\n}\n\n.playground-console {\n  flex: 0.5;\n  padding: 10px;\n  overflow-y: auto;\n  min-width: 100px;\n  height: calc(100vh - 150px);\n}\n\n.playground-console pre {\n  margin: 0;\n  white-space: pre-wrap;\n  word-break: break-all;\n}\n\n@media (min-height: 100vw) {\n  /* Adjust layout for vertical space */\n  .playground-container {\n    flex-direction: column;\n  }\n\n  .playground-editor {\n    flex: 1;\n    min-height: 60vh;\n  }\n\n  .playground-editor > * {\n    min-height: 60vh;\n  }\n\n  .playground-console {\n    max-height: calc(40vh - 150px);\n  }\n}\n\n/* TODO: Adjust more colors on bright mode */\n</style>\n\n<style>\n/* https://stackoverflow.com/questions/47017753/monaco-editor-dynamically-resizable/71876526#71876526 */\n.monaco-editor {\n  position: absolute !important;\n}\n</style>"],"names":["_","label","jsonWorker","cssWorker","htmlWorker","tsWorker","editorWorker","setupMonaco","loader","monaco","version","VERSION","_hasBuffer","_TD","_TE","b64ch","b64chs","b64tab","a","tab","c","i","b64re","_fromCC","_U8Afrom","it","_mkUriSafe","src","m0","_tidyB64","s","btoaPolyfill","bin","u32","c0","c1","c2","asc","pad","_btoa","_fromUint8Array","u8a","strs","l","fromUint8Array","urlsafe","cb_utob","cc","re_utob","utob","u","_encode","encode","encodeURI","re_btou","cb_btou","cccc","cp","offset","btou","b","atobPolyfill","u24","r1","r2","_atob","_toUint8Array","toUint8Array","_unURI","_decode","decode","isValid","_noEnum","v","extendString","_add","name","body","extendUint8Array","extendBuiltins","gBase64","playgroundStartupCode","yacvServerModelPrefix","props","__props","emit","__emit","code","ref","outputText","output","text","max_output","nextTick","consoleElement","MONACO_EDITOR_OPTIONS","editorTheme","editor","shallowRef","handleMount","editorInstance","opacity","pyodideWorker","running","setupPyodide","newPyodideWorker","pyodideVersion","runCode","msg","modelData","onModelData","e","openBrackets","jsonData","modelMetadataRaw","modelMetadata","NetworkUpdateEventModel","binaryData","Base64","blob","networkUpdateEvent","NetworkUpdateEvent","resetWorker","shareLink","baseUrl","urlParams","b66Encode","gzip","shareUrl","err","saveSnapshot","loadSnapshot","sett","settings","editorRef","onMounted","event","_createBlock","_unref","VCard","_createVNode","VToolbar","VToolbarTitle","_cache","VSpacer","_createElementVNode","_hoisted_1","SvgIcon","mdiCircleOpacity","VSlider","$event","VTooltip","_hoisted_2","VBtn","mdiContentSave","_hoisted_3","mdiFolderOpen","mdiReload","mdiPlay","Loading","mdiShare","mdiClose","VCardText","_hoisted_4","VueMonacoEditor","_hoisted_5"],"mappings":"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","x_google_ignoreList":[1]}