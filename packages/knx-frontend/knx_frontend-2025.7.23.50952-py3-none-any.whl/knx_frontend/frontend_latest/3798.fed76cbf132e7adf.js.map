{"version":3,"file":"3798.fed76cbf132e7adf.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/components/ha-button-toggle-group.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-selector/ha-selector-button-toggle.ts"],"sourcesContent":["import \"@material/mwc-button/mwc-button\";\nimport type { Button } from \"@material/mwc-button/mwc-button\";\nimport type { TemplateResult } from \"lit\";\nimport { css, html, LitElement } from \"lit\";\nimport { customElement, property, queryAll } from \"lit/decorators\";\nimport { styleMap } from \"lit/directives/style-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport type { ToggleButton } from \"../types\";\nimport \"./ha-icon-button\";\n\n@customElement(\"ha-button-toggle-group\")\nexport class HaButtonToggleGroup extends LitElement {\n  @property({ attribute: false }) public buttons!: ToggleButton[];\n\n  @property() public active?: string;\n\n  @property({ attribute: \"full-width\", type: Boolean })\n  public fullWidth = false;\n\n  @property({ type: Boolean }) public dense = false;\n\n  @queryAll(\"mwc-button\") private _buttons?: Button[];\n\n  protected render(): TemplateResult {\n    return html`\n      <div>\n        ${this.buttons.map((button) =>\n          button.iconPath\n            ? html`<ha-icon-button\n                .label=${button.label}\n                .path=${button.iconPath}\n                .value=${button.value}\n                ?active=${this.active === button.value}\n                @click=${this._handleClick}\n              ></ha-icon-button>`\n            : html`<mwc-button\n                style=${styleMap({\n                  width: this.fullWidth\n                    ? `${100 / this.buttons.length}%`\n                    : \"initial\",\n                })}\n                outlined\n                .dense=${this.dense}\n                .value=${button.value}\n                ?active=${this.active === button.value}\n                @click=${this._handleClick}\n                >${button.label}</mwc-button\n              >`\n        )}\n      </div>\n    `;\n  }\n\n  protected updated() {\n    // Work around Safari default margin that is not reset in mwc-button as of aug 2021\n    this._buttons?.forEach(async (button) => {\n      await button.updateComplete;\n      (\n        button.shadowRoot!.querySelector(\"button\") as HTMLButtonElement\n      ).style.margin = \"0\";\n    });\n  }\n\n  private _handleClick(ev): void {\n    this.active = ev.currentTarget.value;\n    fireEvent(this, \"value-changed\", { value: this.active });\n  }\n\n  static styles = css`\n    div {\n      display: flex;\n      --mdc-icon-button-size: var(--button-toggle-size, 36px);\n      --mdc-icon-size: var(--button-toggle-icon-size, 20px);\n      direction: ltr;\n    }\n    mwc-button {\n      flex: 1;\n      --mdc-shape-small: 0;\n      --mdc-button-outline-width: 1px 0 1px 1px;\n      --mdc-button-outline-color: var(--primary-color);\n    }\n    ha-icon-button {\n      border: 1px solid var(--primary-color);\n      border-right-width: 0px;\n    }\n    ha-icon-button,\n    mwc-button {\n      position: relative;\n      cursor: pointer;\n    }\n    ha-icon-button::before,\n    mwc-button::before {\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      position: absolute;\n      background-color: var(--primary-color);\n      opacity: 0;\n      pointer-events: none;\n      content: \"\";\n      transition:\n        opacity 15ms linear,\n        background-color 15ms linear;\n    }\n    ha-icon-button[active]::before,\n    mwc-button[active]::before {\n      opacity: 1;\n    }\n    ha-icon-button[active] {\n      --icon-primary-color: var(--text-primary-color);\n    }\n    mwc-button[active] {\n      --mdc-theme-primary: var(--text-primary-color);\n    }\n    ha-icon-button:first-child,\n    mwc-button:first-child {\n      --mdc-shape-small: 4px 0 0 4px;\n      border-radius: 4px 0 0 4px;\n      --mdc-button-outline-width: 1px;\n    }\n    mwc-button:first-child::before {\n      border-radius: 4px 0 0 4px;\n    }\n    ha-icon-button:last-child,\n    mwc-button:last-child {\n      border-radius: 0 4px 4px 0;\n      border-right-width: 1px;\n      --mdc-shape-small: 0 4px 4px 0;\n      --mdc-button-outline-width: 1px;\n    }\n    mwc-button:last-child::before {\n      border-radius: 0 4px 4px 0;\n    }\n    ha-icon-button:only-child,\n    mwc-button:only-child {\n      --mdc-shape-small: 4px;\n      border-right-width: 1px;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-button-toggle-group\": HaButtonToggleGroup;\n  }\n}\n","import { LitElement, css, html } from \"lit\";\nimport { customElement, property } from \"lit/decorators\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\nimport { caseInsensitiveStringCompare } from \"../../common/string/compare\";\nimport type { ButtonToggleSelector, SelectOption } from \"../../data/selector\";\nimport type { HomeAssistant, ToggleButton } from \"../../types\";\nimport \"../ha-button-toggle-group\";\n\n@customElement(\"ha-selector-button_toggle\")\nexport class HaButtonToggleSelector extends LitElement {\n  @property({ attribute: false }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public selector!: ButtonToggleSelector;\n\n  @property() public value?: string;\n\n  @property() public label?: string;\n\n  @property() public helper?: string;\n\n  @property({ attribute: false })\n  public localizeValue?: (key: string) => string;\n\n  @property({ type: Boolean }) public disabled = false;\n\n  @property({ type: Boolean }) public required = true;\n\n  protected render() {\n    const options =\n      this.selector.button_toggle?.options?.map((option) =>\n        typeof option === \"object\"\n          ? (option as SelectOption)\n          : ({ value: option, label: option } as SelectOption)\n      ) || [];\n\n    const translationKey = this.selector.button_toggle?.translation_key;\n\n    if (this.localizeValue && translationKey) {\n      options.forEach((option) => {\n        const localizedLabel = this.localizeValue!(\n          `${translationKey}.options.${option.value}`\n        );\n        if (localizedLabel) {\n          option.label = localizedLabel;\n        }\n      });\n    }\n\n    if (this.selector.button_toggle?.sort) {\n      options.sort((a, b) =>\n        caseInsensitiveStringCompare(\n          a.label,\n          b.label,\n          this.hass.locale.language\n        )\n      );\n    }\n\n    const toggleButtons: ToggleButton[] = options.map((item: SelectOption) => ({\n      label: item.label,\n      value: item.value,\n    }));\n\n    return html`\n      ${this.label}\n      <ha-button-toggle-group\n        .buttons=${toggleButtons}\n        .active=${this.value}\n        @value-changed=${this._valueChanged}\n      ></ha-button-toggle-group>\n    `;\n  }\n\n  private _valueChanged(ev) {\n    ev.stopPropagation();\n\n    const value = ev.detail?.value || ev.target.value;\n    if (this.disabled || value === undefined || value === (this.value ?? \"\")) {\n      return;\n    }\n    fireEvent(this, \"value-changed\", {\n      value: value,\n    });\n  }\n\n  static styles = css`\n    :host {\n      position: relative;\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n      gap: 8px;\n      align-items: center;\n    }\n    @media all and (max-width: 600px) {\n      ha-button-toggle-group {\n        flex: 1;\n      }\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-selector-button_toggle\": HaButtonToggleSelector;\n  }\n}\n"],"names":["HaButtonToggleGroup","LitElement","render","html","buttons","map","button","iconPath","label","value","active","_handleClick","styleMap","width","fullWidth","length","dense","updated","this","_buttons","forEach","updateComplete","shadowRoot","querySelector","style","margin","ev","currentTarget","fireEvent","args","styles","css","attribute","type","Boolean","HaButtonToggleSelector","options","selector","button_toggle","option","translationKey","translation_key","localizeValue","localizedLabel","sort","a","b","caseInsensitiveStringCompare","hass","locale","language","toggleButtons","item","_valueChanged","stopPropagation","detail","target","disabled","undefined","required"],"mappings":"oOAWO,MAAPA,UAAAC,EAAAA,GAYYC,MAAAA,GACR,OAAAC,EAAAA,EAAA;;UAEI,KAAAC,QAAAC,KAAAC,GAAAA,EAAAC,SAAAJ,EAAAA,EAAA;yBAGeG,EAAAE;wBACDF,EAAAC;yBACCD,EAAAG;0BACC,KAAAC,SAAAJ,EAAAG;yBACD,KAAAE;kCACSR,EAAAA,EAAA;yBAEVS,EAAAA,EAAAA,GAAA,CACJC,MAAA,KAAAC,UAAA,SAAAV,QAAAW,OAAA;;yBAKK,KAAAC;yBACAV,EAAAG;0BACC,KAAAC,SAAAJ,EAAAG;yBACD,KAAAE;mBACNL,EAAAE;;;KAKf,CAEUS,OAAAA,GAERC,KAAAC,UAAAC,SAAA,gBACEd,EAAAe,eAEEf,EAAAgB,WAAAC,cAAA,UAAAC,MAAAC,OAAA,MAGN,CAEQd,YAAAA,CAAAe,GACNR,KAAAR,OAAAgB,EAAAC,cAAAlB,OACAmB,EAAAA,EAAAA,GAAA,sBAAmCnB,MAAA,KAAAC,QACrC,C,kBAvDK,SAAAmB,GAAA,KAAAf,WAAA,OAAAE,OAAA,C,EAAMhB,EAAA8B,OAAAC,EAAAA,EAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gCACCC,WAAA,K,qHAIAA,UAAA,aAAyBC,KAAAC,W,4DAGzBD,KAAAC,W,gKCVP,MAAPC,UAAAlC,EAAAA,GAkBYC,MAAAA,GACR,MAAAkC,EAAA,KAAAC,SAAAC,eAAAF,SAAA/B,KAAAkC,GAAA,iBAAAA,EAAAA,EAAA,CAIW9B,MAAA8B,EAAe/B,MAAA+B,MAAc,GAGxCC,EAAA,KAAAH,SAAAC,eAAAG,gBAEIvB,KAAJwB,eAAAF,GACEJ,EAAAhB,SAAAmB,IACE,MAAAI,EAAA,KAAAD,cAAA,GAAAF,aAAAD,EAAA9B,SAGAkC,IACEJ,EAAA/B,MAAAmC,EACF,IAIAzB,KAAJmB,SAAAC,eAAAM,MACER,EAAAQ,MAAA,CAAAC,EAAAC,KAAAC,EAAAA,EAAAA,IAAAF,EAAArC,MAAAsC,EAAAtC,MAAA,KAAAwC,KAAAC,OAAAC,YASF,MAAAC,EAAAf,EAAA/B,KAAA+C,IAAA,CACE5C,MAAA4C,EAAA5C,MACAC,MAAA2C,EAAA3C,UAGF,OAAAN,EAAAA,EAAA;QACE,KAAAK;;mBAEW2C;kBACD,KAAA1C;yBACO,KAAA4C;;KAGrB,CAEQA,aAAAA,CAAA3B,GACNA,EAAA4B,kBAEA,MAAA7C,EAAAiB,EAAA6B,QAAA9C,OAAAiB,EAAA8B,OAAA/C,MACIS,KAAJuC,eAAAC,IAAAjD,GAAAA,KAAA,KAAAA,OAAA,MAGAmB,EAAAA,EAAAA,GAAA,sBACEnB,MAAAA,GAEJ,C,kBA1EK,SAAAoB,GAAA,KAAA4B,UAAA,OAAAE,UAAA,C,EAAMxB,EAAAL,OAAAC,EAAAA,EAAA;;;;;;;;;;;;;;gCACCC,WAAA,K,uDAEAA,WAAA,K,0OAQAA,WAAA,K,gEAGAC,KAAAC,W,2DAEAD,KAAAC,W"}