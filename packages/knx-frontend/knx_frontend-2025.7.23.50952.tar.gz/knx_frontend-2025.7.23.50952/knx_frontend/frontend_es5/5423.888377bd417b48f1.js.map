{"version":3,"file":"5423.888377bd417b48f1.js","sources":["webpack://knx-frontend/./homeassistant-frontend/src/common/config/version.ts","webpack://knx-frontend/./homeassistant-frontend/src/common/translations/blank_before_percent.ts","webpack://knx-frontend/./homeassistant-frontend/src/components/ha-file-upload.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/file_upload.ts","webpack://knx-frontend/./homeassistant-frontend/src/data/hassio/common.ts","webpack://knx-frontend/./homeassistant-frontend/src/dialogs/generic/show-dialog-box.ts","webpack://knx-frontend/./homeassistant-frontend/src/util/bytes-to-string.ts","webpack://knx-frontend/./src/version.ts","webpack://knx-frontend/./src/views/info.ts"],"sourcesContent":["export const atLeastVersion = (\n  version: string,\n  major: number,\n  minor: number,\n  patch?: number\n): boolean => {\n  if (__DEMO__) {\n    return true;\n  }\n\n  const [haMajor, haMinor, haPatch] = version.split(\".\", 3);\n\n  return (\n    Number(haMajor) > major ||\n    (Number(haMajor) === major &&\n      (patch === undefined\n        ? Number(haMinor) >= minor\n        : Number(haMinor) > minor)) ||\n    (patch !== undefined &&\n      Number(haMajor) === major &&\n      Number(haMinor) === minor &&\n      Number(haPatch) >= patch)\n  );\n};\n\nexport const isDevVersion = (version: string): boolean => {\n  if (__DEMO__) {\n    return false;\n  }\n\n  return version.includes(\"dev\");\n};\n","import type { FrontendLocaleData } from \"../../data/translation\";\n\n// Logic based on https://en.wikipedia.org/wiki/Percent_sign#Form_and_spacing\nexport const blankBeforePercent = (\n  localeOptions: FrontendLocaleData\n): string => {\n  switch (localeOptions.language) {\n    case \"cs\":\n    case \"de\":\n    case \"fi\":\n    case \"fr\":\n    case \"sk\":\n    case \"sv\":\n      return \" \";\n    default:\n      return \"\";\n  }\n};\n","import \"@material/mwc-linear-progress/mwc-linear-progress\";\nimport { mdiDelete, mdiFileUpload } from \"@mdi/js\";\nimport type { PropertyValues, TemplateResult } from \"lit\";\nimport { LitElement, css, html, nothing } from \"lit\";\nimport { customElement, property, query, state } from \"lit/decorators\";\nimport { classMap } from \"lit/directives/class-map\";\nimport { fireEvent } from \"../common/dom/fire_event\";\nimport type { HomeAssistant } from \"../types\";\nimport \"./ha-button\";\nimport \"./ha-icon-button\";\nimport { blankBeforePercent } from \"../common/translations/blank_before_percent\";\nimport { ensureArray } from \"../common/array/ensure-array\";\nimport { bytesToString } from \"../util/bytes-to-string\";\nimport type { LocalizeFunc } from \"../common/translations/localize\";\n\ndeclare global {\n  interface HASSDomEvents {\n    \"file-picked\": { files: File[] };\n    \"files-cleared\": undefined;\n  }\n}\n\n@customElement(\"ha-file-upload\")\nexport class HaFileUpload extends LitElement {\n  @property({ attribute: false }) public hass?: HomeAssistant;\n\n  @property({ attribute: false }) public localize?: LocalizeFunc;\n\n  @property() public accept!: string;\n\n  @property() public icon?: string;\n\n  @property() public label?: string;\n\n  @property() public secondary?: string;\n\n  @property({ attribute: \"uploading-label\" }) public uploadingLabel?: string;\n\n  @property({ attribute: \"delete-label\" }) public deleteLabel?: string;\n\n  @property() public supports?: string;\n\n  @property({ type: Object }) public value?: File | File[] | FileList | string;\n\n  @property({ type: Boolean }) public multiple = false;\n\n  @property({ type: Boolean, reflect: true }) public disabled = false;\n\n  @property({ type: Boolean }) public uploading = false;\n\n  @property({ type: Number }) public progress?: number;\n\n  @property({ type: Boolean, attribute: \"auto-open-file-dialog\" })\n  public autoOpenFileDialog = false;\n\n  @state() private _drag = false;\n\n  @query(\"#input\") private _input?: HTMLInputElement;\n\n  protected firstUpdated(changedProperties: PropertyValues) {\n    super.firstUpdated(changedProperties);\n    if (this.autoOpenFileDialog) {\n      this._openFilePicker();\n    }\n  }\n\n  private get _name() {\n    if (this.value === undefined) {\n      return \"\";\n    }\n    if (typeof this.value === \"string\") {\n      return this.value;\n    }\n    const files =\n      this.value instanceof FileList\n        ? Array.from(this.value)\n        : ensureArray(this.value);\n\n    return files.map((file) => file.name).join(\", \");\n  }\n\n  public render(): TemplateResult {\n    const localize = this.localize || this.hass!.localize;\n    return html`\n      ${this.uploading\n        ? html`<div class=\"container\">\n            <div class=\"uploading\">\n              <span class=\"header\"\n                >${this.uploadingLabel || this.value\n                  ? localize(\"ui.components.file-upload.uploading_name\", {\n                      name: this._name,\n                    })\n                  : localize(\"ui.components.file-upload.uploading\")}</span\n              >\n              ${this.progress\n                ? html`<div class=\"progress\">\n                    ${this.progress}${this.hass &&\n                    blankBeforePercent(this.hass!.locale)}%\n                  </div>`\n                : nothing}\n            </div>\n            <mwc-linear-progress\n              .indeterminate=${!this.progress}\n              .progress=${this.progress ? this.progress / 100 : undefined}\n            ></mwc-linear-progress>\n          </div>`\n        : html`<label\n            for=${this.value ? \"\" : \"input\"}\n            class=\"container ${classMap({\n              dragged: this._drag,\n              multiple: this.multiple,\n              value: Boolean(this.value),\n            })}\"\n            @drop=${this._handleDrop}\n            @dragenter=${this._handleDragStart}\n            @dragover=${this._handleDragStart}\n            @dragleave=${this._handleDragEnd}\n            @dragend=${this._handleDragEnd}\n            >${!this.value\n              ? html`<ha-svg-icon\n                    class=\"big-icon\"\n                    .path=${this.icon || mdiFileUpload}\n                  ></ha-svg-icon>\n                  <ha-button unelevated @click=${this._openFilePicker}>\n                    ${this.label || localize(\"ui.components.file-upload.label\")}\n                  </ha-button>\n                  <span class=\"secondary\"\n                    >${this.secondary ||\n                    localize(\"ui.components.file-upload.secondary\")}</span\n                  >\n                  <span class=\"supports\">${this.supports}</span>`\n              : typeof this.value === \"string\"\n                ? html`<div class=\"row\">\n                    <div class=\"value\" @click=${this._openFilePicker}>\n                      <ha-svg-icon\n                        .path=${this.icon || mdiFileUpload}\n                      ></ha-svg-icon>\n                      ${this.value}\n                    </div>\n                    <ha-icon-button\n                      @click=${this._clearValue}\n                      .label=${this.deleteLabel || localize(\"ui.common.delete\")}\n                      .path=${mdiDelete}\n                    ></ha-icon-button>\n                  </div>`\n                : (this.value instanceof FileList\n                    ? Array.from(this.value)\n                    : ensureArray(this.value)\n                  ).map(\n                    (file) =>\n                      html`<div class=\"row\">\n                        <div class=\"value\" @click=${this._openFilePicker}>\n                          <ha-svg-icon\n                            .path=${this.icon || mdiFileUpload}\n                          ></ha-svg-icon>\n                          ${file.name} - ${bytesToString(file.size)}\n                        </div>\n                        <ha-icon-button\n                          @click=${this._clearValue}\n                          .label=${this.deleteLabel ||\n                          localize(\"ui.common.delete\")}\n                          .path=${mdiDelete}\n                        ></ha-icon-button>\n                      </div>`\n                  )}\n            <input\n              id=\"input\"\n              type=\"file\"\n              class=\"file\"\n              .accept=${this.accept}\n              .multiple=${this.multiple}\n              @change=${this._handleFilePicked}\n          /></label>`}\n    `;\n  }\n\n  private _openFilePicker() {\n    this._input?.click();\n  }\n\n  private _handleDrop(ev: DragEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    if (ev.dataTransfer?.files) {\n      fireEvent(this, \"file-picked\", {\n        files:\n          this.multiple || ev.dataTransfer.files.length === 1\n            ? Array.from(ev.dataTransfer.files)\n            : [ev.dataTransfer.files[0]],\n      });\n    }\n    this._drag = false;\n  }\n\n  private _handleDragStart(ev: DragEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this._drag = true;\n  }\n\n  private _handleDragEnd(ev: DragEvent) {\n    ev.preventDefault();\n    ev.stopPropagation();\n    this._drag = false;\n  }\n\n  private _handleFilePicked(ev) {\n    if (ev.target.files.length === 0) {\n      return;\n    }\n    this.value = ev.target.files;\n    fireEvent(this, \"file-picked\", { files: ev.target.files });\n  }\n\n  private _clearValue(ev: Event) {\n    ev.preventDefault();\n    this._input!.value = \"\";\n    this.value = undefined;\n    fireEvent(this, \"change\");\n    fireEvent(this, \"files-cleared\");\n  }\n\n  static styles = css`\n    :host {\n      display: block;\n      height: 240px;\n    }\n    :host([disabled]) {\n      pointer-events: none;\n      color: var(--disabled-text-color);\n    }\n    .container {\n      position: relative;\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n      align-items: center;\n      border: solid 1px\n        var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n      border-radius: var(--mdc-shape-small, 4px);\n      height: 100%;\n    }\n    .row {\n      display: flex;\n      align-items: center;\n    }\n    label.container {\n      border: dashed 1px\n        var(--mdc-text-field-idle-line-color, rgba(0, 0, 0, 0.42));\n      cursor: pointer;\n    }\n    .container .uploading {\n      display: flex;\n      flex-direction: column;\n      width: 100%;\n      align-items: flex-start;\n      padding: 0 32px;\n      box-sizing: border-box;\n    }\n    :host([disabled]) .container {\n      border-color: var(--disabled-color);\n    }\n    label:hover,\n    label.dragged {\n      border-style: solid;\n    }\n    label.dragged {\n      border-color: var(--primary-color);\n    }\n    .dragged:before {\n      position: absolute;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      background-color: var(--primary-color);\n      content: \"\";\n      opacity: var(--dark-divider-opacity);\n      pointer-events: none;\n      border-radius: var(--mdc-shape-small, 4px);\n    }\n    label.value {\n      cursor: default;\n    }\n    label.value.multiple {\n      justify-content: unset;\n      overflow: auto;\n    }\n    .highlight {\n      color: var(--primary-color);\n    }\n    ha-button {\n      margin-bottom: 4px;\n    }\n    .supports {\n      color: var(--secondary-text-color);\n      font-size: var(--ha-font-size-s);\n    }\n    :host([disabled]) .secondary {\n      color: var(--disabled-text-color);\n    }\n    input.file {\n      display: none;\n    }\n    .value {\n      cursor: pointer;\n    }\n    .value ha-svg-icon {\n      margin-right: 8px;\n      margin-inline-end: 8px;\n      margin-inline-start: initial;\n    }\n    .big-icon {\n      --mdc-icon-size: 48px;\n      margin-bottom: 8px;\n    }\n    ha-button {\n      --mdc-button-outline-color: var(--primary-color);\n      --mdc-icon-button-size: 24px;\n    }\n    mwc-linear-progress {\n      width: 100%;\n      padding: 8px 32px;\n      box-sizing: border-box;\n    }\n    .header {\n      font-weight: var(--ha-font-weight-medium);\n    }\n    .progress {\n      color: var(--secondary-text-color);\n    }\n    button.link {\n      background: none;\n      border: none;\n      padding: 0;\n      font-size: var(--ha-font-size-m);\n      color: var(--primary-color);\n      text-decoration: underline;\n      cursor: pointer;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"ha-file-upload\": HaFileUpload;\n  }\n}\n","import type { HomeAssistant } from \"../types\";\n\nexport const uploadFile = async (hass: HomeAssistant, file: File) => {\n  const fd = new FormData();\n  fd.append(\"file\", file);\n  const resp = await hass.fetchWithAuth(\"/api/file_upload\", {\n    method: \"POST\",\n    body: fd,\n  });\n  if (resp.status === 413) {\n    throw new Error(`Uploaded file is too large (${file.name})`);\n  } else if (resp.status !== 200) {\n    throw new Error(\"Unknown error\");\n  }\n  const data = await resp.json();\n  return data.file_id;\n};\n\nexport const removeFile = async (hass: HomeAssistant, file_id: string) =>\n  hass.callApi(\"DELETE\", \"file_upload\", {\n    file_id,\n  });\n","import { atLeastVersion } from \"../../common/config/version\";\nimport type { HomeAssistant } from \"../../types\";\n\nexport interface HassioResponse<T> {\n  data: T;\n  message?: string;\n  result: \"ok\" | \"error\";\n}\n\nexport interface HassioStats {\n  blk_read: number;\n  blk_write: number;\n  cpu_percent: number;\n  memory_limit: number;\n  memory_percent: number;\n  memory_usage: number;\n  network_rx: number;\n  network_tx: number;\n}\n\nexport const hassioApiResultExtractor = <T>(response: HassioResponse<T>) =>\n  response.data;\n\nexport const extractApiErrorMessage = (error: any): string =>\n  typeof error === \"object\"\n    ? typeof error.body === \"object\"\n      ? error.body.message || \"Unknown error, see supervisor logs\"\n      : error.body || error.message || \"Unknown error, see supervisor logs\"\n    : error;\n\nconst ignoredStatusCodes = new Set([502, 503, 504]);\n\nexport const ignoreSupervisorError = (error): boolean => {\n  if (error && error.status_code && ignoredStatusCodes.has(error.status_code)) {\n    return true;\n  }\n  if (\n    error &&\n    error.message &&\n    (error.message.includes(\"ERR_CONNECTION_CLOSED\") ||\n      error.message.includes(\"ERR_CONNECTION_RESET\"))\n  ) {\n    return true;\n  }\n  return false;\n};\n\nexport const fetchHassioStats = async (\n  hass: HomeAssistant,\n  container: string\n): Promise<HassioStats> => {\n  if (atLeastVersion(hass.config.version, 2021, 2, 4)) {\n    return hass.callWS({\n      type: \"supervisor/api\",\n      endpoint: `/${container}/stats`,\n      method: \"get\",\n    });\n  }\n\n  return hassioApiResultExtractor(\n    await hass.callApi<HassioResponse<HassioStats>>(\n      \"GET\",\n      `hassio/${container}/stats`\n    )\n  );\n};\n","import type { TemplateResult } from \"lit\";\nimport { fireEvent } from \"../../common/dom/fire_event\";\n\ninterface BaseDialogBoxParams {\n  confirmText?: string;\n  text?: string | TemplateResult;\n  title?: string;\n  warning?: boolean;\n}\n\nexport interface AlertDialogParams extends BaseDialogBoxParams {\n  confirm?: () => void;\n}\n\nexport interface ConfirmationDialogParams extends BaseDialogBoxParams {\n  dismissText?: string;\n  confirm?: () => void;\n  cancel?: () => void;\n  destructive?: boolean;\n}\n\nexport interface PromptDialogParams extends BaseDialogBoxParams {\n  inputLabel?: string;\n  dismissText?: string;\n  inputType?: string;\n  defaultValue?: string;\n  placeholder?: string;\n  confirm?: (out?: string) => void;\n  cancel?: () => void;\n  inputMin?: number | string;\n  inputMax?: number | string;\n}\n\nexport interface DialogBoxParams\n  extends ConfirmationDialogParams,\n    PromptDialogParams {\n  confirm?: (out?: string) => void;\n  confirmation?: boolean;\n  prompt?: boolean;\n}\n\nexport const loadGenericDialog = () => import(\"./dialog-box\");\n\nconst showDialogHelper = (\n  element: HTMLElement,\n  dialogParams: DialogBoxParams,\n  extra?: {\n    confirmation?: DialogBoxParams[\"confirmation\"];\n    prompt?: DialogBoxParams[\"prompt\"];\n  }\n) =>\n  new Promise((resolve) => {\n    const origCancel = dialogParams.cancel;\n    const origConfirm = dialogParams.confirm;\n\n    fireEvent(element, \"show-dialog\", {\n      dialogTag: \"dialog-box\",\n      dialogImport: loadGenericDialog,\n      dialogParams: {\n        ...dialogParams,\n        ...extra,\n        cancel: () => {\n          resolve(extra?.prompt ? null : false);\n          if (origCancel) {\n            origCancel();\n          }\n        },\n        confirm: (out) => {\n          resolve(extra?.prompt ? out : true);\n          if (origConfirm) {\n            origConfirm(out);\n          }\n        },\n      },\n    });\n  });\n\nexport const showAlertDialog = (\n  element: HTMLElement,\n  dialogParams: AlertDialogParams\n) => showDialogHelper(element, dialogParams);\n\nexport const showConfirmationDialog = (\n  element: HTMLElement,\n  dialogParams: ConfirmationDialogParams\n) =>\n  showDialogHelper(element, dialogParams, {\n    confirmation: true,\n  }) as Promise<boolean>;\n\nexport const showPromptDialog = (\n  element: HTMLElement,\n  dialogParams: PromptDialogParams\n) =>\n  showDialogHelper(element, dialogParams, { prompt: true }) as Promise<\n    null | string\n  >;\n","export const bytesToString = (value = 0, decimals = 2): string => {\n  if (value === 0) {\n    return \"0 Bytes\";\n  }\n  const k = 1024;\n  decimals = decimals < 0 ? 0 : decimals;\n  const sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\", \"PB\", \"EB\", \"ZB\", \"YB\"];\n  const i = Math.floor(Math.log(value) / Math.log(k));\n  return `${parseFloat((value / k ** i).toFixed(decimals))} ${sizes[i]}`;\n};\n","// This is replaced by git tag name on release. See ReleaseActions.yml\nexport const VERSION = \"2025.7.23.50952\";\n","import { mdiFileUpload } from \"@mdi/js\";\nimport type { TemplateResult } from \"lit\";\nimport { css, nothing, html, LitElement } from \"lit\";\nimport { customElement, property, state } from \"lit/decorators\";\n\nimport { fireEvent } from \"@ha/common/dom/fire_event\";\nimport \"@ha/components/ha-card\";\nimport \"@ha/layouts/hass-tabs-subpage\";\nimport type { PageNavigation } from \"@ha/layouts/hass-tabs-subpage\";\nimport \"@ha/components/ha-button\";\nimport \"@ha/components/ha-file-upload\";\nimport \"@ha/components/ha-selector/ha-selector-text\";\nimport { uploadFile } from \"@ha/data/file_upload\";\nimport { extractApiErrorMessage } from \"@ha/data/hassio/common\";\nimport { showAlertDialog, showConfirmationDialog } from \"@ha/dialogs/generic/show-dialog-box\";\nimport type { HomeAssistant, Route } from \"@ha/types\";\n\nimport { processProjectFile, removeProjectFile } from \"../services/websocket.service\";\n\nimport type { KNX } from \"../types/knx\";\nimport type { KNXProjectInfo } from \"../types/websocket\";\nimport { KNXLogger } from \"../tools/knx-logger\";\nimport { VERSION } from \"../version\";\n\nconst logger = new KNXLogger(\"info\");\n\n@customElement(\"knx-info\")\nexport class KNXInfo extends LitElement {\n  @property({ type: Object }) public hass!: HomeAssistant;\n\n  @property({ attribute: false }) public knx!: KNX;\n\n  @property({ type: Boolean, reflect: true }) public narrow!: boolean;\n\n  @property({ type: Object }) public route?: Route;\n\n  @property({ type: Array, reflect: false }) public tabs!: PageNavigation[];\n\n  @state() private _projectPassword?: string;\n\n  @state() private _uploading = false;\n\n  @state() private _projectFile?: File;\n\n  protected render(): TemplateResult {\n    return html`\n      <hass-tabs-subpage\n        .hass=${this.hass}\n        .narrow=${this.narrow!}\n        .route=${this.route!}\n        .tabs=${this.tabs}\n        .localizeFunc=${this.knx.localize}\n      >\n        <div class=\"columns\">\n          ${this._renderInfoCard()}\n          ${this.knx.info.project ? this._renderProjectDataCard(this.knx.info.project) : nothing}\n          ${this._renderProjectUploadCard()}\n        </div>\n      </hass-tabs-subpage>\n    `;\n  }\n\n  private _renderInfoCard() {\n    return html` <ha-card class=\"knx-info\">\n      <div class=\"card-content knx-info-section\">\n        <div class=\"knx-content-row header\">${this.knx.localize(\"info_information_header\")}</div>\n\n        <div class=\"knx-content-row\">\n          <div>XKNX Version</div>\n          <div>${this.knx.info.version}</div>\n        </div>\n\n        <div class=\"knx-content-row\">\n          <div>KNX-Frontend Version</div>\n          <div>${VERSION}</div>\n        </div>\n\n        <div class=\"knx-content-row\">\n          <div>${this.knx.localize(\"info_connected_to_bus\")}</div>\n          <div>\n            ${this.hass.localize(this.knx.info.connected ? \"ui.common.yes\" : \"ui.common.no\")}\n          </div>\n        </div>\n\n        <div class=\"knx-content-row\">\n          <div>${this.knx.localize(\"info_individual_address\")}</div>\n          <div>${this.knx.info.current_address}</div>\n        </div>\n\n        <div class=\"knx-bug-report\">\n          ${this.knx.localize(\"info_issue_tracker\")}\n          <a href=\"https://github.com/XKNX/knx-integration\" target=\"_blank\">xknx/knx-integration</a>\n        </div>\n\n        <div class=\"knx-bug-report\">\n          ${this.knx.localize(\"info_my_knx\")}\n          <a href=\"https://my.knx.org\" target=\"_blank\">my.knx.org</a>\n        </div>\n      </div>\n    </ha-card>`;\n  }\n\n  private _renderProjectDataCard(projectInfo: KNXProjectInfo) {\n    return html`\n      <ha-card class=\"knx-info\">\n          <div class=\"card-content knx-content\">\n            <div class=\"header knx-content-row\">\n              ${this.knx.localize(\"info_project_data_header\")}\n            </div>\n            <div class=\"knx-content-row\">\n              <div>${this.knx.localize(\"info_project_data_name\")}</div>\n              <div>${projectInfo.name}</div>\n            </div>\n            <div class=\"knx-content-row\">\n              <div>${this.knx.localize(\"info_project_data_last_modified\")}</div>\n              <div>${new Date(projectInfo.last_modified).toUTCString()}</div>\n            </div>\n            <div class=\"knx-content-row\">\n              <div>${this.knx.localize(\"info_project_data_tool_version\")}</div>\n              <div>${projectInfo.tool_version}</div>\n            </div>\n            <div class=\"knx-content-row\">\n              <div>${this.knx.localize(\"info_project_data_xknxproject_version\")}</div>\n              <div>${projectInfo.xknxproject_version}</div>\n            </div>\n            <div class=\"knx-button-row\">\n              <ha-button\n                class=\"knx-warning push-right\"\n                @click=${this._removeProject}\n                .disabled=${this._uploading || !this.knx.info.project}\n                >\n                ${this.knx.localize(\"info_project_delete\")}\n              </ha-button>\n            </div>\n          </div>\n        </div>\n      </ha-card>\n    `;\n  }\n\n  private _renderProjectUploadCard() {\n    return html` <ha-card class=\"knx-info\">\n      <div class=\"card-content knx-content\">\n        <div class=\"knx-content-row header\">${this.knx.localize(\"info_project_file_header\")}</div>\n        <div class=\"knx-content-row\">${this.knx.localize(\"info_project_upload_description\")}</div>\n        <div class=\"knx-content-row\">\n          <ha-file-upload\n            .hass=${this.hass}\n            accept=\".knxproj, .knxprojarchive\"\n            .icon=${mdiFileUpload}\n            .label=${this.knx.localize(\"info_project_file\")}\n            .value=${this._projectFile?.name}\n            .uploading=${this._uploading}\n            @file-picked=${this._filePicked}\n          ></ha-file-upload>\n        </div>\n        <div class=\"knx-content-row\">\n          <ha-selector-text\n            .hass=${this.hass}\n            .value=${this._projectPassword || \"\"}\n            .label=${this.hass.localize(\"ui.login-form.password\")}\n            .selector=${{ text: { multiline: false, type: \"password\" } }}\n            .required=${false}\n            @value-changed=${this._passwordChanged}\n          >\n          </ha-selector-text>\n        </div>\n        <div class=\"knx-button-row\">\n          <ha-button\n            class=\"push-right\"\n            @click=${this._uploadFile}\n            .disabled=${this._uploading || !this._projectFile}\n            >${this.hass.localize(\"ui.common.submit\")}</ha-button\n          >\n        </div>\n      </div>\n    </ha-card>`;\n  }\n\n  private _filePicked(ev) {\n    this._projectFile = ev.detail.files[0];\n  }\n\n  private _passwordChanged(ev) {\n    this._projectPassword = ev.detail.value;\n  }\n\n  private async _uploadFile(_ev) {\n    const file = this._projectFile;\n    if (typeof file === \"undefined\") {\n      return;\n    }\n\n    let error: Error | undefined;\n    this._uploading = true;\n    try {\n      const project_file_id = await uploadFile(this.hass, file);\n      await processProjectFile(this.hass, project_file_id, this._projectPassword || \"\");\n    } catch (err: any) {\n      error = err;\n      showAlertDialog(this, {\n        title: \"Upload failed\",\n        text: extractApiErrorMessage(err),\n      });\n    } finally {\n      if (!error) {\n        this._projectFile = undefined;\n        this._projectPassword = undefined;\n      }\n      this._uploading = false;\n      fireEvent(this, \"knx-reload\");\n    }\n  }\n\n  private async _removeProject(_ev) {\n    const confirmed = await showConfirmationDialog(this, {\n      text: this.knx.localize(\"info_project_delete\"),\n    });\n    if (!confirmed) {\n      logger.debug(\"User cancelled deletion\");\n      return;\n    }\n\n    try {\n      await removeProjectFile(this.hass);\n    } catch (err: any) {\n      showAlertDialog(this, {\n        title: \"Deletion failed\",\n        text: extractApiErrorMessage(err),\n      });\n    } finally {\n      fireEvent(this, \"knx-reload\");\n    }\n  }\n\n  static styles = css`\n    .columns {\n      display: flex;\n      justify-content: center;\n    }\n\n    @media screen and (max-width: 1232px) {\n      .columns {\n        flex-direction: column;\n      }\n\n      .knx-button-row {\n        margin-top: 20px;\n      }\n\n      .knx-info {\n        margin-right: 8px;\n      }\n    }\n\n    @media screen and (min-width: 1233px) {\n      .knx-button-row {\n        margin-top: auto;\n      }\n\n      .knx-info {\n        width: 400px;\n      }\n    }\n\n    .knx-info {\n      margin-left: 8px;\n      margin-top: 8px;\n    }\n\n    .knx-content {\n      display: flex;\n      flex-direction: column;\n      height: 100%;\n      box-sizing: border-box;\n    }\n\n    .knx-content-row {\n      display: flex;\n      flex-direction: row;\n      justify-content: space-between;\n    }\n\n    .knx-content-row > div:nth-child(2) {\n      margin-left: 1rem;\n    }\n\n    .knx-button-row {\n      display: flex;\n      flex-direction: row;\n      vertical-align: bottom;\n      padding-top: 16px;\n    }\n\n    .push-left {\n      margin-right: auto;\n    }\n\n    .push-right {\n      margin-left: auto;\n    }\n\n    .knx-warning {\n      --mdc-theme-primary: var(--error-color);\n    }\n\n    .knx-project-description {\n      margin-top: -8px;\n      padding: 0px 16px 16px;\n    }\n\n    .knx-delete-project-button {\n      position: absolute;\n      bottom: 0;\n      right: 0;\n    }\n\n    .knx-bug-report {\n      margin-top: 20px;\n\n      a {\n        text-decoration: none;\n      }\n    }\n\n    .header {\n      color: var(--ha-card-header-color, --primary-text-color);\n      font-family: var(--ha-card-header-font-family, inherit);\n      font-size: var(--ha-card-header-font-size, 24px);\n      letter-spacing: -0.012em;\n      line-height: 48px;\n      padding: -4px 16px 16px;\n      display: inline-block;\n      margin-block-start: 0px;\n      margin-block-end: 4px;\n      font-weight: normal;\n    }\n\n    ha-file-upload,\n    ha-selector-text {\n      width: 100%;\n      margin-top: 8px;\n    }\n  `;\n}\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"knx-info\": KNXInfo;\n  }\n}\n"],"names":["atLeastVersion","version","major","minor","patch","haMajor","haMinor","haPatch","split","Number","undefined","blankBeforePercent","localeOptions","language","mdiDelete","mdiFileUpload","HaFileUpload","LitElement","firstUpdated","changedProperties","super","this","autoOpenFileDialog","_openFilePicker","_name","value","FileList","Array","from","ensureArray","map","file","name","join","render","localize","hass","html","_t","_","uploading","_t2","uploadingLabel","progress","_t3","locale","nothing","_t4","classMap","dragged","_drag","multiple","Boolean","_handleDrop","_handleDragStart","_handleDragEnd","_t6","icon","_clearValue","deleteLabel","_t7","bytesToString","size","_t5","label","secondary","supports","accept","_handleFilePicked","_this$_input","_input","click","ev","_ev$dataTransfer","preventDefault","stopPropagation","dataTransfer","files","fireEvent","length","target","args","disabled","styles","css","_t8","attribute","type","Object","reflect","uploadFile","fd","FormData","append","resp","fetchWithAuth","method","body","status","Error","json","file_id","removeFile","callApi","hassioApiResultExtractor","response","data","extractApiErrorMessage","error","message","Set","loadGenericDialog","e","showDialogHelper","element","dialogParams","extra","Promise","resolve","origCancel","cancel","origConfirm","confirm","dialogTag","dialogImport","assign","prompt","out","showAlertDialog","showConfirmationDialog","confirmation","showPromptDialog","decimals","i","Math","floor","log","parseFloat","toFixed","VERSION","logger","KNXLogger","KNXInfo","narrow","route","tabs","knx","_renderInfoCard","info","project","_renderProjectDataCard","_renderProjectUploadCard","connected","current_address","projectInfo","Date","last_modified","toUTCString","tool_version","xknxproject_version","_removeProject","_uploading","_this$_projectFile","_projectFile","_filePicked","_projectPassword","text","multiline","_passwordChanged","_uploadFile","detail","_ev","project_file_id","processProjectFile","err","title","removeProjectFile","debug"],"mappings":"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"}