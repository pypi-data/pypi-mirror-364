# Generated by Django 3.0.5 on 2020-04-25 18:15

from django.db import migrations


class Migration(migrations.Migration):

    dependencies = [
        ('django_rds_iam_auth', '0001_initial'),
    ]

    operations = [
        migrations.RunSQL(""" 
            create function get_user_roles(text) returns name[]
            security definer
            SET search_path = pg_catalog, pg_temp
            language sql
            as
            $$
            select array (
            select r.rolname from pg_catalog.pg_roles r
              join pg_catalog.pg_auth_members m on m.member = r.oid
              left join pg_catalog.pg_roles pl on pl.oid = m.roleid
                where r.rolname = $1) as roles
            $$;
        """, reverse_sql="drop function get_user_roles(text);"),
    ]
